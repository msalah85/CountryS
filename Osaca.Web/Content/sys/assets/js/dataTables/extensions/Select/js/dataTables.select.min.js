/*! Select for DataTables 1.1.0
 * 2015 SpryMedia Ltd - datatables.net/license/mit
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery","datatables.net"],function(t){return n(t,window,document)}):typeof exports=="object"?module.exports=function(t,i){return t||(t=window),i&&i.fn.dataTable||(i=require("datatables.net")(t,i).$),n(i,t,t.document)}:n(jQuery,window,document)})(function(n,t,i,r){"use strict";function y(n,t,i){var r,u,f,e=function(t,i){var u,r;return t>i&&(u=i,i=t,t=u),r=!1,n.columns(":visible").indexes().filter(function(n){return(n===t&&(r=!0),n===i)?(r=!1,!0):r})},o=function(t,i){var u=n.rows({search:"applied"}).indexes(),f,r;return u.indexOf(t)>u.indexOf(i)&&(f=i,i=t,t=f),r=!1,u.filter(function(n){return(n===t&&(r=!0),n===i)?(r=!1,!0):r})};n.cells({selected:!0}).any()||i?(u=e(i.column,t.column),f=o(i.row,t.row)):(u=e(0,t.column),f=o(0,t.row));r=n.cells(f,u).flatten();n.cells(t,{selected:!0}).any()?n.cells(r).deselect():n.cells(r).select()}function c(t){var r=t.settings()[0],i=r._select.selector;n(t.table().body()).off("mousedown.dtSelect",i).off("mouseup.dtSelect",i).off("click.dtSelect",i);n("body").off("click.dtSelect")}function a(t){var i=n(t.table().body()),u=t.settings()[0],r=u._select.selector;i.on("mousedown.dtSelect",r,function(n){if(n.shiftKey)i.css("-moz-user-select","none").one("selectstart.dtSelect",r,function(){return!1})}).on("mouseup.dtSelect",r,function(){i.css("-moz-user-select","")}).on("click.dtSelect",r,function(r){var o=t.select.items(),u,e=t.settings()[0],f,s;n(r.target).closest("tbody")[0]==i[0]&&(f=n(r.target).closest("td, th"),s=t.cell(f).index(),t.cell(f).any())&&(o==="row"?(u=s.row,l(r,t,e,"row",u)):o==="column"?(u=t.cell(f).index().column,l(r,t,e,"column",u)):o==="cell"&&(u=t.cell(f).index(),l(r,t,e,"cell",u)),e._select_lastCell=s)});n("body").on("click.dtSelect",function(i){if(u._select.blurable){if(n(i.target).parents().filter(t.table().container()).length)return;if(n(i.target).parents("div.DTE").length)return;s(u,!0)}})}function f(t,i,r,u){(!u||t.flatten().length)&&(r.unshift(t),n(t.table().node()).triggerHandler(i+".dt",r))}function v(t){var u=t.settings()[0],i,r;u._select.info&&u.aanFeatures.i&&(i=n('<span class="select-info"/>'),r=function(r,u){i.append(n('<span class="select-item"/>').append(t.i18n("select."+r+"s",{_:"%d "+r+"s selected",0:"",1:"1 "+r+" selected"},u)))},r("row",t.rows({selected:!0}).flatten().length),r("column",t.columns({selected:!0}).flatten().length),r("cell",t.cells({selected:!0}).flatten().length),n.each(u.aanFeatures.i,function(t,r){r=n(r);var u=r.children("span.select-info");u.length&&u.remove();i.text()!==""&&r.append(i)}))}function p(t){var i=new u.Api(t);t.aoRowCreatedCallback.push({fn:function(i,r,u){var f,o,e=t.aoData[u];for(e._select_selected&&n(i).addClass(t._select.className),f=0,o=t.aoColumns.length;f<o;f++)(t.aoColumns[f]._select_selected||e._selected_cells&&e._selected_cells[f])&&n(e.anCells[f]).addClass(t._select.className)},sName:"select-deferRender"});i.on("preXhr.dt.dtSelect",function(){var t=i.rows({selected:!0}).ids(!0).filter(function(n){return n!==r}),n=i.cells({selected:!0}).eq(0).map(function(n){var t=i.row(n.row).id(!0);return t?{row:t,column:n.column}:r}).filter(function(n){return n!==r});i.one("draw.dt.dtSelect",function(){i.rows(t).select();n.any()&&n.each(function(n){i.cells(n.row,n.column).select()})})});i.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt",function(){v(i)});i.on("destroy.dtSelect",function(){c(i);i.off(".dtSelect")})}function w(t,i,r,u){var f=t[i+"s"]({search:"applied"}).indexes(),e=n.inArray(u,f),o=n.inArray(r,f),s;t[i+"s"]({selected:!0}).any()||e!==-1?(e>o&&(s=o,o=e,e=s),f.splice(o+1,f.length),f.splice(0,e)):f.splice(n.inArray(r,f)+1,f.length);t[i](r,{selected:!0}).any()?(f.splice(n.inArray(r,f),1),t[i+"s"](f).deselect()):t[i+"s"](f).select()}function s(n,t){if(t||n._select.style==="single"){var i=new u.Api(n);i.rows({selected:!0}).deselect();i.columns({selected:!0}).deselect();i.cells({selected:!0}).deselect()}}function l(n,t,i,r,u){var o=t.select.style(),f=t[r](u,{selected:!0}).any(),e;o==="os"?n.ctrlKey||n.metaKey?t[r](u).select(!f):n.shiftKey?r==="cell"?y(t,u,i._select_lastCell||null):w(t,r,u,i._select_lastCell?i._select_lastCell[r]:null):(e=t[r+"s"]({selected:!0}),f&&e.flatten().length===1?t[r](u).deselect():(e.deselect(),t[r](u).select())):t[r](u).select(!f)}function h(n,t){return function(i){return i.i18n("buttons."+n,t)}}var u=n.fn.dataTable,e,o;u.select={};u.select.version="1.1.0";n.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(n,t){u.ext.selector[t.type].push(function(n,i,u){var e=i.selected,o,s=[],f,h;if(e===r)return u;for(f=0,h=u.length;f<h;f++)o=n[t.prop][u[f]],(e!==!0||o._select_selected!==!0)&&(e!==!1||o._select_selected)||s.push(u[f]);return s})});u.ext.selector.cell.push(function(n,t,i){var e=t.selected,f,o=[],u,s;if(e===r)return i;for(u=0,s=i.length;u<s;u++)f=n.aoData[i[u].row],(e!==!0||!f._selected_cells||f._selected_cells[i[u].column]!==!0)&&(e!==!1||f._selected_cells&&f._selected_cells[i[u].column])||o.push(i[u]);return o});e=u.Api.register;o=u.Api.registerPlural;e("select()",function(){});e("select.blurable()",function(n){return n===r?this.context[0]._select.blurable:this.iterator("table",function(t){t._select.blurable=n})});e("select.info()",function(n){return v===r?this.context[0]._select.info:this.iterator("table",function(t){t._select.info=n})});e("select.items()",function(n){return n===r?this.context[0]._select.items:this.iterator("table",function(t){t._select.items=n;f(new u.Api(t),"selectItems",[n])})});e("select.style()",function(n){return n===r?this.context[0]._select.style:this.iterator("table",function(t){t._select.style=n;t._select_init||p(t);var i=new u.Api(t);c(i);n!=="api"&&a(i);f(new u.Api(t),"selectStyle",[n])})});e("select.selector()",function(n){return n===r?this.context[0]._select.selector:this.iterator("table",function(t){c(new u.Api(t));t._select.selector=n;t._select.style!=="api"&&a(new u.Api(t))})});o("rows().select()","row().select()",function(t){var i=this;return t===!1?this.deselect():(this.iterator("row",function(t,i){s(t);t.aoData[i]._select_selected=!0;n(t.aoData[i].nTr).addClass(t._select.className)}),this.iterator("table",function(n,t){f(i,"select",["row",i[t]],!0)}),this)});o("columns().select()","column().select()",function(t){var i=this;return t===!1?this.deselect():(this.iterator("column",function(t,i){s(t);t.aoColumns[i]._select_selected=!0;var r=new u.Api(t).column(i);n(r.header()).addClass(t._select.className);n(r.footer()).addClass(t._select.className);r.nodes().to$().addClass(t._select.className)}),this.iterator("table",function(n,t){f(i,"select",["column",i[t]],!0)}),this)});o("cells().select()","cell().select()",function(t){var i=this;return t===!1?this.deselect():(this.iterator("cell",function(t,i,u){s(t);var f=t.aoData[i];f._selected_cells===r&&(f._selected_cells=[]);f._selected_cells[u]=!0;f.anCells&&n(f.anCells[u]).addClass(t._select.className)}),this.iterator("table",function(n,t){f(i,"select",["cell",i[t]],!0)}),this)});o("rows().deselect()","row().deselect()",function(){var t=this;return this.iterator("row",function(t,i){t.aoData[i]._select_selected=!1;n(t.aoData[i].nTr).removeClass(t._select.className)}),this.iterator("table",function(n,i){f(t,"deselect",["row",t[i]],!0)}),this});o("columns().deselect()","column().deselect()",function(){var t=this;return this.iterator("column",function(t,i){t.aoColumns[i]._select_selected=!1;var r=new u.Api(t),f=r.column(i);n(f.header()).removeClass(t._select.className);n(f.footer()).removeClass(t._select.className);r.cells(null,i).indexes().each(function(i){var r=t.aoData[i.row],u=r._selected_cells;!r.anCells||u&&u[i.column]||n(r.anCells[i.column]).removeClass(t._select.className)})}),this.iterator("table",function(n,i){f(t,"deselect",["column",t[i]],!0)}),this});o("cells().deselect()","cell().deselect()",function(){var t=this;return this.iterator("cell",function(t,i,r){var u=t.aoData[i];u._selected_cells[r]=!1;u.anCells&&!t.aoColumns[r]._select_selected&&n(u.anCells[r]).removeClass(t._select.className)}),this.iterator("table",function(n,i){f(t,"deselect",["cell",t[i]],!0)}),this});n.extend(u.ext.buttons,{selected:{text:h("selected","Selected"),className:"buttons-selected",init:function(n){var t=this;n.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var n=t.rows({selected:!0}).any()||t.columns({selected:!0}).any()||t.cells({selected:!0}).any();t.enable(n)});this.disable()}},selectedSingle:{text:h("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(n){var t=this;n.on("draw.dt.DT select.dt.DT deselect.dt.DT",function(){var i=n.rows({selected:!0}).flatten().length+n.columns({selected:!0}).flatten().length+n.cells({selected:!0}).flatten().length;t.enable(i===1)});this.disable()}},selectAll:{text:h("selectAll","Select all"),className:"buttons-select-all",action:function(){var n=this.select.items();this[n+"s"]().select()}},selectNone:{text:h("selectNone","Deselect all"),className:"buttons-select-none",action:function(){s(this.settings()[0],!0)}}});n.each(["Row","Column","Cell"],function(n,t){var i=t.toLowerCase();u.ext.buttons["select"+t+"s"]={text:h("select"+t+"s","Select "+i+"s"),className:"buttons-select-"+i+"s",action:function(){this.select.items(i)},init:function(n){var t=this;n.on("selectItems.dt.DT",function(n,r,u){t.active(u===i)})}}});n(i).on("preInit.dt.dtSelect",function(t,i){if(t.namespace==="dt"){var f=i.oInit.select||u.defaults.select,e=new u.Api(i),s="row",o="api",h=!1,c=!0,l="td, th",a="selected";i._select={};f===!0?o="os":typeof f=="string"?o=f:n.isPlainObject(f)&&(f.blurable!==r&&(h=f.blurable),f.info!==r&&(c=f.info),f.items!==r&&(s=f.items),f.style!==r&&(o=f.style),f.selector!==r&&(l=f.selector),f.className!==r&&(a=f.className));e.select.selector(l);e.select.items(s);e.select.style(o);e.select.blurable(h);e.select.info(c);i._select.className=a;n(e.table().node()).hasClass("selectable")&&e.select.style("os")}});return u.select});