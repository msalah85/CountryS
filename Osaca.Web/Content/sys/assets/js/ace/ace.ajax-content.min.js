(function(n,t){function r(t,r){function a(t){var u="",i=n(".breadcrumb"),r;return i.length>0&&i.is(":visible")&&(i.find("> li:not(:first-child)").remove(),r=0,t.parents(".nav li").each(function(){var o=n(this).find("> a"),e=o.clone(),t,s,f;e.find("i,.fa,.glyphicon,.ace-icon,.menu-icon,.badge,.label").remove();t=e.text();e.remove();s=o.attr("href");r==0?(f=n('<li class="active"><\/li>').appendTo(i),f.text(t),u=t):(f=n("<li><a /><\/li>").insertAfter(i.find("> li:first-child")),f.find("a").attr("href",s).text(t));r++})),u}function v(t){var r=f.find(".ajax-append-title"),i;r.length>0?(document.title=r.text(),r.remove()):t.length>0&&(i=n.trim(String(document.title).replace(/^(.*)[\-]/,"")),i&&(i=" - "+i),t=n.trim(t)+i)}var f=n(t),u=this,c,o,e,h,s,l;f.attr("data-ajax-content","true");c=ace.helper.getAttrSettings(t,n.fn.ace_ajax.defaults);this.settings=n.extend({},n.fn.ace_ajax.defaults,r,c);o=!1;e=n();this.force_reload=!1;this.loadUrl=function(n,t,i){var r=!1;n=n.replace(/^(\#\!)?\#/,"");this.force_reload=t===!1;typeof this.settings.content_url=="function"&&(r=this.settings.content_url(n));typeof r=="string"&&this.getUrl(r,n,i)};this.loadAddr=function(n,t,i){this.force_reload=i===!1;this.getUrl(n,t,!1)};this.reload=function(){var t=n.trim(window.location.hash);!t&&this.settings.default_url&&(t=this.settings.default_url);this.loadUrl(t,!1)};this.post=function(t,i,r,u){var t=t||n.trim(location.href.replace(location.hash,"")),i,r;t&&(i=i||{},r=r||!1,this.getUrl(t,null,!1,"POST",i,r,u))};this.getUrl=function(t,i,r,s,h,c,l){var y;if(!o){var s=s||"GET",c=s=="GET"||s=="POST"&&c==!0,h=h||null,p;(f.trigger(p=n.Event("ajaxloadstart"),{url:t,hash:i,method:s,data:h}),p.isDefaultPrevented())||(u.startLoading(),y=s=="GET"?{url:t,cache:!this.force_reload}:{url:t,method:"POST",data:h},s=="POST"&&typeof l=="object"&&(y=n.extend({},y,l)),n.ajax(y).error(function(){f.trigger("ajaxloaderror",{url:t,hash:i,method:s,data:h});u.stopLoading(!0)}).done(function(o){var w,l,y,p,k,b;f.trigger("ajaxloaddone",{url:t,hash:i,method:s,data:h});s=="POST"&&(f.trigger(w=n.Event("ajaxpostdone",{url:t,data:h,result:o})),w.isDefaultPrevented()&&(c=!1));l=null;y="";typeof u.settings.update_active=="function"?l=u.settings.update_active.call(null,i,t,s,c):u.settings.update_active===!0&&i&&(l=n('a[data-url="'+i+'"]'),l.length>0&&(p=l.closest(".nav"),p.length>0&&(p.find(".active").each(function(){var t="active";(n(this).hasClass("hover")||u.settings.close_active)&&(t+=" open");n(this).removeClass(t);u.settings.close_active&&n(this).find(" > .submenu").css("display","")}),k=l.closest("li").addClass("active").parents(".nav li").addClass("active open"),p.closest(".sidebar[data-sidebar-scroll=true]").each(function(){var t=n(this);t.ace_sidebar_scroll("reset");r==!0&&t.ace_sidebar_scroll("scroll_to_active")}))));typeof u.settings.update_breadcrumbs=="function"?y=u.settings.update_breadcrumbs.call(null,i,t,l,s,c):u.settings.update_breadcrumbs===!0&&l!=null&&l.length>0&&(y=a(l));e.addClass("content-loaded").detach();c&&(o=String(o).replace(/<(title|link)([\s\>])/gi,'<div class="hidden ajax-append-$1"$2').replace(/<\/(title|link)\>/gi,"<\/div>"),f.empty().html(o));n(u.settings.loading_overlay||f).append(e);c&&setTimeout(function(){var r,t,i;for(n("head").find("link.ace-ajax-stylesheet").remove(),r=["link.ace-main-stylesheet","link#main-ace-style",'link[href*="/ace.min.css"]','link[href*="/ace.css"]'],t=[],i=0;i<r.length;i++)if(t=n("head").find(r[i]).first(),t.length>0)break;f.find(".ajax-append-link").each(function(){var r=n(this),i;r.attr("href")&&(i=jQuery("<link />",{type:"text/css",rel:"stylesheet","class":"ace-ajax-stylesheet"}),t.length>0?i.insertBefore(t):i.appendTo("head"),i.attr("href",r.attr("href")));r.remove()})},10);typeof u.settings.update_title=="function"?u.settings.update_title.call(null,i,t,y,s,c):u.settings.update_title===!0&&s=="GET"&&v(y);!r&&c&&n("html,body").animate({scrollTop:0},250);f.trigger("ajaxloadcomplete",{url:t,hash:i,method:s,data:h});b=/\.(?:\s*)ace(?:_a|A)jax(?:\s*)\((?:\s*)(?:\'|\")loadScripts(?:\'|\")/;o.match(b)?u.stopLoading():u.stopLoading(!0)}))}};h=!1;s=null;this.startLoading=function(){o||(o=!0,this.settings.loading_overlay||f.css("position")!="static"||(f.css("position","relative"),h=!0),e.remove(),e=n('<div class="ajax-loading-overlay"><i class="ajax-loading-icon '+(this.settings.loading_icon||"")+'"><\/i> '+this.settings.loading_text+"<\/div>"),this.settings.loading_overlay=="body"?n("body").append(e.addClass("ajax-overlay-body")):this.settings.loading_overlay?n(this.settings.loading_overlay).append(e):f.append(e),this.settings.max_load_wait!==!1&&(s=setTimeout(function(){if(s=null,o){var t;(f.trigger(t=n.Event("ajaxloadlong")),t.isDefaultPrevented())||u.stopLoading(!0)}},this.settings.max_load_wait*1e3)))};this.stopLoading=function(n){if(n===!0)o=!1,e.remove(),h&&(f.css("position",""),h=!1),s!=null&&(clearTimeout(s),s=null);else{e.addClass("almost-loaded");f.one("ajaxscriptsloaded.inner_call",function(){u.stopLoading(!0)})}};this.working=function(){return o};this.loadScripts=function(t,r){var t=t||[];n.ajaxPrefilter("script",function(n){n.cache=!0});setTimeout(function(){function e(){typeof r=="function"&&r();n('.btn-group[data-toggle="buttons"] > .btn').button();f.trigger("ajaxscriptsloaded")}function h(n){n+=1;n<t.length?l(n):e()}function l(r){if(r=r||0,!t[r])return h(r);var u="js-"+t[r].replace(/[^\w\d\-]/g,"-").replace(/\-\-/g,"-");i[u]!==!0?n.getScript(t[r]).done(function(){i[u]=!0}).complete(function(){c++;c>=s&&o?e():h(r)}):h(r)}for(var s=0,c=0,u=0;u<t.length;u++)t[u]&&function(){var n="js-"+t[u].replace(/[^\w\d\-]/g,"-").replace(/\-\-/g,"-");i[n]!==!0&&s++}();s>0?l():e()},10)};n(window).off("hashchange.ace_ajax").on("hashchange.ace_ajax",function(t,i){var r=n.trim(window.location.hash);if(r&&r.length!=0){if(u.settings.close_mobile_menu)try{n(u.settings.close_mobile_menu).ace_sidebar("mobileHide")}catch(t){}u.settings.close_dropdowns&&n(".dropdown.open .dropdown-toggle").dropdown("toggle");u.loadUrl(r,null,i)}}).trigger("hashchange.ace_ajax",[!0]);l=n.trim(window.location.hash);!l&&this.settings.default_url&&(window.location.hash=this.settings.default_url)}var i={};n.fn.aceAjax=n.fn.ace_ajax=function(i,u,f,e,o){var s,h=this.each(function(){var c=n(this),h=c.data("ace_ajax"),l=typeof i=="object"&&i;h||c.data("ace_ajax",h=new r(this,l));typeof i=="string"&&typeof h[i]=="function"&&(s=o!==t?h[i](u,f,e,o):e!==t?h[i](u,f,e):f!==t?h[i](u,f):h[i](u))});return s===t?h:s};n.fn.aceAjax.defaults=n.fn.ace_ajax.defaults={content_url:!1,default_url:!1,loading_icon:"fa fa-spin fa-spinner fa-2x orange",loading_text:"",loading_overlay:null,update_breadcrumbs:!0,update_title:!0,update_active:!0,close_active:!1,max_load_wait:!1,close_mobile_menu:!1,close_dropdowns:!1}})(window.jQuery);