(function(n,t){var i=function(t,i){var c=ace.helper.getAttrSettings(t,n.fn.ace_colorpicker.defaults),o=n.extend({},n.fn.ace_colorpicker.defaults,i,c),r=n(t),s="",h="",u=null,f=[],e;r.addClass("hide").find("option").each(function(){var t="colorpick-btn",n=this.value.replace(/[^\w\s,#\(\)\.]/g,"");this.value!=n&&(this.value=n);this.selected&&(t+=" selected",h=n);f.push(n);s+='<li><a class="'+t+'" href="#" style="background-color:'+n+';" data-color="'+n+'"><\/a><\/li>'}).end().on("change.color",function(){r.next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker">\t\t<a data-toggle="dropdown" class="dropdown-toggle" '+(o.auto_pos?'data-position="auto"':"")+' href="#"><span class="btn-colorpicker" style="background-color:'+h+'"><\/span><\/a><ul class="dropdown-menu'+(o.caret?" dropdown-caret":"")+(o.pull_right?" dropdown-menu-right":"")+'">'+s+"<\/ul><\/div>");e=r.next().find(".dropdown-menu");e.on(ace.click_event,function(t){var i=n(t.target),f;return i.is(".colorpick-btn")?(u&&u.removeClass("selected"),u=i,u.addClass("selected"),f=u.data("color"),r.val(f).trigger("change"),t.preventDefault(),!0):!1});u=r.next().find("a.selected");this.pick=function(i,u){if(typeof i=="number"){if(i>=f.length)return;t.selectedIndex=i;e.find("a:eq("+i+")").trigger(ace.click_event)}else if(typeof i=="string"){var o=i.replace(/[^\w\s,#\(\)\.]/g,"");if(i=f.indexOf(o),i==-1&&u===!0&&(f.push(o),n("<option />").appendTo(r).val(o),n('<li><a class="colorpick-btn" href="#"><\/a><\/li>').appendTo(e).find("a").css("background-color",o).data("color",o),i=f.length-1),i==-1)return;e.find("a:eq("+i+")").trigger(ace.click_event)}};this.destroy=function(){r.removeClass("hide").off("change.color").next().remove();f=[]}};n.fn.ace_colorpicker=function(r,u){var f,e=this.each(function(){var e=n(this),t=e.data("ace_colorpicker"),o=typeof r=="object"&&r;t||e.data("ace_colorpicker",t=new i(this,o));typeof r=="string"&&(f=t[r](u))});return f===t?e:f};n.fn.ace_colorpicker.defaults={pull_right:!1,caret:!0,auto_pos:!0}})(window.jQuery);