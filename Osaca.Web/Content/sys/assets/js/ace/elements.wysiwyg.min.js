(function(n){n.fn.ace_wysiwyg=function(t){var i=n.extend({speech_button:!0,wysiwyg:{}},t),f=["#ac725e","#d06b64","#f83a22","#fa573c","#ff7537","#ffad46","#42d692","#16a765","#7bd148","#b3dc6c","#fbe983","#fad165","#92e1c0","#9fe1e7","#9fc6e7","#4986e7","#9a9cff","#b99aff","#c2c2c2","#cabdbf","#cca6ac","#f691b2","#cd74e6","#a47ae2","#444444"],r={font:{values:["Arial","Courier","Comic Sans MS","Helvetica","Open Sans","Tahoma","Verdana"],icon:"fa fa-font",title:"Font"},fontSize:{values:{5:"Huge",3:"Normal",1:"Small"},icon:"fa fa-text-height",title:"Font Size"},bold:{icon:"fa fa-bold",title:"Bold (Ctrl/Cmd+B)"},italic:{icon:"fa fa-italic",title:"Italic (Ctrl/Cmd+I)"},strikethrough:{icon:"fa fa-strikethrough",title:"Strikethrough"},underline:{icon:"fa fa-underline",title:"Underline"},insertunorderedlist:{icon:"fa fa-list-ul",title:"Bullet list"},insertorderedlist:{icon:"fa fa-list-ol",title:"Number list"},outdent:{icon:"fa fa-outdent",title:"Reduce indent (Shift+Tab)"},indent:{icon:"fa fa-indent",title:"Indent (Tab)"},justifyleft:{icon:"fa fa-align-left",title:"Align Left (Ctrl/Cmd+L)"},justifycenter:{icon:"fa fa-align-center",title:"Center (Ctrl/Cmd+E)"},justifyright:{icon:"fa fa-align-right",title:"Align Right (Ctrl/Cmd+R)"},justifyfull:{icon:"fa fa-align-justify",title:"Justify (Ctrl/Cmd+J)"},createLink:{icon:"fa fa-link",title:"Hyperlink",button_text:"Add",placeholder:"URL",button_class:"btn-primary"},unlink:{icon:"fa fa-chain-broken",title:"Remove Hyperlink"},insertImage:{icon:"fa fa-picture-o",title:"Insert picture",button_text:'<i class="'+ace.vars.icon+'fa fa-file"><\/i> Choose Image &hellip;',placeholder:"Image URL",button_insert:"Insert",button_class:"btn-success",button_insert_class:"btn-primary",choose_file:!0},foreColor:{values:f,title:"Change Color"},backColor:{values:f,title:"Change Background Color"},undo:{icon:"fa fa-undo",title:"Undo (Ctrl/Cmd+Z)"},redo:{icon:"fa fa-repeat",title:"Redo (Ctrl/Cmd+Y)"},viewSource:{icon:"fa fa-code",title:"View Source"}},u=i.toolbar||["font",null,"fontSize",null,"bold","italic","strikethrough","underline",null,"insertunorderedlist","insertorderedlist","outdent","indent",null,"justifyleft","justifycenter","justifyright","justifyfull",null,"createLink","unlink",null,"insertImage",null,"foreColor",null,"undo","redo",null,"viewSource"];return this.each(function(){var f=' <div class="wysiwyg-toolbar btn-toolbar center"> <div class="btn-group"> ',c,t,o,s,h,a,e,l,v;for(c in u)if(u.hasOwnProperty(c)){if(t=u[c],t===null){f+=' <\/div> <div class="btn-group"> ';continue}if(typeof t=="string"&&t in r)t=r[t],t.name=u[c];else if(typeof t=="object"&&t.name in r)t=n.extend(r[t.name],t);else continue;o="className"in t?t.className:"btn-default";switch(t.name){case"font":f+=' <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><i class="'+ace.vars.icon+'fa fa-angle-down icon-on-right"><\/i><\/a> ';f+=' <ul class="dropdown-menu dropdown-light dropdown-caret">';for(s in t.values)t.values.hasOwnProperty(s)&&(f+=' <li><a data-edit="fontName '+t.values[s]+'" style="font-family:\''+t.values[s]+"'\">"+t.values[s]+"<\/a><\/li> ");f+=" <\/ul>";break;case"fontSize":f+=' <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i>&nbsp;<i class="'+ace.vars.icon+'fa fa-angle-down icon-on-right"><\/i><\/a> ';f+=' <ul class="dropdown-menu dropdown-light dropdown-caret"> ';for(h in t.values)t.values.hasOwnProperty(h)&&(f+=' <li><a data-edit="fontSize '+h+'"><font size="'+h+'">'+t.values[h]+"<\/font><\/a><\/li> ");f+=" <\/ul> ";break;case"createLink":f+=' <div class="btn-group"> <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> ';f+=' <div class="dropdown-menu dropdown-caret dropdown-menu-right">\t\t\t\t\t\t\t <div class="input-group">\t\t\t\t\t\t\t\t<input class="form-control" placeholder="'+t.placeholder+'" type="text" data-edit="'+t.name+'" />\t\t\t\t\t\t\t\t<span class="input-group-btn">\t\t\t\t\t\t\t\t\t<button class="btn btn-sm '+t.button_class+'" type="button">'+t.button_text+"<\/button>\t\t\t\t\t\t\t\t<\/span>\t\t\t\t\t\t\t <\/div>\t\t\t\t\t\t<\/div> <\/div>";break;case"insertImage":f+=' <div class="btn-group"> <a class="btn btn-sm '+o+' dropdown-toggle" data-toggle="dropdown" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> ';f+=' <div class="dropdown-menu dropdown-caret dropdown-menu-right">\t\t\t\t\t\t\t <div class="input-group">\t\t\t\t\t\t\t\t<input class="form-control" placeholder="'+t.placeholder+'" type="text" data-edit="'+t.name+'" />\t\t\t\t\t\t\t\t<span class="input-group-btn">\t\t\t\t\t\t\t\t\t<button class="btn btn-sm '+t.button_insert_class+'" type="button">'+t.button_insert+"<\/button>\t\t\t\t\t\t\t\t<\/span>\t\t\t\t\t\t\t <\/div>";t.choose_file&&"FileReader"in window&&(f+='<div class="space-2"><\/div>\t\t\t\t\t\t\t <label class="center block no-margin-bottom">\t\t\t\t\t\t\t\t<button class="btn btn-sm '+t.button_class+' wysiwyg-choose-file" type="button">'+t.button_text+'<\/button>\t\t\t\t\t\t\t\t<input type="file" data-edit="'+t.name+'" />\t\t\t\t\t\t\t  <\/label>');f+=" <\/div> <\/div>";break;case"foreColor":case"backColor":f+=' <select class="hide wysiwyg_colorpicker" title="'+t.title+'"> ';n.each(t.values,function(n,t){f+=' <option value="'+t+'">'+t+"<\/option> "});f+=" <\/select> ";f+=' <input style="display:none;" disabled class="hide" type="text" data-edit="'+t.name+'" /> ';break;case"viewSource":f+=' <a class="btn btn-sm '+o+'" data-view="source" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> ';break;default:f+=' <a class="btn btn-sm '+o+'" data-edit="'+t.name+'" title="'+t.title+'"><i class="'+ace.vars.icon+t.icon+'"><\/i><\/a> '}}f+=" <\/div> ";i.speech_button&&"onwebkitspeechchange"in(a=document.createElement("input"))&&(f+=' <input class="wysiwyg-speech-input" type="text" data-edit="inserttext" x-webkit-speech />');a=null;f+=" <\/div> ";f=i.toolbar_place?i.toolbar_place.call(this,f):n(this).before(f).prev();f.find("a[title]").tooltip({animation:!1,container:"body"});f.find(".dropdown-menu input[type=text]").on("click",function(){return!1}).on("change",function(){n(this).closest(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).on("keydown",function(t){t.which==27?(this.value="",n(this).change()):t.which==13&&(t.preventDefault(),t.stopPropagation(),n(this).change())});f.find("input[type=file]").prev().on(ace.click_event,function(){n(this).next().click()});f.find(".wysiwyg_colorpicker").each(function(){n(this).ace_colorpicker({pull_right:!0}).change(function(){n(this).nextAll("input").eq(0).val(this.value).change()}).next().find(".btn-colorpicker").tooltip({title:this.title,animation:!1,container:"body"})});e=n(this);l=!1;f.find("a[data-view=source]").on("click",function(t){if(t.preventDefault(),l){var i=e.next();e.html(i.val()).show();i.remove();n(this).removeClass("active")}else n("<textarea />").css({width:e.outerWidth(),height:e.outerHeight()}).val(e.html()).insertAfter(e),e.hide(),n(this).addClass("active");l=!l});v=n.extend({},{activeToolbarClass:"active",toolbarSelector:f},i.wysiwyg||{});n(this).wysiwyg(v)}),this}})(window.jQuery);