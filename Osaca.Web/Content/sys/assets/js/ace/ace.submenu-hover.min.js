(function(n,t){function e(t,e){function ft(t){var e=t,r=n(e),i=null,u=!1;this.show=function(){i!=null&&clearTimeout(i);i=null;r.addClass("hover-show hover-shown");u=!0;for(var n=0;n<f.length;n++)f[n].find(".hover-show").not(".hover-shown").each(function(){y(this).hide()})};this.hide=function(){u=!1;r.removeClass("hover-show hover-shown hover-flip");i!=null&&clearTimeout(i);i=null;var n=r.find("> .submenu").get(0);n&&v(n,"hide")};this.hideDelay=function(n){i!=null&&clearTimeout(i);r.removeClass("hover-shown");i=setTimeout(function(){u=!1;r.removeClass("hover-show hover-flip");i=null;var t=r.find("> .submenu").get(0);t&&v(t,"hide");typeof n=="function"&&n.call(this)},tt.settings.sub_hover_delay)};this.is_visible=function(){return u}}function y(t){var i=n(t).data("subHide");return i||n(t).data("subHide",i=new ft(t)),i}function v(t,i){var r=n(t).data("ace_scroll");return r?typeof i=="string"?(r[i](),!0):r:!1}function nt(i){var o=n(this),p=n(i),nt,k,ft,g,at,vt,l,it,e,y,f,rt;i.style.top="";i.style.bottom="";nt=null;h.minimized&&(nt=o.find(".menu-text").get(0))&&(nt.style.marginTop="");var ut=ace.helper.scrollTop(),st=0,ht=ut;d&&(st=t.offsetTop,ht+=st+1);f=o.offset();f.top=parseInt(f.top);k=0;i.style.maxHeight="";ft=i.scrollHeight;g=o.height();nt&&(k=g,f.top+=k);var et=parseInt(f.top+ft),u=0,ct=b.height(),tt=parseInt(f.top-ht-k),yt=ct,lt=h.horizontal,ot=!1;if(lt&&this.parentNode==a&&(u=0,f.top+=o.height(),ot=!0),!ot&&(u=et-(ct+ut))>=0&&(u=u<tt?u:tt,u==0&&(u=20),tt-u>10&&(u+=parseInt(Math.min(25,tt-u))),f.top+(g-k)>et-u&&(u-=f.top+(g-k)-(et-u)),u>0&&(i.style.top=-u+"px",nt&&(nt.style.marginTop=-u+"px"))),u<0&&(u=0),at=u>0&&u>g-20,at?o.addClass("pull_up"):o.removeClass("pull_up"),lt)if(o.parent().parent().hasClass("hover-flip"))o.addClass("hover-flip");else{var pt=p.offset(),wt=p.width(),bt=b.width();pt.left+wt>bt&&o.addClass("hover-flip")}(vt=o.hasClass("hover")&&!h.mobile_view,vt&&p.find("> li > .submenu").length>0)||(l=yt-(f.top-ut)+u,it=u-l,it>0&&it<g&&(l+=parseInt(Math.max(g,g-it))),l-=5,l<90)||(e=!1,r?p.addClass("sub-scroll").css("max-height",l+"px"):(e=v(i),e==!1&&(p.ace_scroll({observeContent:!0,detached:!0,updatePos:!1,reset:!0,mouseWheelLock:!0,styleClass:s.settings.sub_scroll_style}),e=v(i),y=e.get_track(),y&&p.after(y)),e.update({size:l})),c=l,!r&&e&&(l>14&&ft-l>4?(e.enable(),e.reset()):e.disable(),y=e.get_track(),y&&(y.style.top=-(u-k-1)+"px",f=p.position(),rt=f.left,rt+=w?2:p.outerWidth()-e.track_size(),y.style.left=parseInt(rt)+"px",ot&&(y.style.left=parseInt(rt-2)+"px",y.style.top=parseInt(f.top)+(nt?k-2:0)+"px"))),ace.vars.safari&&ace.helper.redraw(i))}var s=this,tt=this,it=ace.helper.getAttrSettings(t,n.fn.ace_sidebar_hover.defaults),o,a,c;this.settings=n.extend({},n.fn.ace_sidebar_hover.defaults,e,it);o=n(t);a=o.find(".nav-list").get(0);o.attr("data-sidebar-hover","true");f.push(o);var h={},p=ace.vars.old_ie,w=!1,l=s.settings.sub_hover_delay||!1;i&&l&&(s.settings.sub_hover_delay=parseInt(Math.max(s.settings.sub_hover_delay,2500)));var b=n(window),k=n(".navbar").eq(0),d=k.css("position")=="fixed";if(this.update_vars=function(){d=k.css("position")=="fixed"},s.dirty=!1,this.reset=function(){s.dirty!=!1&&(s.dirty=!1,o.find(".submenu").each(function(){var t=n(this),i=t.parent();t.css({top:"",bottom:"","max-height":""});t.hasClass("ace-scroll")?t.ace_scroll("disable"):t.removeClass("sub-scroll");u(this,"absolute")?t.addClass("can-scroll"):t.removeClass("can-scroll");i.removeClass("pull_up").find(".menu-text:first").css("margin-top","")}),o.find(".hover-show").removeClass("hover-show hover-shown hover-flip"))},this.updateStyle=function(n){sub_scroll_style=n;o.find(".submenu.ace-scroll").ace_scroll("update",{styleClass:n})},this.changeDir=function(n){w=n==="right"},c=-1,!r)o.on("hide.ace.submenu.sidebar_hover",".submenu",function(t){if(!(c<1)){t.stopPropagation();var i=n(this).closest(".ace-scroll.can-scroll");i.length!=0&&u(i[0],"absolute")&&i[0].scrollHeight-this.scrollHeight<c&&i.ace_scroll("disable")}});if(!r)o.on("shown.ace.submenu.sidebar_hover hidden.ace.submenu.sidebar_hover",".submenu",function(){var t,i;c<1||(t=n(this).closest(".ace-scroll.can-scroll"),t.length!=0&&u(t[0],"absolute"))&&(i=t[0].scrollHeight,c>14&&i-c>4?t.ace_scroll("enable").ace_scroll("reset"):t.ace_scroll("disable"))});var g=-1,rt=i?"touchstart.sub_hover":"mouseenter.sub_hover",ut=i?"touchend.sub_hover touchcancel.sub_hover":"mouseleave.sub_hover";o.on(rt,".nav-list li, .sidebar-shortcuts",function(){var r,e,c,v,k;if(h=o.ace_sidebar("vars"),!h.collapsible){var f=n(this),w=!1,b=f.hasClass("hover"),t=f.find("> .submenu").get(0);if(!(t||this.parentNode==a||b||(w=f.hasClass("sidebar-shortcuts")))){t&&n(t).removeClass("can-scroll");return}if(r=t,e=!1,r||this.parentNode!=a||(r=f.find("> a > .menu-text").get(0)),!r&&w&&(r=f.find(".sidebar-shortcuts-large").get(0)),(!r||!(e=u(r,"absolute")))&&!b){t&&n(t).removeClass("can-scroll");return}c=l?y(this):null;t&&(e?(s.dirty=!0,v=ace.helper.scrollTop(),(l&&!c.is_visible()||!i&&v!=g||p)&&(n(t).addClass("can-scroll"),p||i?(k=this,setTimeout(function(){nt.call(k,t)},0)):nt.call(this,t)),g=v):n(t).removeClass("can-scroll"));l&&c.show()}}).on(ut,".nav-list li, .sidebar-shortcuts",function(){(h=o.ace_sidebar("vars"),h.collapsible)||n(this).hasClass("hover-show")&&l&&y(this).hideDelay()})}var f;if(!ace.vars.very_old_ie){var i=ace.vars.touch,r=ace.vars.old_ie||i,u="getComputedStyle"in window?function(n,t){return n.offsetHeight,window.getComputedStyle(n).position==t}:function(t,i){return t.offsetHeight,n(t).css("position")==i};n(window).on("resize.sidebar.ace_hover",function(){n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("update_vars").ace_sidebar_hover("reset")});n(document).on("settings.ace.ace_hover",function(t,i){i=="sidebar_collapsed"?n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("reset"):i=="navbar_fixed"&&n(".sidebar[data-sidebar-hover=true]").ace_sidebar_hover("update_vars")});f=[];n.fn.ace_sidebar_hover=function(i,r){var u,f=this.each(function(){var f=n(this),t=f.data("ace_sidebar_hover"),o=typeof i=="object"&&i;t||f.data("ace_sidebar_hover",t=new e(this,o));typeof i=="string"&&typeof t[i]=="function"&&(u=t[i](r))});return u===t?f:u};n.fn.ace_sidebar_hover.defaults={sub_sub_hover_delay:750,sub_scroll_style:"no-track scroll-thin"}}})(window.jQuery);