(function(n,t){function r(r,u){function p(){this.mobile_view=this.mobile_style<4&&this.is_mobile_view();this.collapsible=!this.mobile_view&&this.is_collapsible();this.minimized=!this.collapsible&&this.$sidebar.hasClass(a)||this.mobile_style==3&&this.mobile_view&&this.$sidebar.hasClass(o);this.horizontal=!(this.mobile_view||this.collapsible)&&this.$sidebar.hasClass(v)}var f=this,l,s,h,e;this.$sidebar=n(r);this.$sidebar.attr("data-sidebar","true");this.$sidebar.attr("id")||this.$sidebar.attr("id","id-sidebar-"+ ++i);l=ace.helper.getAttrSettings(r,n.fn.ace_sidebar.defaults,"sidebar-");this.settings=n.extend({},n.fn.ace_sidebar.defaults,u,l);this.minimized=!1;this.collapsible=!1;this.horizontal=!1;this.mobile_view=!1;this.vars=function(){return{minimized:this.minimized,collapsible:this.collapsible,horizontal:this.horizontal,mobile_view:this.mobile_view}};this.get=function(n){if(this.hasOwnProperty(n))return this[n]};this.set=function(n,t){this.hasOwnProperty(n)&&(this[n]=t)};this.ref=function(){return this};s=function(t,i){var r=n(this).find(ace.vars[".icon"]),u,f;if(r.length>0){u=r.attr("data-icon1");f=r.attr("data-icon2");typeof t!="undefined"?t?r.removeClass(u).addClass(f):r.removeClass(f).addClass(u):r.toggleClass(u).toggleClass(f);try{i!==!1&&ace.settings.saveState(r.get(0))}catch(e){}}};h=function(){var t=f.$sidebar.find(".sidebar-collapse");return t.length==0&&(t=n('.sidebar-collapse[data-target="#'+(f.$sidebar.attr("id")||"")+'"]')),t.length!=0?t[0]:null};this.toggleMenu=function(t,i){if(!this.collapsible){this.minimized=!this.minimized;var i=!(t===!1||i===!1);this.minimized?this.$sidebar.addClass("menu-min"):this.$sidebar.removeClass("menu-min");try{i&&ace.settings.saveState(r,"class","menu-min",this.minimized)}catch(u){}t||(t=h());t&&s.call(t,this.minimized,i);ace.vars.old_ie&&ace.helper.redraw(r);n(document).trigger("settings.ace",["sidebar_collapsed",this.minimized,r,i])}};this.collapse=function(n,t){this.collapsible||(this.minimized=!1,this.toggleMenu(n,t))};this.expand=function(n,t){this.collapsible||(this.minimized=!0,this.toggleMenu(n,t))};this.showResponsive=function(){this.$sidebar.removeClass(o).removeClass(c)};this.toggleResponsive=function(t,i){var u,i,r,f,e;this.mobile_view&&this.mobile_style==3&&(this.$sidebar.hasClass("menu-min")&&(this.$sidebar.removeClass("menu-min"),u=h(),u&&s.call(u)),i=typeof i!="undefined"?i:this.$sidebar.hasClass(o),i?this.$sidebar.addClass(c).removeClass(o):this.$sidebar.removeClass(c).addClass(o),this.minimized=!i,t||(t=this.$sidebar.find(".sidebar-expand"),t.length==0&&(t=n('.sidebar-expand[data-target="#'+(this.$sidebar.attr("id")||"")+'"]')),t=t.length!=0?t[0]:null),t&&(r=n(t).find(ace.vars[".icon"]),r.length>0&&(f=r.attr("data-icon1"),e=r.attr("data-icon2"),i?r.removeClass(f).addClass(e):r.removeClass(e).addClass(f))),n(document).triggerHandler("settings.ace",["sidebar_collapsed",this.minimized]))};this.is_collapsible=function(){var t;return this.$sidebar.hasClass("navbar-collapse")&&(t=n('.navbar-toggle[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))!=null&&t.scrollHeight>0};this.is_mobile_view=function(){var t;return(t=n('.menu-toggler[data-target="#'+(this.$sidebar.attr("id")||"")+'"]').get(0))!=null&&t.scrollHeight>0};this.$sidebar.on(ace.click_event+".ace.submenu",".nav-list",function(t){var h=this,r=n(t.target).closest("a"),o,e,i,s;if(r&&r.length!=0){if(o=f.minimized&&!f.collapsible,!r.hasClass("dropdown-toggle"))return ace.click_event=="tap"&&o&&r.get(0).parentNode.parentNode==h&&(e=r.find(".menu-text").get(0),e!=null&&t.target!=e&&!n.contains(e,t.target))?(t.preventDefault(),!1):ace.vars.ios_safari&&r.attr("data-link")!=="false"?(document.location=r.attr("href"),t.preventDefault(),!1):void 0;if(t.preventDefault(),i=r.siblings(".submenu").get(0),!i)return!1;var c=n(i),u=0,l=i.parentNode.parentNode;return o&&l==h||c.parent().hasClass("hover")&&c.css("position")=="absolute"&&!f.collapsible?!1:(s=i.scrollHeight==0,s&&f.settings.hide_open_subs&&n(l).find("> .open > .submenu").each(function(){this==i||n(this.parentNode).hasClass("active")||(u-=this.scrollHeight,f.hide(this,f.settings.duration,!1))}),s?(f.show(i,f.settings.duration),u!=0&&(u+=i.scrollHeight)):(f.hide(i,f.settings.duration),u-=i.scrollHeight),u!=0&&(f.$sidebar.attr("data-sidebar-scroll")!="true"||f.minimized||f.$sidebar.ace_sidebar_scroll("prehide",u)),!1)}});e=!1;this.show=function(t,i,r){var u,s,f,o;if((r=r!==!1,r&&e)||(u=n(t),u.trigger(s=n.Event("show.ace.submenu")),s.isDefaultPrevented()))return!1;if(r&&(e=!0),i=typeof i!="undefined"?i:this.settings.duration,u.css({height:0,overflow:"hidden",display:"block"}).removeClass("nav-hide").addClass("nav-show").parent().addClass("open"),t.scrollTop=0,f=function(t,i){t&&t.stopPropagation();u.css({"transition-property":"","transition-duration":"",overflow:"",height:""});i!==!1&&u.trigger(n.Event("shown.ace.submenu"));r&&(e=!1)},o=t.scrollHeight,i!=0&&o!=0&&n.support.transition.end){u.css({height:o,"transition-property":"height","transition-duration":i/1e3+"s"}).one(n.support.transition.end,f);ace.vars.android&&setTimeout(function(){f(null,!1);ace.helper.redraw(t)},i+20)}else f();return!0};this.hide=function(t,i,r){var u,s,o,f;if((r=r!==!1,r&&e)||(u=n(t),u.trigger(s=n.Event("hide.ace.submenu")),s.isDefaultPrevented()))return!1;if(r&&(e=!0),i=typeof i!="undefined"?i:this.settings.duration,o=t.scrollHeight,u.css({height:o,overflow:"hidden",display:"block"}).parent().removeClass("open"),t.offsetHeight,f=function(t,i){t&&t.stopPropagation();u.css({display:"none",overflow:"",height:"","transition-property":"","transition-duration":""}).removeClass("nav-show").addClass("nav-hide");i!==!1&&u.trigger(n.Event("hidden.ace.submenu"));r&&(e=!1)},i!=0&&o!=0&&n.support.transition.end){u.css({height:0,"transition-property":"height","transition-duration":i/1e3+"s"}).one(n.support.transition.end,f);ace.vars.android&&setTimeout(function(){f(null,!1);ace.helper.redraw(t)},i+20)}else f();return!0};this.toggle=function(n,t){if(t=t||f.settings.duration,n.scrollHeight==0){if(this.show(n,t))return 1}else if(this.hide(n,t))return-1;return 0};var a="menu-min",o="responsive-min",c="responsive-max",v="h-sidebar",y=function(){this.mobile_style=1;this.$sidebar.hasClass("responsive")&&!n('.menu-toggler[data-target="#'+this.$sidebar.attr("id")+'"]').hasClass("navbar-toggle")?this.mobile_style=2:this.$sidebar.hasClass(o)?this.mobile_style=3:this.$sidebar.hasClass("navbar-collapse")&&(this.mobile_style=4)};y.call(f);n(window).on("resize.sidebar.vars",function(){p.call(f)}).triggerHandler("resize.sidebar.vars");this.mobileToggle=function(n){var n=typeof n=="undefined"?t:n;this.mobile_view?this.mobile_style==1||this.mobile_style==2?this.toggleMobile(null,n):this.mobile_style==3&&this.toggleResponsive(null,n):this.collapsible&&this.toggleCollapsible(null,n)};this.mobileShow=function(){this.mobileToggle(!0)};this.mobileHide=function(){this.mobileToggle(!1)};this.toggleMobile=function(t,i){if(this.mobile_style==1||this.mobile_style==2){var i=typeof i!="undefined"?i:!this.$sidebar.hasClass("display");t||(t=n('.menu-toggler[data-target="#'+(this.$sidebar.attr("id")||"")+'"]'),t=t.length!=0?t[0]:null);i?(this.$sidebar.addClass("display"),t&&n(t).addClass("display")):(this.$sidebar.removeClass("display"),t&&n(t).removeClass("display"))}};this.toggleCollapsible=function(n,t){if(this.mobile_style==4){var t=typeof t!="undefined"?t:!this.$sidebar.hasClass("in");t?this.$sidebar.collapse("show"):(this.$sidebar.removeClass("display"),this.$sidebar.collapse("hide"))}}}var i=0;n(document).on(ace.click_event+".ace.menu",".menu-toggler",function(t){var f=n(this),i=n(f.attr("data-target")),r,u;if(i.length!=0){if(t.preventDefault(),i.ace_sidebar("toggleMobile",this),r=ace.click_event+".ace.autohide",u=i.attr("data-auto-hide")==="true",f.hasClass("display")){if(u)n(document).on(r,function(t){if(i.get(0)==t.target||n.contains(i.get(0),t.target)){t.stopPropagation();return}i.ace_sidebar("toggleMobile",this,!1);n(document).off(r)});i.attr("data-sidebar-scroll")=="true"&&i.ace_sidebar_scroll("reset")}else u&&n(document).off(r);return!1}}).on(ace.click_event+".ace.menu",".sidebar-collapse",function(t){var r=n(this).attr("data-target"),i=null;(r&&(i=n(r)),(i==null||i.length==0)&&(i=n(this).closest(".sidebar")),i.length!=0)&&(t.preventDefault(),i.ace_sidebar("toggleMenu",this))}).on(ace.click_event+".ace.menu",".sidebar-expand",function(t){var u=n(this).attr("data-target"),i=null,f,r;if((u&&(i=n(u)),(i==null||i.length==0)&&(i=n(this).closest(".sidebar")),i.length!=0)&&(f=this,t.preventDefault(),i.ace_sidebar("toggleResponsive",this),r=ace.click_event+".ace.autohide",i.attr("data-auto-hide")==="true"))if(i.hasClass(responsive_max_class))n(document).on(r,function(t){if(i.get(0)==t.target||n.contains(i.get(0),t.target)){t.stopPropagation();return}i.ace_sidebar("toggleResponsive",f);n(document).off(r)});else n(document).off(r)});n.fn.ace_sidebar=function(i,u,f){var e,o=this.each(function(){var s=n(this),o=s.data("ace_sidebar"),h=typeof i=="object"&&i;o||s.data("ace_sidebar",o=new r(this,h));typeof i=="string"&&typeof o[i]=="function"&&(e=u instanceof Array?o[i].apply(o,u):f!==t?o[i](u,f):o[i](u))});return e===t?o:e};n.fn.ace_sidebar.defaults={duration:300,hide_open_subs:!0}})(window.jQuery);