/**
*
* @license Guriddo jqGrid JS - v5.0.1 - 2015-10-19
* Copyright(c) 2008, Tony Tomov, tony@trirand.com
* 
* License: http://guriddo.net/?page_id=103334
*/
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):n(jQuery)})(function($){"use strict";function k(n,t){var i,r,u=[],f;if(!this||typeof n!="function"||n instanceof RegExp)throw new TypeError;for(f=this.length,i=0;i<f;i++)if(this.hasOwnProperty(i)&&(r=this[i],n.call(t,r,i,this))){u.push(r);break}return u}var n,v;$.jgrid=$.jgrid||{};$.jgrid.hasOwnProperty("defaults")||($.jgrid.defaults={});$.extend($.jgrid,{version:"5.0.1",htmlDecode:function(n){return n&&(n==="&nbsp;"||n==="&#160;"||n.length===1&&n.charCodeAt(0)===160)?"":n?String(n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):n},htmlEncode:function(n){return n?String(n).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n},template:function(n){var i=$.makeArray(arguments).slice(1),t,r=i.length;return n==null&&(n=""),n.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(n,u){if(!isNaN(parseInt(u,10)))return i[parseInt(u,10)];for(t=0;t<r;t++)if($.isArray(i[t]))for(var f=i[t],e=f.length;e--;)if(u===f[e].nm)return f[e].v})},msie:navigator.appName==="Microsoft Internet Explorer",msiever:function(){var n=-1,t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return i.exec(t)!=null&&(n=parseFloat(RegExp.$1)),n},getCellIndex:function(n){var t=$(n);return t.is("tr")?-1:(t=(!t.is("td")&&!t.is("th")?t.closest("td,th"):t)[0],$.jgrid.msie)?$.inArray(t,t.parentNode.cells):t.cellIndex},stripHtml:function(n){n=String(n);return n?(n=n.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,""),n&&n!=="&nbsp;"&&n!=="&#160;"?n.replace(/\"/g,"'"):""):n},stripPref:function(n,t){var i=$.type(n);return(i==="string"||i==="number")&&(n=String(n),t=n!==""?String(t).replace(String(n),""):t),t},parse:function(jsonString){var js=jsonString;return js.substr(0,9)==="while(1);"&&(js=js.substr(9)),js.substr(0,2)==="/*"&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&typeof JSON=="object"&&typeof JSON.parse=="function"?JSON.parse(js):eval("("+js+")")},parseDate:function(n,t,i,r){var it=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),c=typeof t=="string"?t.match(it):null,h=function(n,t){for(n=String(n),t=parseInt(t,10)||2;n.length<t;)n="0"+n;return n},u={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f=0,o,e,g,nt=function(n,t){return n===0?t===12&&(t=0):t!==12&&(t+=12),t},s=0,a;if(r===undefined&&(r=$.jgrid.getRegional(this,"formatter.date")),r.parseRe===undefined&&(r.parseRe=/[#%\\\/:_;.,\t\s-]/),r.masks.hasOwnProperty(n)&&(n=r.masks[n]),t&&t!=null)if(isNaN(+t)||String(n).toLowerCase()!=="u")if(t.constructor===Date)f=t;else if(c!==null)f=new Date(parseInt(c[1],10)),c[3]&&(s=Number(c[5])*60+Number(c[6]),s*=c[4]==="-"?1:-1,s-=f.getTimezoneOffset(),f.setTime(Number(Number(f)+s*6e4)));else{for(r.srcformat==="ISO8601Long"&&t.charAt(t.length-1)==="Z"&&(s-=(new Date).getTimezoneOffset()),t=String(t).replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),n=n.replace(/\T/g,"#").replace(/\t/,"%").split(r.parseRe),e=0,g=n.length;e<g;e++){switch(n[e]){case"M":o=$.inArray(t[e],r.monthNames);o!==-1&&o<12&&(t[e]=o+1,u.m=t[e]);break;case"F":o=$.inArray(t[e],r.monthNames,12);o!==-1&&o>11&&(t[e]=o+1-12,u.m=t[e]);break;case"n":n[e]="m";break;case"j":n[e]="d";break;case"a":o=$.inArray(t[e],r.AmPm);o!==-1&&o<2&&t[e]===r.AmPm[o]&&(t[e]=o,u.h=nt(t[e],u.h));break;case"A":o=$.inArray(t[e],r.AmPm);o!==-1&&o>1&&t[e]===r.AmPm[o]&&(t[e]=o-2,u.h=nt(t[e],u.h));break;case"g":u.h=parseInt(t[e],10)}t[e]!==undefined&&(u[n[e].toLowerCase()]=parseInt(t[e],10))}if(u.f&&(u.m=u.f),u.m===0&&u.y===0&&u.d===0)return"&#160;";u.m=parseInt(u.m,10)-1;a=u.y;a>=70&&a<=99?u.y=1900+u.y:a>=0&&a<=69&&(u.y=2e3+u.y);f=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);s>0&&f.setTime(Number(Number(f)+s*6e4))}else f=new Date(parseFloat(t)*1e3);else f=new Date(u.y,u.m,u.d,u.h,u.i,u.s,u.u);if(r.userLocalTime&&s===0&&(s-=(new Date).getTimezoneOffset(),s>0&&f.setTime(Number(Number(f)+s*6e4))),i===undefined)return f;r.masks.hasOwnProperty(i)?i=r.masks[i]:i||(i="Y-m-d");var l=f.getHours(),rt=f.getMinutes(),p=f.getDate(),v=f.getMonth()+1,k=f.getTimezoneOffset(),ut=f.getSeconds(),ft=f.getMilliseconds(),w=f.getDay(),y=f.getFullYear(),b=(w+6)%7+1,d=(new Date(y,v-1,p)-new Date(y,0,1))/864e5,tt={d:h(p),D:r.dayNames[w],j:p,l:r.dayNames[w+7],N:b,S:r.S(p),w:w,z:d,W:b<5?Math.floor((d+b-1)/7)+1:Math.floor((d+b-1)/7)||((new Date(y-1,0,1).getDay()+6)%7<4?53:52),F:r.monthNames[v- -11],m:h(v),M:r.monthNames[v-1],n:v,t:"?",L:"?",o:"?",Y:y,y:String(y).substring(2),a:l<12?r.AmPm[0]:r.AmPm[1],A:l<12?r.AmPm[2]:r.AmPm[3],B:"?",g:l%12||12,G:l,h:h(l%12||12),H:h(l),i:h(rt),s:h(ut),u:ft,e:"?",I:"?",O:(k>0?"-":"+")+h(Math.floor(Math.abs(k)/60)*100+Math.abs(k)%60,4),P:"?",T:(String(f).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1e3)};return i.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(n){return tt.hasOwnProperty(n)?tt[n]:n.substring(1)})},jqID:function(n){return String(n).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(n){return(n||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(n,t){var i,f,r=[],u;if(typeof t=="function")return t(n);if(i=n[t],i===undefined)try{if(typeof t=="string"&&(r=t.split(".")),u=r.length,u)for(i=n;i&&u--;)f=r.shift(),i=i[f]}catch(e){}return i},getXmlData:function(n,t,i){var u,r=typeof t=="string"?t.match(/^(.*)\[(\w+)\]$/):null;return typeof t=="function"?t(n):r&&r[2]?r[1]?$(r[1],n).attr(r[2]):$(n).attr(r[2]):(u=$(t,n),i)?u:u.length>0?$(u).text():undefined},cellWidth:function(){var n=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable ui-common-table' style='width:5px;'><tr class='jqgrow'><td style='width:5px;display:block;'><\/td><\/tr><\/table><\/div>"),t=n.appendTo("body").find("td").width();return n.remove(),Math.abs(t-5)>.1},isLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}},getRegional:function(n,t,i){var r;return i!==undefined?i:(n.p&&n.p.regional&&$.jgrid.regional&&(r=$.jgrid.getAccessor($.jgrid.regional[n.p.regional]||{},t)),r===undefined&&(r=$.jgrid.getAccessor($.jgrid,t)),r)},isMobile:function(){try{return/Android|webOS|iPhone|iPad|iPod|pocket|psp|kindle|avantgo|blazer|midori|Tablet|Palm|maemo|plucker|phone|BlackBerry|symbian|IEMobile|mobile|ZuneWP7|Windows Phone|Opera Mini/i.test(navigator.userAgent)?!0:!1}catch(n){return!1}},cell_width:!0,ajaxOptions:{},from:function(n){var t=this,i=function(n,i){typeof n=="string"&&(n=$.data(n));var r=this,u=n,h=!0,o=!1,f=i,v=/[\$,%]/g,c=null,y=null,p=0,e=!1,a="",s=[],l=!0;if(typeof n=="object"&&n.push)n.length>0&&(l=typeof n[0]!="object"?!1:!0);else throw"data provides is not an array";return this._hasData=function(){return u===null?!1:u.length===0?!1:!0},this._getStr=function(n){var t=[];return o&&t.push("jQuery.trim("),t.push("String("+n+")"),o&&t.push(")"),h||t.push(".toLowerCase()"),t.join("")},this._strComp=function(n){return typeof n=="string"?".toString()":""},this._group=function(n,t){return{field:n.toString(),unique:t,items:[]}},this._toStr=function(n){return o&&(n=$.trim(n)),n=n.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),h?n:n.toLowerCase()},this._funcLoop=function(n){var t=[];return $.each(u,function(i,r){t.push(n(r))}),t},this._append=function(n){var t;for(f===null?f="":f+=a===""?" && ":a,t=0;t<p;t++)f+="(";e&&(f+="!");f+="("+n+")";e=!1;a="";p=0},this._setCommand=function(n,t){c=n;y=t},this._resetNegate=function(){e=!1},this._repeatCommand=function(n,t){return c===null?r:n!==null&&t!==null?c(n,t):y===null?c(n):l?c(y,n):c(n)},this._equals=function(n,t){return r._compare(n,t,1)===0},this._compare=function(n,t,i){var r=Object.prototype.toString;return(i===undefined&&(i=1),n===undefined&&(n=null),t===undefined&&(t=null),n===null&&t===null)?0:n===null&&t!==null?1:n!==null&&t===null?-1:r.call(n)==="[object Date]"&&r.call(t)==="[object Date]"?n<t?-i:n>t?i:0:(h||typeof n=="number"||typeof t=="number"||(n=String(n),t=String(t)),n<t)?-i:n>t?i:0},this._performSort=function(){s.length!==0&&(u=r._doSort(u,0))},this._doSort=function(n,t){var h=s[t].by,c=s[t].dir,l=s[t].type,a=s[t].datefmt,v=s[t].sfunc,f,e,i,u,o;if(t===s.length-1)return r._getOrder(n,h,c,l,a,v);for(t++,f=r._getGroup(n,h,c,l,a),e=[],i=0;i<f.length;i++)for(o=r._doSort(f[i].items,t),u=0;u<o.length;u++)e.push(o[u]);return e},this._getOrder=function(n,i,u,f,e,o){var a=[],c=[],y=u==="a"?1:-1,p,s,l,w,b;for(f===undefined&&(f="text"),w=f==="float"||f==="number"||f==="currency"||f==="numeric"?function(n){var t=parseFloat(String(n).replace(v,""));return isNaN(t)?Number.NEGATIVE_INFINITY:t}:f==="int"||f==="integer"?function(n){return n?parseFloat(String(n).replace(v,"")):Number.NEGATIVE_INFINITY}:f==="date"||f==="datetime"?function(n){return $.jgrid.parseDate.call(t,e,n).getTime()}:$.isFunction(f)?f:function(n){return n=n?$.trim(String(n)):"",h?n:n.toLowerCase()},$.each(n,function(n,t){s=i!==""?$.jgrid.getAccessor(t,i):t;s===undefined&&(s="");s=w(s,t);c.push({vSort:s,index:n})}),$.isFunction(o)?c.sort(function(n,t){return n=n.vSort,t=t.vSort,o.call(this,n,t,y)}):c.sort(function(n,t){return n=n.vSort,t=t.vSort,r._compare(n,t,y)}),l=0,b=n.length;l<b;)p=c[l].index,a.push(n[p]),l++;return a},this._getGroup=function(n,t,i,u,f){var s=[],e=null,h=null,o;return $.each(r._getOrder(n,t,i,u,f),function(n,i){o=$.jgrid.getAccessor(i,t);o==null&&(o="");r._equals(h,o)||(h=o,e!==null&&s.push(e),e=r._group(t,o));e.items.push(i)}),e!==null&&s.push(e),s},this.ignoreCase=function(){return h=!1,r},this.useCase=function(){return h=!0,r},this.trim=function(){return o=!0,r},this.noTrim=function(){return o=!1,r},this.execute=function(){var match=f,results=[];return match===null?r:($.each(u,function(){eval(match)&&results.push(this)}),u=results,r)},this.data=function(){return u},this.select=function(n){if(r._performSort(),!r._hasData())return[];if(r.execute(),$.isFunction(n)){var t=[];return $.each(u,function(i,r){t.push(n(r))}),t}return u},this.hasMatch=function(){return r._hasData()?(r.execute(),u.length>0):!1},this.andNot=function(n,t,i){return e=!e,r.and(n,t,i)},this.orNot=function(n,t,i){return e=!e,r.or(n,t,i)},this.not=function(n,t,i){return r.andNot(n,t,i)},this.and=function(n,t,i){return(a=" && ",n===undefined)?r:r._repeatCommand(n,t,i)},this.or=function(n,t,i){return(a=" || ",n===undefined)?r:r._repeatCommand(n,t,i)},this.orBegin=function(){return p++,r},this.orEnd=function(){return f!==null&&(f+=")"),r},this.isNot=function(n){return e=!e,r.is(n)},this.is=function(n){return r._append("this."+n),r._resetNegate(),r},this._compareValues=function(n,i,u,f,e){var s,o,h;if(s=l?"jQuery.jgrid.getAccessor(this,'"+i+"')":"this",u===undefined&&(u=null),o=u,h=e.stype===undefined?"text":e.stype,u!==null)switch(h){case"int":case"integer":o=isNaN(Number(o))||o===""?"0":o;s="parseInt("+s+",10)";o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(v,"");o=isNaN(Number(o))||o===""?"0":o;s="parseFloat("+s+")";o="parseFloat("+o+")";break;case"date":case"datetime":o=String($.jgrid.parseDate.call(t,e.srcfmt||"Y-m-d",o).getTime());s='jQuery.jgrid.parseDate.call(jQuery("#'+$.jgrid.jqID(t.p.id)+'")[0],"'+e.srcfmt+'",'+s+").getTime()";break;default:s=r._getStr(s);o=r._getStr('"'+r._toStr(o)+'"')}return r._append(s+" "+f+" "+o),r._setCommand(n,i),r._resetNegate(),r},this.equals=function(n,t,i){return r._compareValues(r.equals,n,t,"==",i)},this.notEquals=function(n,t,i){return r._compareValues(r.equals,n,t,"!==",i)},this.isNull=function(n,t,i){return r._compareValues(r.equals,n,null,"===",i)},this.greater=function(n,t,i){return r._compareValues(r.greater,n,t,">",i)},this.less=function(n,t,i){return r._compareValues(r.less,n,t,"<",i)},this.greaterOrEquals=function(n,t,i){return r._compareValues(r.greaterOrEquals,n,t,">=",i)},this.lessOrEquals=function(n,t,i){return r._compareValues(r.lessOrEquals,n,t,"<=",i)},this.startsWith=function(n,t){var u=t==null?n:t,i=o?$.trim(u.toString()).length:u.toString().length;return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr(0,"+i+") == "+r._getStr('"'+r._toStr(t)+'"')):(t!=null&&(i=o?$.trim(t.toString()).length:t.toString().length),r._append(r._getStr("this")+".substr(0,"+i+") == "+r._getStr('"'+r._toStr(n)+'"'))),r._setCommand(r.startsWith,n),r._resetNegate(),r},this.endsWith=function(n,t){var i=t==null?n:t,u=o?$.trim(i.toString()).length:i.toString().length;return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".substr("+r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+".length-"+u+","+u+') == "'+r._toStr(t)+'"'):r._append(r._getStr("this")+".substr("+r._getStr("this")+'.length-"'+r._toStr(n)+'".length,"'+r._toStr(n)+'".length) == "'+r._toStr(n)+'"'),r._setCommand(r.endsWith,n),r._resetNegate(),r},this.contains=function(n,t){return l?r._append(r._getStr("jQuery.jgrid.getAccessor(this,'"+n+"')")+'.indexOf("'+r._toStr(t)+'",0) > -1'):r._append(r._getStr("this")+'.indexOf("'+r._toStr(n)+'",0) > -1'),r._setCommand(r.contains,n),r._resetNegate(),r},this.groupBy=function(n,t,i,f){return r._hasData()?r._getGroup(u,n,t,i,f):null},this.orderBy=function(n,t,i,u,f){return t=t==null?"a":$.trim(t.toString().toLowerCase()),i==null&&(i="text"),u==null&&(u="Y-m-d"),f==null&&(f=!1),(t==="desc"||t==="descending")&&(t="d"),(t==="asc"||t==="ascending")&&(t="a"),s.push({by:n,dir:t,type:i,datefmt:u,sfunc:f}),r},r};return new i(n,null)},getMethod:function(n){return this.getAccessor($.fn.jqGrid,n)},extend:function(n){$.extend($.fn.jqGrid,n);this.no_legacy_api||$.fn.extend(n)},clearBeforeUnload:function(n){var i=$("#"+$.jgrid.jqID(n))[0],r,t,f,u;if(i.grid){for(r=i.grid,$.isFunction(r.emptyRows)&&r.emptyRows.call(i,!0,!0),$(document).unbind("mouseup.jqGrid"+i.p.id),$(r.hDiv).unbind("mousemove"),$(i).unbind(),f=r.headers.length,u=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","formatter","addXmlData","addJSONData","grid","p"],t=0;t<f;t++)r.headers[t].el=null;for(t in r)r.hasOwnProperty(t)&&(r[t]=null);for(t in i.p)i.p.hasOwnProperty(t)&&(i.p[t]=$.isArray(i.p[t])?[]:null);for(f=u.length,t=0;t<f;t++)i.hasOwnProperty(u[t])&&(i[u[t]]=null,delete i[u[t]])}},gridUnload:function(n){var t,u,r,i;n&&(n=$.trim(n),n.indexOf("#")===0&&(n=n.substring(1)),t=$("#"+$.jgrid.jqID(n))[0],t.grid)&&(u={id:$(t).attr("id"),cl:$(t).attr("class")},t.p.pager&&$(t.p.pager).unbind().empty().removeClass("ui-state-default ui-jqgrid-pager ui-corner-bottom"),r=document.createElement("table"),r.className=u.cl,i=$.jgrid.jqID(t.id),$(r).removeClass("ui-jqgrid-btable ui-common-table").insertBefore("#gbox_"+i),$(t.p.pager).parents("#gbox_"+i).length===1&&$(t.p.pager).insertBefore("#gbox_"+i),$.jgrid.clearBeforeUnload(n),$("#gbox_"+i).remove(),$(r).attr({id:u.id}),$("#alertmod_"+$.jgrid.jqID(n)).remove())},gridDestroy:function(n){if(n){n=$.trim(n);n.indexOf("#")===0&&(n=n.substring(1));var t=$("#"+$.jgrid.jqID(n))[0];if(t.grid){t.p.pager&&$(t.p.pager).remove();try{$.jgrid.clearBeforeUnload(n);$("#gbox_"+$.jgrid.jqID(n)).remove()}catch(i){}}}},styleUI:{jQueryUI:{common:{disabled:"ui-state-disabled",highlight:"ui-state-highlight",hover:"ui-state-hover",cornerall:"ui-corner-all",cornertop:"ui-corner-top",cornerbottom:"ui-corner-bottom",hidden:"ui-helper-hidden",icon_base:"ui-icon",overlay:"ui-widget-overlay",active:"ui-state-active",error:"ui-state-error",button:"ui-state-default ui-corner-all",content:"ui-widget-content"},base:{entrieBox:"ui-widget ui-widget-content ui-corner-all",viewBox:"",headerTable:"",headerBox:"ui-state-default",rowTable:"",rowBox:"ui-widget-content",footerTable:"",footerBox:"ui-widget-content",headerDiv:"ui-state-default",gridtitleBox:"ui-widget-header ui-corner-top ui-helper-clearfix",customtoolbarBox:"ui-state-default",loadingBox:"ui-state-default ui-state-active",rownumBox:"ui-state-default",scrollBox:"ui-widget-content",multiBox:"cbox",pagerBox:"ui-state-default ui-corner-bottom",pagerTable:"",toppagerBox:"ui-state-default",pgInput:"ui-corner-all",pgSelectBox:"ui-widget-content ui-corner-all",pgButtonBox:"ui-corner-all",icon_first:"ui-icon-seek-first",icon_prev:"ui-icon-seek-prev",icon_next:"ui-icon-seek-next",icon_end:"ui-icon-seek-end",icon_asc:"ui-icon-triangle-1-n",icon_desc:"ui-icon-triangle-1-s",icon_caption_open:"ui-icon-circle-triangle-n",icon_caption_close:"ui-icon-circle-triangle-s"},modal:{modal:"ui-widget ui-widget-content ui-corner-all",header:"ui-widget-header ui-corner-all ui-helper-clearfix",content:"ui-widget-content",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"ui-icon-closethick",icon_resizable:"ui-icon-gripsmall-diagonal-se"},celledit:{inputClass:"ui-widget-content ui-corner-all"},inlinedit:{inputClass:"ui-widget-content ui-corner-all",icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_save_nav:"ui-icon-disk",icon_cancel_nav:"ui-icon-cancel"},formedit:{inputClass:"ui-widget-content ui-corner-all",icon_prev:"ui-icon-triangle-1-w",icon_next:"ui-icon-triangle-1-e",icon_save:"ui-icon-disk",icon_close:"ui-icon-close",icon_del:"ui-icon-scissors",icon_cancel:"ui-icon-cancel"},navigator:{icon_edit_nav:"ui-icon-pencil",icon_add_nav:"ui-icon-plus",icon_del_nav:"ui-icon-trash",icon_search_nav:"ui-icon-search",icon_refresh_nav:"ui-icon-refresh",icon_view_nav:"ui-icon-document",icon_newbutton_nav:"ui-icon-newwin"},grouping:{icon_plus:"ui-icon-circlesmall-plus",icon_minus:"ui-icon-circlesmall-minus"},filter:{table_widget:"ui-widget ui-widget-content",srSelect:"ui-widget-content ui-corner-all",srInput:"ui-widget-content ui-corner-all",menu_widget:"ui-widget ui-widget-content ui-corner-all",icon_search:"ui-icon-search",icon_reset:"ui-icon-arrowreturnthick-1-w",icon_query:"ui-icon-comment"},subgrid:{icon_plus:"ui-icon-plus",icon_minus:"ui-icon-minus",icon_open:"ui-icon-carat-1-sw"},treegrid:{icon_plus:"ui-icon-triangle-1-",icon_minus:"ui-icon-triangle-1-s",icon_leaf:"ui-icon-radio-off"},fmatter:{icon_edit:"ui-icon-pencil",icon_add:"ui-icon-plus",icon_save:"ui-icon-disk",icon_cancel:"ui-icon-cancel",icon_del:"ui-icon-trash"}},Bootstrap:{common:{disabled:"ui-disabled",highlight:"success",hover:"active",cornerall:"",cornertop:"",cornerbottom:"",hidden:"",icon_base:"glyphicon",overlay:"ui-overlay",active:"active",error:"bg-danger",button:"btn btn-default",content:""},base:{entrieBox:"",viewBox:"table-responsive",headerTable:"table table-bordered",headerBox:"",rowTable:"table table-bordered",rowBox:"",footerTable:"table table-bordered",footerBox:"",headerDiv:"",gridtitleBox:"",customtoolbarBox:"",loadingBox:"row",rownumBox:"active",scrollBox:"",multiBox:"checkbox",pagerBox:"",pagerTable:"table",toppagerBox:"",pgInput:"form-control",pgSelectBox:"form-control",pgButtonBox:"",icon_first:"glyphicon-step-backward",icon_prev:"glyphicon-backward",icon_next:"glyphicon-forward",icon_end:"glyphicon-step-forward",icon_asc:"glyphicon-triangle-top",icon_desc:"glyphicon-triangle-bottom",icon_caption_open:"glyphicon-circle-arrow-up",icon_caption_close:"glyphicon-circle-arrow-down"},modal:{modal:"modal-content",header:"modal-header",title:"modal-title",content:"modal-body",resizable:"ui-resizable-handle ui-resizable-se",icon_close:"glyphicon-remove-circle",icon_resizable:"glyphicon-import"},celledit:{inputClass:"form-control"},inlinedit:{inputClass:"form-control",icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_save_nav:"glyphicon-save",icon_cancel_nav:"glyphicon-remove-circle"},formedit:{inputClass:"form-control",icon_prev:"glyphicon-step-backward",icon_next:"glyphicon-step-forward",icon_save:"glyphicon-save",icon_close:"glyphicon-remove-circle",icon_del:"glyphicon-trash",icon_cancel:"glyphicon-remove-circle"},navigator:{icon_edit_nav:"glyphicon-edit",icon_add_nav:"glyphicon-plus",icon_del_nav:"glyphicon-trash",icon_search_nav:"glyphicon-search",icon_refresh_nav:"glyphicon-refresh",icon_view_nav:"glyphicon-info-sign",icon_newbutton_nav:"glyphicon-new-window"},grouping:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom"},filter:{table_widget:"table table-condensed",srSelect:"form-control",srInput:"form-control",menu_widget:"",icon_search:"glyphicon-search",icon_reset:"glyphicon-refresh",icon_query:"glyphicon-comment"},subgrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_open:"glyphicon-indent-left"},treegrid:{icon_plus:"glyphicon-triangle-right",icon_minus:"glyphicon-triangle-bottom",icon_leaf:"glyphicon-unchecked"},fmatter:{icon_edit:"glyphicon-edit",icon_add:"glyphicon-plus",icon_save:"glyphicon-save",icon_cancel:"glyphicon-remove-circle",icon_del:"glyphicon-trash"}}}});$.fn.jqGrid=function(n){var t,i;if(typeof n=="string"){if(t=$.jgrid.getMethod(n),!t)throw"jqGrid - No such method: "+n;return i=$.makeArray(arguments).slice(1),t.apply(this,i)}return this.each(function(){var wt,r,t,i,u,ri,ui,l,rt,sr,vt,et,vi,yt,yi,pt,c,w,pi,ni,wi,ti,ii,cr,lr,ar;if(!this.grid){if(n!=null&&n.data!==undefined&&(wt=n.data,n.data=[]),r=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:30,gridview:!0,rownumWidth:35,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"",minusicon:"",displayField:[],groupSummaryPos:[],formatDisplayField:[],_locgr:!1},ignoreCase:!0,cmTemplate:{},idPrefix:"",multiSort:!1,minColWidth:33,scrollPopUp:!1,scrollTopOffset:0,scrollLeftOffset:"100%",storeNavOptions:!1,regional:"en",styleUI:"jQueryUI",responsive:!1,restoreCellonFail:!0},$.jgrid.defaults,n),wt!==undefined&&(r.data=wt,n.data=wt),t=this,i={headers:[],cols:[],footers:[],dragStart:function(n,i,u){var f=$(this.bDiv).offset().left;this.resizing={idx:n,startX:i.pageX,sOL:i.pageX-f};this.hDiv.style.cursor="col-resize";this.curGbox=$("#rs_m"+$.jgrid.jqID(r.id),"#gbox_"+$.jgrid.jqID(r.id));this.curGbox.css({display:"block",left:i.pageX-f,top:u[1],height:u[2]});$(t).triggerHandler("jqGridResizeStart",[i,n]);$.isFunction(r.resizeStart)&&r.resizeStart.call(t,i,n);document.onselectstart=function(){return!1}},dragMove:function(n){if(this.resizing){var t=n.pageX-this.resizing.startX,i=this.headers[this.resizing.idx],f=r.direction==="ltr"?i.width+t:i.width-t,u,e;f>33&&(this.curGbox.css({left:this.resizing.sOL+t}),r.forceFit===!0?(u=this.headers[this.resizing.idx+r.nv],e=r.direction==="ltr"?u.width-t:u.width+t,e>r.minColWidth&&(i.newWidth=f,u.newWidth=e)):(this.newWidth=r.direction==="ltr"?r.tblwidth+t:r.tblwidth-t,i.newWidth=f))}},dragEnd:function(n){if(this.hDiv.style.cursor="default",this.resizing){var i=this.resizing.idx,u=this.headers[i].newWidth||this.headers[i].width;u=parseInt(u,10);this.resizing=!1;$("#rs_m"+$.jgrid.jqID(r.id)).css("display","none");r.colModel[i].width=u;this.headers[i].width=u;this.headers[i].el.style.width=u+"px";this.cols[i].style.width=u+"px";this.footers.length>0&&(this.footers[i].style.width=u+"px");r.forceFit===!0?(u=this.headers[i+r.nv].newWidth||this.headers[i+r.nv].width,this.headers[i+r.nv].width=u,this.headers[i+r.nv].el.style.width=u+"px",this.cols[i+r.nv].style.width=u+"px",this.footers.length>0&&(this.footers[i+r.nv].style.width=u+"px"),r.colModel[i+r.nv].width=u):(r.tblwidth=this.newWidth||r.tblwidth,$("table:first",this.bDiv).css("width",r.tblwidth+"px"),$("table:first",this.hDiv).css("width",r.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,r.footerrow&&($("table:first",this.sDiv).css("width",r.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft));n&&($(t).triggerHandler("jqGridResizeStop",[u,i]),$.isFunction(r.resizeStop)&&r.resizeStop.call(t,u,i))}this.curGbox=null;document.onselectstart=function(){return!0}},populateVisible:function(){var s,n,a,e;if(i.timer&&clearTimeout(i.timer),i.timer=null,s=$(i.bDiv).height(),s){if(n=$("table:first",i.bDiv),n[0].rows.length)try{a=n[0].rows[1];e=a?$(a).outerHeight()||i.prevRowHeight:i.prevRowHeight}catch(p){e=i.prevRowHeight}if(e){i.prevRowHeight=e;var y=r.rowNum,o=i.scrollTop=i.bDiv.scrollTop,h=Math.round(n.position().top)-o,c=h+n.height(),u=e*y,f,l,v;if(c<s&&h<=0&&(r.lastpage===undefined||(parseInt((c+o+u-1)/u,10)||0)<=r.lastpage)&&(l=parseInt((s-c+u-1)/u,10)||1,c>=0||l<2||r.scroll===!0?(f=(Math.round((c+o)/u)||0)+1,h=-1):h=1),h>0&&(f=(parseInt(o/u,10)||0)+1,l=(parseInt((o+s)/u,10)||0)+2-f,v=!0),l){if(r.lastpage&&(f>r.lastpage||r.lastpage===1||f===r.page&&f===r.lastpage))return;i.hDiv.loading?i.timer=setTimeout(i.populateVisible,r.scrollTimeout):(r.page=f,v&&(i.selectionPreserver(n[0]),i.emptyRows.call(n[0],!1,!1)),i.populate(l));r.scrollPopUp&&r.lastpage!=null&&($("#scroll_g"+r.id).show().html($.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",r.pgtext),r.page,r.lastpage)).css({top:r.scrollTopOffset+o*((parseInt(r.height,10)-45)/(parseInt(e,10)*parseInt(r.records,10)))+"px",left:r.scrollLeftOffset}),$(this).mouseout(function(){$("#scroll_g"+r.id).hide()}))}}}},scrollGrid:function(n){if(r.scroll){var t=i.bDiv.scrollTop;i.scrollTop===undefined&&(i.scrollTop=0);t!==i.scrollTop&&(i.scrollTop=t,i.timer&&clearTimeout(i.timer),i.timer=setTimeout(i.populateVisible,r.scrollTimeout))}i.hDiv.scrollLeft=i.bDiv.scrollLeft;r.footerrow&&(i.sDiv.scrollLeft=i.bDiv.scrollLeft);r.frozenColumns&&$(i.fbDiv).scrollTop(i.bDiv.scrollTop);n&&n.stopPropagation()},selectionPreserver:function(n){var t=n.p,r=t.selrow,i=t.selarrrow?$.makeArray(t.selarrrow):null,f=n.grid.bDiv.scrollLeft,u=function(){var e;if(t.selrow=null,t.selarrrow=[],t.multiselect&&i&&i.length>0)for(e=0;e<i.length;e++)i[e]!==r&&$(n).jqGrid("setSelection",i[e],!1,null);r&&$(n).jqGrid("setSelection",r,!1,null);n.grid.bDiv.scrollLeft=f;$(n).unbind(".selectionPreserver",u)};$(n).bind("jqGridGridComplete.selectionPreserver",u)}},this.tagName.toUpperCase()!=="TABLE"||this.id==null){alert("Element is not a table or has no id!");return}if(document.documentMode!==undefined&&document.documentMode<=5){alert("Grid can not be used in this ('quirks') mode!");return}u=0;for(ui in $.jgrid.regional)$.jgrid.regional.hasOwnProperty(ui)&&(u===0&&(ri=ui),u++);if(u===1&&ri!==r.regional&&(r.regional=ri),$(this).empty().attr("tabindex","0"),this.p=r,this.p.useProp=!!$.fn.prop,this.p.colNames.length===0)for(u=0;u<this.p.colModel.length;u++)this.p.colNames[u]=this.p.colModel[u].label||this.p.colModel[u].name;if(this.p.colNames.length!==this.p.colModel.length){alert($.jgrid.getRegional(this,"errors.model"));return}var f=$.jgrid.getMethod("getStyleUI"),e=t.p.styleUI+".common",o=f(e,"disabled",!0),tt=f(e,"highlight",!0),v=f(e,"hover",!0),vr=f(e,"cornerall",!0),k=f(e,"icon_base",!0),bi=$.jgrid.msie,d,y=[],g=[],it=[];e=t.p.styleUI+".base";d=$("<div "+f(e,"viewBox",!1,"ui-jqgrid-view")+" role='grid'><\/div>");t.p.direction=$.trim(t.p.direction.toLowerCase());t.p._ald=!1;$.inArray(t.p.direction,["ltr","rtl"])===-1&&(t.p.direction="ltr");l=t.p.direction;$(d).insertBefore(this);$(this).appendTo(d);rt=$("<div "+f(e,"entrieBox",!1,"ui-jqgrid")+"><\/div>");$(rt).attr({id:"gbox_"+this.id,dir:l}).insertBefore(d);$(d).attr("id","gview_"+this.id).appendTo(rt);$("<div "+f(t.p.styleUI+".common","overlay",!1,"jqgrid-overlay")+" id='lui_"+this.id+"'><\/div>").insertBefore(d);$("<div "+f(e,"loadingBox",!1,"loading")+" id='load_"+this.id+"'>"+$.jgrid.getRegional(t,"defaults.loadtext",this.p.loadtext)+"<\/div>").insertBefore(d);$(this).attr({role:"presentation","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var a=function(n,t){return(n=parseInt(n,10),isNaN(n))?t||0:n},st=function(n,r,u,f,e,o){var s=t.p.colModel[n],v,y=s.align,c='style="',a=s.classes,p=s.name,l,h=[];return y&&(c+="text-align:"+y+";"),s.hidden===!0&&(c+="display:none;"),r===0?c+="width: "+i.headers[n].width+"px;":($.isFunction(s.cellattr)||typeof s.cellattr=="string"&&$.jgrid.cellattr!=null&&$.isFunction($.jgrid.cellattr[s.cellattr]))&&(v=$.isFunction(s.cellattr)?s.cellattr:$.jgrid.cellattr[s.cellattr],l=v.call(t,e,u,f,s,o),l&&typeof l=="string"&&(l=l.replace(/style/i,"style").replace(/title/i,"title"),l.indexOf("title")>-1&&(s.title=!1),l.indexOf("class")>-1&&(a=undefined),h=l.replace(/\-style/g,"-sti").split(/style/),h.length===2?(h[1]=$.trim(h[1].replace(/\-sti/g,"-style").replace("=","")),(h[1].indexOf("'")===0||h[1].indexOf('"')===0)&&(h[1]=h[1].substring(1)),c+=h[1].replace(/'/gi,'"')):c+='"')),h.length||(h[0]="",c+='"'),c+=(a!==undefined?' class="'+a+'"':"")+(s.title&&u?' title="'+$.jgrid.stripHtml(u)+'"':""),c+=' aria-describedby="'+t.p.id+"_"+p+'"',c+h[0]},ki=function(n){return n==null||n===""?"&#160;":t.p.autoencode?$.jgrid.htmlEncode(n):String(n)},di=function(n,i,r,u,f){var e=t.p.colModel[r],o,s;return e.formatter!==undefined?(n=String(t.p.idPrefix)!==""?$.jgrid.stripPref(t.p.idPrefix,n):n,s={rowId:n,colModel:e,gid:t.p.id,pos:r,styleUI:t.p.styleUI},o=$.isFunction(e.formatter)?e.formatter.call(t,i,s,u,f):$.fmatter?$.fn.fmatter.call(t,e.formatter,i,s,u,f):ki(i)):o=ki(i),o},fi=function(n,t,i,r,u,f){var e,o;return e=di(n,t,i,u,"add"),o=st(i,r,e,u,n,f),'<td role="gridcell" '+o+">"+e+"<\/td>"},gi=function(n,i,r,u,f){var e='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+n+'" '+f+' name="jqg_'+t.p.id+"_"+n+'"'+(u?'checked="checked"':"")+"/>",o=st(i,r,"",null,n,!0);return'<td role="gridcell" '+o+">"+e+"<\/td>"},nr=function(n,t,i,r,u){var f=(parseInt(i,10)-1)*parseInt(r,10)+1+t,e=st(n,t,f,null,t,!0);return'<td role="gridcell" '+u+" "+e+">"+f+"<\/td>"},ei=function(n){for(var i,u=[],f=0,r=0;r<t.p.colModel.length;r++)i=t.p.colModel[r],i.name!=="cb"&&i.name!=="subgrid"&&i.name!=="rn"&&(u[f]=n==="local"?i.name:n==="xml"||n==="xmlstring"?i.xmlmap||i.name:i.jsonmap||i.name,t.p.keyName!==!1&&i.key===!0&&(t.p.keyName=u[f]),f++);return u},bt=function(n){var i=t.p.remapColumns;return i&&i.length||(i=$.map(t.p.colModel,function(n,t){return t})),n&&(i=$.map(i,function(t){return t<n?null:t-n})),i},ht=function(n,t){var i;this.p.deepempty?$(this.rows).slice(1).remove():(i=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(i));n&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:"0px",display:"none"}),this.grid.bDiv.scrollTop!==0&&(this.grid.bDiv.scrollTop=0));t===!0&&this.p.treeGrid&&!this.p.loadonce&&(this.p.data=[],this.p._index={})},tr=function(){var n=t.p,h=n.data,k=h.length,f,o,i,u,r,s,p,c,e=n.localReader,v=n.colModel,l=e.cell,a=(n.multiselect===!0?1:0)+(n.subGrid===!0?1:0)+(n.rownumbers===!0?1:0),d=n.scroll?$.jgrid.randId():1,w,b,y;if(n.datatype==="local"&&e.repeatitems===!0)for(w=bt(a),b=ei("local"),u=n.keyIndex===!1?$.isFunction(e.id)?e.id.call(t,h):e.id:n.keyIndex,f=0;f<k;f++){for(i=h[f],r=$.jgrid.getAccessor(i,u),r===undefined&&(typeof u=="number"&&v[u+a]!=null&&(r=$.jgrid.getAccessor(i,v[u+a].name)),r===undefined&&(r=d+f,l&&(s=$.jgrid.getAccessor(i,l)||i,r=s!=null&&s[u]!==undefined?s[u]:r,s=null))),c={},c[e.id]=r,l&&(i=$.jgrid.getAccessor(i,l)||i),y=$.isArray(i)?w:b,o=0;o<y.length;o++)p=$.jgrid.getAccessor(i,y[o]),c[v[o+a].name]=p;$.extend(!0,h[f],c)}},oi=function(){var u=t.p.data.length,r,n,i;for(r=t.p.keyName===!1||t.p.loadonce===!0?t.p.localReader.id:t.p.keyName,t.p._index=[],n=0;n<u;n++)i=$.jgrid.getAccessor(t.p.data[n],r),i===undefined&&(i=String(n+1)),t.p._index[i]=n},si=function(n,i,r,u,f){var h="-1",c="",o,s=i?"display:none;":"",e=$(t).triggerHandler("jqGridRowAttr",[u,f,n]);if(typeof e!="object"&&(e=$.isFunction(t.p.rowattr)?t.p.rowattr.call(t,u,f,n):typeof t.p.rowattr=="string"&&$.jgrid.rowattr!=null&&$.isFunction($.jgrid.rowattr[t.p.rowattr])?$.jgrid.rowattr[t.p.rowattr].call(t,u,f,n):{}),!$.isEmptyObject(e)){e.hasOwnProperty("id")&&(n=e.id,delete e.id);e.hasOwnProperty("tabindex")&&(h=e.tabindex,delete e.tabindex);e.hasOwnProperty("style")&&(s+=e.style,delete e.style);e.hasOwnProperty("class")&&(r+=" "+e["class"],delete e["class"]);try{delete e.role}catch(l){}for(o in e)e.hasOwnProperty(o)&&(c+=" "+o+"="+e[o])}return'<tr role="row" id="'+n+'" tabindex="'+h+'" class="'+r+'"'+(s===""?"":' style="'+s+'"')+c+">"},hi=function(n,i,r,u){var ii=new Date,ut=t.p.datatype!=="local"&&t.p.loadonce||t.p.datatype==="xmlstring",ft="_id_",s=t.p.xmlReader,ri=t.p.datatype==="local"?"local":"xml",nt,gt,ni,ti;if(ut&&(t.p.data=[],t.p._index={},t.p.localReader.id=ft),t.p.reccount=0,$.isXMLDoc(n))t.p.treeANode!==-1||t.p.scroll?i=i>1?i:1:(ht.call(t,!1,!0),i=1);else return;var g=$(t),p,et,b=0,k,y=t.p.multiselect===!0?1:0,d=0,vt,l=t.p.rownumbers===!0?1:0,ot,lt,it=[],rt,o={},v,c,h=[],ui=t.p.altRows===!0?t.p.altclass:"",oi=f(e,"rowBox",!0,"jqgrow ui-row-"+t.p.direction),yt;t.p.subGrid===!0&&(d=1,vt=$.jgrid.getMethod("addSubGridCell"));s.repeatitems||(it=ei(ri));ot=t.p.keyName===!1?$.isFunction(s.id)?s.id.call(t,n):s.id:t.p.keyName;lt=String(ot).indexOf("[")===-1?it.length?function(n,t){return $(ot,n).text()||t}:function(n,t){return $(s.cell,n).eq(ot).text()||t}:function(n,t){return n.getAttribute(ot.replace(/[\[\]]/g,""))||t};t.p.userData={};t.p.page=a($.jgrid.getXmlData(n,s.page),t.p.page);t.p.lastpage=a($.jgrid.getXmlData(n,s.total),1);t.p.records=a($.jgrid.getXmlData(n,s.records));$.isFunction(s.userdata)?t.p.userData=s.userdata.call(t,n)||{}:$.jgrid.getXmlData(n,s.userdata,!0).each(function(){t.p.userData[this.getAttribute("name")]=$(this).text()});nt=$.jgrid.getXmlData(n,s.root,!0);nt=$.jgrid.getXmlData(nt,s.row,!0);nt||(nt=[]);var tt=nt.length,w=0,st=[],ct=parseInt(t.p.rowNum,10),pt=t.p.scroll?$.jgrid.randId():1,wt,kt=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first");if(tt>0&&t.p.page<=0&&(t.p.page=1),nt&&tt){u&&(ct*=u+1);var hi=$.isFunction(t.p.afterInsertRow),dt=!1,at,ci=l?f(e,"rownumBox",!1,"jqgrid-rownum"):"",li=y?f(e,"multiBox",!1,"cbox"):"";for(t.p.grouping&&(dt=t.p.groupingView.groupCollapse===!0,at=$.jgrid.getMethod("groupingPrepare"));w<tt;){if(v=nt[w],c=lt(v,pt+w),c=t.p.idPrefix+c,wt=i===0?0:i+1,yt=oi+((wt+w)%2==1?" "+ui:""),gt=h.length,h.push(""),l&&h.push(nr(0,w,t.p.page,t.p.rowNum,ci)),y&&h.push(gi(c,l,w,!1,li)),d&&h.push(vt.call(g,y+l,w+i)),s.repeatitems)rt||(rt=bt(y+d+l)),ni=$.jgrid.getXmlData(v,s.cell,!0),$.each(rt,function(n){var r=ni[this];if(!r)return!1;k=r.textContent||r.text;o[t.p.colModel[n+y+d+l].name]=k;h.push(fi(c,k,n+y+d+l,w+i,v,o))});else for(p=0;p<it.length;p++)k=$.jgrid.getXmlData(v,it[p]),o[t.p.colModel[p+y+d+l].name]=k,h.push(fi(c,k,p+y+d+l,w+i,v,o));if(h[gt]=si(c,dt,yt,o,v),h.push("<\/tr>"),t.p.grouping&&(st.push(h),t.p.groupingView._locgr||at.call(g,o,w),h=[]),(ut||t.p.treeGrid===!0&&!t.p._ald)&&(o[ft]=$.jgrid.stripPref(t.p.idPrefix,c),t.p.data.push(o),t.p._index[o[ft]]=t.p.data.length-1),t.p.gridview===!1&&(kt.append(h.join("")),g.triggerHandler("jqGridAfterInsertRow",[c,o,v]),hi&&t.p.afterInsertRow.call(t,c,o,v),h=[]),o={},b++,w++,b===ct)break}}if(t.p.gridview===!0&&(et=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?ut||(g.jqGrid("groupingRender",st,t.p.colModel.length,t.p.page,ct),st=null):t.p.treeGrid===!0&&et>0?$(t.rows[et]).after(h.join("")):(kt.append(h.join("")),t.grid.cols=t.rows[0].cells)),t.p.subGrid===!0)try{g.jqGrid("addSubGrid",y+l)}catch(ai){}if(t.p.totaltime=new Date-ii,b>0&&t.p.records===0&&(t.p.records=tt),h=null,t.p.treeGrid===!0)try{g.jqGrid("setTreeNode",et+1,b+et+1)}catch(vi){}if(t.p.reccount=b,t.p.treeANode=-1,t.p.userDataOnFooter&&g.jqGrid("footerData","set",t.p.userData,!0),ut&&(t.p.records=tt,t.p.lastpage=Math.ceil(tt/ct)),r||t.updatepager(!1,!0),ut){while(b<tt){if(v=nt[b],c=lt(v,b+pt),c=t.p.idPrefix+c,s.repeatitems)rt||(rt=bt(y+d+l)),ti=$.jgrid.getXmlData(v,s.cell,!0),$.each(rt,function(n){var i=ti[this];if(!i)return!1;k=i.textContent||i.text;o[t.p.colModel[n+y+d+l].name]=k});else for(p=0;p<it.length;p++)k=$.jgrid.getXmlData(v,it[p]),o[t.p.colModel[p+y+d+l].name]=k;o[ft]=$.jgrid.stripPref(t.p.idPrefix,c);t.p.grouping&&at.call(g,o,b);t.p.data.push(o);t.p._index[o[ft]]=t.p.data.length-1;o={};b++}t.p.grouping&&(t.p.groupingView._locgr=!0,g.jqGrid("groupingRender",st,t.p.colModel.length,t.p.page,ct),st=null)}},kt=function(n,i,r,u){var ci=new Date,h,ut,at,ft,ct,hi,lt;if(n)t.p.treeANode!==-1||t.p.scroll?i=i>1?i:1:(ht.call(t,!1,!0),i=1);else return;ut="_id_";ft=t.p.datatype!=="local"&&t.p.loadonce||t.p.datatype==="jsonstring";ft&&(t.p.data=[],t.p._index={},t.p.localReader.id=ut);t.p.reccount=0;t.p.datatype==="local"?(h=t.p.localReader,at="local"):(h=t.p.jsonReader,at="json");var g=$(t),w=0,vt,b,k,kt=[],s,p=t.p.multiselect?1:0,d=t.p.subGrid===!0?1:0,dt,v=t.p.rownumbers===!0?1:0,gt=bt(p+d+v),ni=ei(at),it,rt,nt,y,c={},et,o,l=[],li=t.p.altRows===!0?t.p.altclass:"",ai=f(e,"rowBox",!0,"jqgrow ui-row-"+t.p.direction),yt;t.p.page=a($.jgrid.getAccessor(n,h.page),t.p.page);t.p.lastpage=a($.jgrid.getAccessor(n,h.total),1);t.p.records=a($.jgrid.getAccessor(n,h.records));t.p.userData=$.jgrid.getAccessor(n,h.userdata)||{};d&&(dt=$.jgrid.getMethod("addSubGridCell"));y=t.p.keyName===!1?$.isFunction(h.id)?h.id.call(t,n):h.id:t.p.keyName;nt=$.jgrid.getAccessor(n,h.root);nt==null&&$.isArray(n)&&(nt=n);nt||(nt=[]);rt=nt.length;b=0;rt>0&&t.p.page<=0&&(t.p.page=1);var ot=parseInt(t.p.rowNum,10),ti=t.p.scroll?$.jgrid.randId():1,ii,ri=!1,pt;u&&(ot*=u+1);t.p.datatype!=="local"||t.p.deselectAfterSort||(ri=!0);var vi=$.isFunction(t.p.afterInsertRow),st=[],ui=!1,wt,oi=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first"),yi=v?f(e,"rownumBox",!1,"jqgrid-rownum"):"",pi=p?f(e,"multiBox",!1,"cbox"):"";for(t.p.grouping&&(ui=t.p.groupingView.groupCollapse===!0,wt=$.jgrid.getMethod("groupingPrepare"));b<rt;){for(s=nt[b],o=$.jgrid.getAccessor(s,y),o===undefined&&(typeof y=="number"&&t.p.colModel[y+p+d+v]!=null&&(o=$.jgrid.getAccessor(s,t.p.colModel[y+p+d+v].name)),o===undefined&&(o=ti+b,kt.length===0&&h.cell&&(ct=$.jgrid.getAccessor(s,h.cell)||s,o=ct!=null&&ct[y]!==undefined?ct[y]:o,ct=null))),o=t.p.idPrefix+o,ii=i===1?0:i,yt=ai+((ii+b)%2==1?" "+li:""),ri&&(pt=t.p.multiselect?$.inArray(o,t.p.selarrrow)!==-1:o===t.p.selrow),hi=l.length,l.push(""),v&&l.push(nr(0,b,t.p.page,t.p.rowNum,yi)),p&&l.push(gi(o,v,b,pt,pi)),d&&l.push(dt.call(g,p+v,b+i)),it=ni,h.repeatitems&&(h.cell&&(s=$.jgrid.getAccessor(s,h.cell)||s),$.isArray(s)&&(it=gt)),k=0;k<it.length;k++)vt=$.jgrid.getAccessor(s,it[k]),c[t.p.colModel[k+p+d+v].name]=vt,l.push(fi(o,vt,k+p+d+v,b+i,s,c));if(yt+=pt?" "+tt:"",l[hi]=si(o,ui,yt,c,s),l.push("<\/tr>"),t.p.grouping&&(st.push(l),t.p.groupingView._locgr||wt.call(g,c,b),l=[]),(ft||t.p.treeGrid===!0&&!t.p._ald)&&(c[ut]=$.jgrid.stripPref(t.p.idPrefix,o),t.p.data.push(c),t.p._index[c[ut]]=t.p.data.length-1),t.p.gridview===!1&&(oi.append(l.join("")),g.triggerHandler("jqGridAfterInsertRow",[o,c,s]),vi&&t.p.afterInsertRow.call(t,o,c,s),l=[]),c={},w++,b++,w===ot)break}if(t.p.gridview===!0&&(et=t.p.treeANode>-1?t.p.treeANode:0,t.p.grouping?ft||(g.jqGrid("groupingRender",st,t.p.colModel.length,t.p.page,ot),st=null):t.p.treeGrid===!0&&et>0?$(t.rows[et]).after(l.join("")):(oi.append(l.join("")),t.grid.cols=t.rows[0].cells)),t.p.subGrid===!0)try{g.jqGrid("addSubGrid",p+v)}catch(wi){}if(t.p.totaltime=new Date-ci,w>0&&t.p.records===0&&(t.p.records=rt),l=null,t.p.treeGrid===!0)try{g.jqGrid("setTreeNode",et+1,w+et+1)}catch(bi){}if(t.p.reccount=w,t.p.treeANode=-1,t.p.userDataOnFooter&&g.jqGrid("footerData","set",t.p.userData,!0),ft&&(t.p.records=rt,t.p.lastpage=Math.ceil(rt/ot)),r||t.updatepager(!1,!0),ft){while(w<rt&&nt[w]){if(s=nt[w],o=$.jgrid.getAccessor(s,y),o===undefined&&(typeof y=="number"&&t.p.colModel[y+p+d+v]!=null&&(o=$.jgrid.getAccessor(s,t.p.colModel[y+p+d+v].name)),o===undefined&&(o=ti+w,kt.length===0&&h.cell&&(lt=$.jgrid.getAccessor(s,h.cell)||s,o=lt!=null&&lt[y]!==undefined?lt[y]:o,lt=null))),s){for(o=t.p.idPrefix+o,it=ni,h.repeatitems&&(h.cell&&(s=$.jgrid.getAccessor(s,h.cell)||s),$.isArray(s)&&(it=gt)),k=0;k<it.length;k++)c[t.p.colModel[k+p+d+v].name]=$.jgrid.getAccessor(s,it[k]);c[ut]=$.jgrid.stripPref(t.p.idPrefix,o);t.p.grouping&&wt.call(g,c,w);t.p.data.push(c);t.p._index[c[ut]]=t.p.data.length-1;c={}}w++}t.p.grouping&&(t.p.groupingView._locgr=!0,g.jqGrid("groupingRender",st,t.p.colModel.length,t.p.page,ot),st=null)}},yr=function(){function et(r){var o=0,f,s,c,h,u,e;if(r.groups!=null){for(s=r.groups.length&&r.groupOp.toString().toUpperCase()==="OR",s&&n.orBegin(),f=0;f<r.groups.length;f++){o>0&&s&&n.or();try{et(r.groups[f])}catch(l){alert(l)}o++}s&&n.orEnd()}if(r.rules!=null)try{for(c=r.rules.length&&r.groupOp.toString().toUpperCase()==="OR",c&&n.orBegin(),f=0;f<r.rules.length;f++)u=r.rules[f],h=r.groupOp.toString().toUpperCase(),k[u.op]&&u.field&&(o>0&&h&&h==="OR"&&(n=n.or()),e=i[u.field],e.stype==="date"&&e.srcfmt&&e.newfmt&&e.srcfmt!==e.newfmt&&(u.data=$.jgrid.parseDate.call(t,e.newfmt,u.data,e.srcfmt)),n=k[u.op](n,h)(u.field,u.data,i[u.field])),o++;c&&n.orEnd()}catch(a){alert(a)}}var r=t.p.multiSort?[]:"",ut=[],nt=!1,i={},tt=[],ft=[],v,a,p,f,w,b,u,o,k,n,h,l,ot,s,st;if($.isArray(t.p.data)){if(w=t.p.grouping?t.p.groupingView:!1,$.each(t.p.colModel,function(){if(a=this.sorttype||"text",o=this.index||this.name,a==="date"||a==="datetime"?(this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?(v=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.getRegional(t,"formatter.date.srcformat"),p=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.getRegional(t,"formatter.date.newformat")):v=p=this.datefmt||"Y-m-d",i[o]={stype:a,srcfmt:v,newfmt:p,sfunc:this.sortfunc||null}):i[o]={stype:a,srcfmt:"",newfmt:"",sfunc:this.sortfunc||null},t.p.grouping)for(u=0,b=w.groupField.length;u<b;u++)this.name===w.groupField[u]&&(tt[u]=i[o],ft[u]=o);t.p.multiSort||nt||o!==t.p.sortname||(r=o,nt=!0)}),t.p.multiSort&&(r=y,ut=g),t.p.treeGrid&&t.p._sort){$(t).jqGrid("SortTree",r,t.p.sortorder,i[r].stype||"text",i[r].srcfmt||"");return}if(k={eq:function(n){return n.equals},ne:function(n){return n.notEquals},lt:function(n){return n.less},le:function(n){return n.lessOrEquals},gt:function(n){return n.greater},ge:function(n){return n.greaterOrEquals},cn:function(n){return n.contains},nc:function(n,t){return t==="OR"?n.orNot().contains:n.andNot().contains},bw:function(n){return n.startsWith},bn:function(n,t){return t==="OR"?n.orNot().startsWith:n.andNot().startsWith},en:function(n,t){return t==="OR"?n.orNot().endsWith:n.andNot().endsWith},ew:function(n){return n.endsWith},ni:function(n,t){return t==="OR"?n.orNot().equals:n.andNot().equals},"in":function(n){return n.equals},nu:function(n){return n.isNull},nn:function(n,t){return t==="OR"?n.orNot().isNull:n.andNot().isNull}},n=$.jgrid.from.call(t,t.p.data),t.p.ignoreCase&&(n=n.ignoreCase()),t.p.search===!0)if(h=t.p.postData.filters,h)typeof h=="string"&&(h=$.jgrid.parse(h)),et(h);else try{f=i[t.p.postData.searchField];f.stype==="date"&&f.srcfmt&&f.newfmt&&f.srcfmt!==f.newfmt&&(t.p.postData.searchString=$.jgrid.parseDate.call(t,f.newfmt,t.p.postData.searchString,f.srcfmt));n=k[t.p.postData.searchOper](n)(t.p.postData.searchField,t.p.postData.searchString,i[t.p.postData.searchField])}catch(ct){}else t.p.treeGrid&&t.p.treeGridModel==="nested"&&n.orderBy(t.p.treeReader.left_field,"asc","integer","",null);if(t.p.treeGrid&&t.p.treeGridModel==="adjacency"&&(b=0,r=null),t.p.grouping)for(u=0;u<b;u++)n.orderBy(ft[u],w.groupOrder[u],tt[u].stype,tt[u].srcfmt);t.p.multiSort?$.each(r,function(t){n.orderBy(this,ut[t],i[this].stype,i[this].srcfmt,i[this].sfunc)}):r&&t.p.sortorder&&nt&&(t.p.sortorder.toUpperCase()==="DESC"?n.orderBy(t.p.sortname,"d",i[r].stype,i[r].srcfmt,i[r].sfunc):n.orderBy(t.p.sortname,"a",i[r].stype,i[r].srcfmt,i[r].sfunc));var e=n.select(),d=parseInt(t.p.rowNum,10),it=e.length,rt=parseInt(t.p.page,10),ht=Math.ceil(it/d),c={};if((t.p.search||t.p.resetsearch)&&t.p.grouping&&t.p.groupingView._locgr){if(t.p.groupingView.groups=[],ot=$.jgrid.getMethod("groupingPrepare"),t.p.footerrow&&t.p.userDataOnFooter){for(s in t.p.userData)t.p.userData.hasOwnProperty(s)&&(t.p.userData[s]=0);st=!0}for(l=0;l<it;l++){if(st)for(s in t.p.userData)t.p.userData.hasOwnProperty(s)&&(t.p.userData[s]+=parseFloat(e[l][s]||0));ot.call($(t),e[l],l,d)}}return e=t.p.treeGrid&&t.p.search?$(t).jqGrid("searchTree",e):e.slice((rt-1)*d,rt*d),n=null,i=null,c[t.p.localReader.total]=ht,c[t.p.localReader.page]=rt,c[t.p.localReader.records]=it,c[t.p.localReader.root]=e,c[t.p.localReader.userdata]=t.p.userData,e=null,c}},pr=function(n,i){var c,g,u,w,l,b,y,h="",tt,k=t.p.pager?$.jgrid.jqID(t.p.pager.substr(1)):"",r=k?"_"+k:"",s=t.p.toppager?"_"+t.p.toppager.substr(1):"",d,p,nt,it,rt;u=parseInt(t.p.page,10)-1;u<0&&(u=0);u=u*parseInt(t.p.rowNum,10);l=u+t.p.reccount;t.p.scroll&&(d=$("tbody:first > tr:gt(0)",t.grid.bDiv),u=l-d.length,t.p.reccount=d.length,p=d.outerHeight()||t.grid.prevRowHeight,p&&(nt=u*p,it=parseInt(t.p.records,10)*p,$(">div:first",t.grid.bDiv).css({height:it}).children("div:first").css({height:nt,display:nt?"":"none"}),t.grid.bDiv.scrollTop===0&&t.p.page>1&&(t.grid.bDiv.scrollTop=t.p.rowNum*(t.p.page-1)*p)),t.grid.bDiv.scrollLeft=t.grid.hDiv.scrollLeft);h=t.p.pager||"";h+=t.p.toppager?h?","+t.p.toppager:t.p.toppager:"";h&&(y=$.jgrid.getRegional(t,"formatter.integer"),c=a(t.p.page),g=a(t.p.lastpage),$(".selbox",h)[this.p.useProp?"prop":"attr"]("disabled",!1),t.p.pginput===!0&&($("#input"+r).html($.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",t.p.pgtext)||"","<input "+f(e,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(k)+"'><\/span>")),t.p.toppager&&$("#input_t"+s).html($.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",t.p.pgtext)||"","<input "+f(e,"pgInput",!1,"ui-pg-input")+" type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(k)+"_toppager'><\/span>")),$(".ui-pg-input",h).val(t.p.page),tt=t.p.toppager?"#sp_1"+r+",#sp_1"+r+"_toppager":"#sp_1"+r,$(tt).html($.fmatter?$.fmatter.util.NumberFormat(t.p.lastpage,y):t.p.lastpage)),t.p.viewrecords&&(t.p.reccount===0?$(".ui-paging-info",h).html($.jgrid.getRegional(t,"defaults.emptyrecords",t.p.emptyrecords)):(w=u+1,b=t.p.records,$.fmatter&&(w=$.fmatter.util.NumberFormat(w,y),l=$.fmatter.util.NumberFormat(l,y),b=$.fmatter.util.NumberFormat(b,y)),rt=$.jgrid.getRegional(t,"defaults.recordtext",t.p.recordtext),$(".ui-paging-info",h).html($.jgrid.template(rt,w,l,b)))),t.p.pgbuttons===!0&&(c<=0&&(c=g=0),c===1||c===0?($("#first"+r+", #prev"+r).addClass(o).removeClass(v),t.p.toppager&&$("#first_t"+s+", #prev_t"+s).addClass(o).removeClass(v)):($("#first"+r+", #prev"+r).removeClass(o),t.p.toppager&&$("#first_t"+s+", #prev_t"+s).removeClass(o)),c===g||c===0?($("#next"+r+", #last"+r).addClass(o).removeClass(v),t.p.toppager&&$("#next_t"+s+", #last_t"+s).addClass(o).removeClass(v)):($("#next"+r+", #last"+r).removeClass(o),t.p.toppager&&$("#next_t"+s+", #last_t"+s).removeClass(o))));n===!0&&t.p.rownumbers===!0&&$(">td.jqgrid-rownum",t.rows).each(function(n){$(this).html(u+1+n)});i&&t.p.jqgdnd&&$(t).jqGrid("gridDnD","updateDnD");$(t).triggerHandler("jqGridGridComplete");$.isFunction(t.p.gridComplete)&&t.p.gridComplete.call(t);$(t).triggerHandler("jqGridAfterGridComplete")},ct=function(){(t.grid.hDiv.loading=!0,t.p.hiddengrid)||$(t).jqGrid("progressBar",{method:"show",loadtype:t.p.loadui,htmlcontent:$.jgrid.getRegional(t,"defaults.loadtext",t.p.loadtext)})},ut=function(){t.grid.hDiv.loading=!1;$(t).jqGrid("progressBar",{method:"hide",loadtype:t.p.loadui})},nt=function(n){var v,s,p,y,h,f,c;if(!t.grid.hDiv.loading){var w=t.p.scroll&&n===!1,r={},l,u,i=t.p.prmNames;t.p.page<=0&&(t.p.page=Math.min(1,t.p.lastpage));i.search!==null&&(r[i.search]=t.p.search);i.nd!==null&&(r[i.nd]=(new Date).getTime());i.rows!==null&&(r[i.rows]=t.p.rowNum);i.page!==null&&(r[i.page]=t.p.page);i.sort!==null&&(r[i.sort]=t.p.sortname);i.order!==null&&(r[i.order]=t.p.sortorder);t.p.rowTotal!==null&&i.totalrows!==null&&(r[i.totalrows]=t.p.rowTotal);var a=$.isFunction(t.p.loadComplete),e=a?t.p.loadComplete:null,o=0;if(n=n||1,n>1?i.npage!==null?(r[i.npage]=n,o=n-1,n=1):e=function(i){t.p.page++;t.grid.hDiv.loading=!1;a&&t.p.loadComplete.call(t,i);nt(n-1)}:i.npage!==null&&delete t.p.postData[i.npage],t.p.grouping){for($(t).jqGrid("groupingSetup"),v=t.p.groupingView,p="",s=0;s<v.groupField.length;s++)y=v.groupField[s],$.each(t.p.colModel,function(n,t){t.name===y&&t.index&&(y=t.index)}),p+=y+" "+v.groupOrder[s]+", ";r[i.sort]=p+r[i.sort]}if($.extend(t.p.postData,r),h=t.p.scroll?t.rows.length-1:1,f=$(t).triggerHandler("jqGridBeforeRequest"),f===!1||f==="stop")return;if($.isFunction(t.p.datatype)){t.p.datatype.call(t,t.p.postData,"load_"+t.p.id,h,n,o);return}if($.isFunction(t.p.beforeRequest)&&(f=t.p.beforeRequest.call(t),f===undefined&&(f=!0),f===!1))return;l=t.p.datatype.toLowerCase();switch(l){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:t.p.url,type:t.p.mtype,dataType:l,data:$.isFunction(t.p.serializeGridData)?t.p.serializeGridData.call(t,t.p.postData):t.p.postData,success:function(i,r,u){if($.isFunction(t.p.beforeProcessing)&&t.p.beforeProcessing.call(t,i,r,u)===!1){ut();return}l==="xml"?hi(i,h,n>1,o):kt(i,h,n>1,o);$(t).triggerHandler("jqGridLoadComplete",[i]);e&&e.call(t,i);$(t).triggerHandler("jqGridAfterLoadComplete",[i]);w&&t.grid.populateVisible();(t.p.loadonce||t.p.treeGrid)&&(t.p.datatype="local");i=null;n===1&&ut()},error:function(i,r,u){$.isFunction(t.p.loadError)&&t.p.loadError.call(t,i,r,u);n===1&&ut();i=null},beforeSend:function(n,i){var r=!0;if($.isFunction(t.p.loadBeforeSend)&&(r=t.p.loadBeforeSend.call(t,n,i)),r===undefined&&(r=!0),r===!1)return!1;ct()}},$.jgrid.ajaxOptions,t.p.ajaxGridOptions));break;case"xmlstring":ct();u=typeof t.p.datastr!="string"?t.p.datastr:$.parseXML(t.p.datastr);hi(u);$(t).triggerHandler("jqGridLoadComplete",[u]);a&&t.p.loadComplete.call(t,u);$(t).triggerHandler("jqGridAfterLoadComplete",[u]);t.p.datatype="local";t.p.datastr=null;ut();break;case"jsonstring":ct();u=typeof t.p.datastr=="string"?$.jgrid.parse(t.p.datastr):t.p.datastr;kt(u);$(t).triggerHandler("jqGridLoadComplete",[u]);a&&t.p.loadComplete.call(t,u);$(t).triggerHandler("jqGridAfterLoadComplete",[u]);t.p.datatype="local";t.p.datastr=null;ut();break;case"local":case"clientside":ct();t.p.datatype="local";t.p._ald=!0;c=yr();kt(c,h,n>1,o);$(t).triggerHandler("jqGridLoadComplete",[c]);e&&e.call(t,c);$(t).triggerHandler("jqGridAfterLoadComplete",[c]);w&&t.grid.populateVisible();ut();t.p._ald=!1}t.p._sort=!1}},dt=function(n){$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.hDiv)[t.p.useProp?"prop":"attr"]("checked",n);var i=t.p.frozenColumns?t.p.id+"_frozen":"";i&&$("#cb_"+$.jgrid.jqID(t.p.id),t.grid.fhDiv)[t.p.useProp?"prop":"attr"]("checked",n)},ir=function(n,i){var tt="<td class='ui-pg-button "+o+"'><span class='ui-separator'><\/span><\/td>",h="",r="<table class='ui-pg-table ui-common-table ui-paging-pager'><tbody><tr>",c="",u,it,rt,ut,y,ft,b,g=function(n,i){var r;return($.isFunction(t.p.onPaging)&&(r=t.p.onPaging.call(t,n,i)),r==="stop")?!1:(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],dt(!1)),t.p.savedRow=[],!0)},s;if(n=n.substr(1),i+="_"+n,u="pg_"+n,it=n+"_left",rt=n+"_center",ut=n+"_right",$("#"+$.jgrid.jqID(n)).append("<div id='"+u+"' class='ui-pager-control' role='group'><table "+f(e,"pagerTable",!1,"ui-pg-table ui-common-table ui-pager-table")+"><tbody><tr><td id='"+it+"' align='left'><\/td><td id='"+rt+"' align='center' style='white-space:pre;'><\/td><td id='"+ut+"' align='right'><\/td><\/tr><\/tbody><\/table><\/div>").attr("dir","ltr"),t.p.rowList.length>0){for(c='<td dir="'+l+'">',c+="<select "+f(e,"pgSelectBox",!1,"ui-pg-selbox")+' role="listbox" title="'+($.jgrid.getRegional(t,"defaults.pgrecs",t.p.pgrecs)||"")+'">',b=0;b<t.p.rowList.length;b++)s=t.p.rowList[b].toString().split(":"),s.length===1&&(s[1]=s[0]),c+='<option role="option" value="'+s[0]+'"'+(a(t.p.rowNum,0)===a(s[0],0)?' selected="selected"':"")+">"+s[1]+"<\/option>";c+="<\/select><\/td>"}if(l==="rtl"&&(r+=c),t.p.pginput===!0&&(h="<td id='input"+i+"' dir='"+l+"'>"+$.jgrid.template($.jgrid.getRegional(t,"defaults.pgtext",t.p.pgtext)||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(n)+"'><\/span>")+"<\/td>"),t.p.pgbuttons===!0){var p=["first"+i,"prev"+i,"next"+i,"last"+i],d=f(e,"pgButtonBox",!0,"ui-pg-button"),w=[$.jgrid.getRegional(t,"defaults.pgfirst",t.p.pgfirst)||"",$.jgrid.getRegional(t,"defaults.pgprev",t.p.pgprev)||"",$.jgrid.getRegional(t,"defaults.pgnext",t.p.pgnext)||"",$.jgrid.getRegional(t,"defaults.pglast",t.p.pglast)||""];l==="rtl"&&(p.reverse(),w.reverse());r+="<td id='"+p[0]+"' class='"+d+"' title='"+w[0]+"'><span "+f(e,"icon_first",!1,k)+"><\/span><\/td>";r+="<td id='"+p[1]+"' class='"+d+"'  title='"+w[1]+"'><span "+f(e,"icon_prev",!1,k)+"><\/span><\/td>";r+=h!==""?tt+h+tt:"";r+="<td id='"+p[2]+"' class='"+d+"' title='"+w[2]+"'><span "+f(e,"icon_next",!1,k)+"><\/span><\/td>";r+="<td id='"+p[3]+"' class='"+d+"' title='"+w[3]+"'><span "+f(e,"icon_end",!1,k)+"><\/span><\/td>"}else h!==""&&(r+=h);if(l==="ltr"&&(r+=c),r+="<\/tr><\/tbody><\/table>",t.p.viewrecords===!0&&$("td#"+n+"_"+t.p.recordpos,"#"+u).append("<div dir='"+l+"' style='text-align:"+t.p.recordpos+"' class='ui-paging-info'><\/div>"),$("td#"+n+"_"+t.p.pagerpos,"#"+u).append(r),ft=$("#gbox_"+$.jgrid.jqID(t.p.id)).css("font-size")||"11px",$("#gbox_"+$.jgrid.jqID(t.p.id)).append("<div id='testpg' "+f(e,"entrieBox",!1,"ui-jqgrid")+" style='font-size:"+ft+";visibility:hidden;' ><\/div>"),y=$(r).clone().appendTo("#testpg").width(),$("#testpg").remove(),y>0&&(h!==""&&(y+=50),$("td#"+n+"_"+t.p.pagerpos,"#"+u).width(y)),t.p._nvtd=[],t.p._nvtd[0]=y?Math.floor((t.p.width-y)/2):Math.floor(t.p.width/3),t.p._nvtd[1]=0,r=null,$(".ui-pg-selbox","#"+u).bind("change",function(){return g("records",this)?(t.p.page=Math.round(t.p.rowNum*(t.p.page-1)/this.value-.5)+1,t.p.rowNum=this.value,t.p.pager&&$(".ui-pg-selbox",t.p.pager).val(this.value),t.p.toppager&&$(".ui-pg-selbox",t.p.toppager).val(this.value),nt(),!1):!1}),t.p.pgbuttons===!0&&($(".ui-pg-button","#"+u).hover(function(){$(this).hasClass(o)?this.style.cursor="default":($(this).addClass(v),this.style.cursor="pointer")},function(){$(this).hasClass(o)||($(this).removeClass(v),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(i)+", #prev"+$.jgrid.jqID(i)+", #next"+$.jgrid.jqID(i)+", #last"+$.jgrid.jqID(i)).click(function(){if($(this).hasClass(o))return!1;var n=a(t.p.page,1),r=a(t.p.lastpage,1),u=!1,s=!0,h=!0,f=!0,e=!0;return(r===0||r===1?(s=!1,h=!1,f=!1,e=!1):r>1&&n>=1?n===1?(s=!1,h=!1):n===r&&(f=!1,e=!1):r>1&&n===0&&(f=!1,e=!1,n=r-1),!g(this.id.split("_")[0],this))?!1:(this.id==="first"+i&&s&&(t.p.page=1,u=!0),this.id==="prev"+i&&h&&(t.p.page=n-1,u=!0),this.id==="next"+i&&f&&(t.p.page=n+1,u=!0),this.id==="last"+i&&e&&(t.p.page=r,u=!0),u&&nt(),!1)})),t.p.pginput===!0)$("#"+u).on("keypress","input.ui-pg-input",function(n){var i=n.charCode||n.keyCode||0;return i===13?g("user",this)?($(this).val(a($(this).val(),1)),t.p.page=$(this).val()>0?$(this).val():t.p.page,nt(),!1):!1:this})},wr=function(n,i){var r=t.p.colModel,e=t.p.frozenColumns?i:t.grid.headers[n].el,u="",c,s,f,h;for($("span.ui-grid-ico-sort",e).addClass(o),$(e).attr("aria-selected","false"),c=r[n].index||r[n].name,r[n].lso?r[n].lso==="asc"?(r[n].lso+="-desc",u="desc"):r[n].lso==="desc"?(r[n].lso+="-asc",u="asc"):(r[n].lso==="asc-desc"||r[n].lso==="desc-asc")&&(r[n].lso=""):r[n].lso=u=r[n].firstsortorder||"asc",u?($("span.s-ico",e).show(),$("span.ui-icon-"+u,e).removeClass(o),$(e).attr("aria-selected","true")):t.p.viewsortcols[0]||$("span.s-ico",e).hide(),s=y.indexOf(c),s===-1?(y.push(c),g.push(u)):u?g[s]=u:(g.splice(s,1),y.splice(s,1)),t.p.sortorder="",t.p.sortname="",f=0,h=y.length;f<h;f++)f>0&&(t.p.sortname+=", "),t.p.sortname+=y[f],f!==h-1&&(t.p.sortname+=" "+g[f]);t.p.sortorder=g[h-1]},rr=function(n,i,r,u,f){var l;if(t.p.colModel[i].sortable&&!(t.p.savedRow.length>0)){if(r||(t.p.lastsort===i&&t.p.sortname!==""?t.p.sortorder==="asc"?t.p.sortorder="desc":t.p.sortorder==="desc"&&(t.p.sortorder="asc"):t.p.sortorder=t.p.colModel[i].firstsortorder||"asc",t.p.page=1),t.p.multiSort)wr(i,f);else{if(u){if(t.p.lastsort===i&&t.p.sortorder===u&&!r)return;t.p.sortorder=u}var h=t.grid.headers[t.p.lastsort]?t.grid.headers[t.p.lastsort].el:null,s=t.p.frozenColumns?f:t.grid.headers[i].el,c=t.p.viewsortcols[1]==="single"?!0:!1,e;e=$(h).find("span.ui-grid-ico-sort");e.addClass(o);c&&$(e).css("display","none");$(h).attr("aria-selected","false");t.p.frozenColumns&&(e=t.grid.fhDiv.find("span.ui-grid-ico-sort"),e.addClass(o),c&&e.css("display","none"),t.grid.fhDiv.find("th").attr("aria-selected","false"));e=$(s).find("span.ui-icon-"+t.p.sortorder);e.removeClass(o);c&&e.css("display","");$(s).attr("aria-selected","true");t.p.viewsortcols[0]||(t.p.lastsort!==i?(t.p.frozenColumns&&t.grid.fhDiv.find("span.s-ico").hide(),$("span.s-ico",h).hide(),$("span.s-ico",s).show()):t.p.sortname===""&&$("span.s-ico",s).show());n=n.substring(5+t.p.id.length+1);t.p.sortname=t.p.colModel[i].index||n}if($(t).triggerHandler("jqGridSortCol",[t.p.sortname,i,t.p.sortorder])==="stop"){t.p.lastsort=i;return}if($.isFunction(t.p.onSortCol)&&t.p.onSortCol.call(t,t.p.sortname,i,t.p.sortorder)==="stop"){t.p.lastsort=i;return}t.p.datatype==="local"?t.p.deselectAfterSort&&$(t).jqGrid("resetSelection"):(t.p.selrow=null,t.p.multiselect&&dt(!1),t.p.selarrrow=[],t.p.savedRow=[]);t.p.scroll&&(l=t.grid.bDiv.scrollLeft,ht.call(t,!0,!1),t.grid.hDiv.scrollLeft=l);t.p.subGrid&&t.p.datatype==="local"&&$("td.sgexpanded","#"+$.jgrid.jqID(t.p.id)).each(function(){$(this).trigger("click")});t.p._sort=!0;nt();t.p.lastsort=i;t.p.sortname!==n&&i&&(t.p.lastsort=i)}},br=function(){var n=0,r=$.jgrid.cell_width?0:a(t.p.cellLayout,0),u=0,h,s=a(t.p.scrollOffset,0),e,c=!1,l,f=0,o;$.each(t.p.colModel,function(){if(this.hidden===undefined&&(this.hidden=!1),t.p.grouping&&t.p.autowidth){var i=$.inArray(this.name,t.p.groupingView.groupField);i>=0&&t.p.groupingView.groupColumnShow.length>i&&(this.hidden=!t.p.groupingView.groupColumnShow[i])}this.widthOrg=e=a(this.width,0);this.hidden===!1&&(n+=e+r,this.fixed?f+=e+r:u++)});isNaN(t.p.width)&&(t.p.width=n+(t.p.shrinkToFit===!1&&!isNaN(t.p.height)?s:0));i.width=t.p.width;t.p.tblwidth=n;t.p.shrinkToFit===!1&&t.p.forceFit===!0&&(t.p.forceFit=!1);t.p.shrinkToFit===!0&&u>0&&(l=i.width-r*u-f,isNaN(t.p.height)||(l-=s,c=!0),n=0,$.each(t.p.colModel,function(i){this.hidden!==!1||this.fixed||(e=Math.round(l*this.width/(t.p.tblwidth-r*u-f)),this.width=e,n+=e,h=i)}),o=0,c?i.width-f-(n+r*u)!==s&&(o=i.width-f-(n+r*u)-s):c||Math.abs(i.width-f-(n+r*u))===1||(o=i.width-f-(n+r*u)),t.p.colModel[h].width+=o,t.p.tblwidth=n+o+r*u+f,t.p.tblwidth>t.p.width&&(t.p.colModel[h].width-=t.p.tblwidth-parseInt(t.p.width,10),t.p.tblwidth=t.p.width))},kr=function(n){for(var u=n,r=n,i=n+1;i<t.p.colModel.length;i++)if(t.p.colModel[i].hidden!==!0){r=i;break}return r-u},dr=function(n){var r=$(t.grid.headers[n].el),i=[r.position().left+r.outerWidth()];return t.p.direction==="rtl"&&(i[0]=t.p.width-i[0]),i[0]-=t.grid.bDiv.scrollLeft,i.push($(t.grid.hDiv).position().top),i.push($(t.grid.bDiv).offset().top-$(t.grid.hDiv).offset().top+$(t.grid.bDiv).height()),i},ur=function(n){for(var r=t.grid.headers,u=$.jgrid.getCellIndex(n),i=0;i<r.length;i++)if(n===r[i].el){u=i;break}return u},fr;for(this.p.id=this.id,$.inArray(t.p.multikey,["shiftKey","altKey","ctrlKey"])===-1&&(t.p.multikey=!1),t.p.keyName=!1,u=0;u<t.p.colModel.length;u++)fr=typeof t.p.colModel[u].template=="string"?$.jgrid.cmTemplate!=null&&typeof $.jgrid.cmTemplate[t.p.colModel[u].template]=="object"?$.jgrid.cmTemplate[t.p.colModel[u].template]:{}:t.p.colModel[u].template,t.p.colModel[u]=$.extend(!0,{},t.p.cmTemplate,fr||{},t.p.colModel[u]),t.p.keyName===!1&&t.p.colModel[u].key===!0&&(t.p.keyName=t.p.colModel[u].name);if(t.p.sortorder=t.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),t.p.grouping===!0&&(t.p.scroll=!1,t.p.rownumbers=!1,t.p.treeGrid=!1,t.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(gr){}t.p.datatype!=="local"&&(t.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(t).jqGrid("setSubGrid")}catch(nu){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?t.p.multiselectWidth+t.p.cellLayout:t.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:t.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0,frozen:!0}));t.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},t.p.xmlReader);t.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.jsonReader);t.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},t.p.localReader);t.p.scroll&&(t.p.pgbuttons=!1,t.p.pginput=!1,t.p.rowList=[]);t.p.data.length&&(tr(),oi());var b="<thead><tr class='ui-jqgrid-labels' role='row'>",er,ci,gt,lt,ft="",h,s,or,at,li="",ai="";if(t.p.shrinkToFit===!0&&t.p.forceFit===!0)for(u=t.p.colModel.length-1;u>=0;u--)if(!t.p.colModel[u].hidden){t.p.colModel[u].resizable=!1;break}if(t.p.viewsortcols[1]==="horizontal"?(li=" ui-i-asc",ai=" ui-i-desc"):t.p.viewsortcols[1]==="single"&&(li=" ui-single-sort-asc",ai=" ui-single-sort-desc",ft=" style='display:none'",t.p.viewsortcols[0]=!1),er=bi?"class='ui-th-div-ie'":"",at="<span class='s-ico' style='display:none'>",at+="<span sort='asc'  class='ui-grid-ico-sort ui-icon-asc"+li+" ui-sort-"+l+" "+o+" "+k+" "+f(e,"icon_asc",!0)+"'"+ft+"><\/span>",at+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ai+" ui-sort-"+l+" "+o+" "+k+" "+f(e,"icon_desc",!0)+"'"+ft+"><\/span><\/span>",t.p.multiSort&&t.p.sortname)for(y=t.p.sortname.split(","),u=0;u<y.length;u++)it=$.trim(y[u]).split(" "),y[u]=$.trim(it[0]),g[u]=it[1]?$.trim(it[1]):t.p.sortorder||"asc";for(u=0;u<this.p.colNames.length;u++)sr=t.p.headertitles?' title="'+$.jgrid.stripHtml(t.p.colNames[u])+'"':"",b+="<th id='"+t.p.id+"_"+t.p.colModel[u].name+"' role='columnheader' "+f(e,"headerBox",!1,"ui-th-column ui-th-"+l)+" "+sr+">",ci=t.p.colModel[u].index||t.p.colModel[u].name,b+="<div id='jqgh_"+t.p.id+"_"+t.p.colModel[u].name+"' "+er+">"+t.p.colNames[u],t.p.colModel[u].width=t.p.colModel[u].width?parseInt(t.p.colModel[u].width,10):150,typeof t.p.colModel[u].title!="boolean"&&(t.p.colModel[u].title=!0),t.p.colModel[u].lso="",ci===t.p.sortname&&(t.p.lastsort=u),t.p.multiSort&&(it=$.inArray(ci,y),it!==-1&&(t.p.colModel[u].lso=g[it])),b+=at+"<\/div><\/th>";if(b+="<\/tr><\/thead>",at=null,$(this).append(b),$("thead tr:first th",this).hover(function(){$(this).addClass(v)},function(){$(this).removeClass(v)}),this.p.multiselect&&(vt=[],$("#cb_"+$.jgrid.jqID(t.p.id),this).bind("click",function(){t.p.selarrrow=[];var n=t.p.frozenColumns===!0?t.p.id+"_frozen":"";this.checked?($(t.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(o)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id))[t.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass(tt).attr("aria-selected","true"),t.p.selarrrow.push(this.id),t.p.selrow=this.id,n&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id),t.grid.fbDiv)[t.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),t.grid.fbDiv).addClass(tt))))}),et=!0,vt=[]):($(t.rows).each(function(i){i>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass(o)||$(this).hasClass("jqfoot")||($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id))[t.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass(tt).attr("aria-selected","false"),vt.push(this.id),n&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(this.id),t.grid.fbDiv)[t.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),t.grid.fbDiv).removeClass(tt))))}),t.p.selrow=null,et=!1);$(t).triggerHandler("jqGridSelectAll",[et?t.p.selarrrow:vt,et]);$.isFunction(t.p.onSelectAll)&&t.p.onSelectAll.call(t,et?t.p.selarrrow:vt,et)})),t.p.autowidth===!0&&(vi=$(rt).innerWidth(),t.p.width=vi>0?vi:"nw"),br(),$(rt).css("width",i.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+t.p.id+"'>&#160;<\/div>"),t.p.scrollPopUp&&$(rt).append("<div "+f(e,"scrollBox",!1,"loading ui-scroll-popup")+" id='scroll_g"+t.p.id+"'><\/div>"),$(d).css("width",i.width+"px"),b=$("thead:first",t).get(0),yt="",t.p.footerrow&&(yt+="<table role='presentation' style='width:"+t.p.tblwidth+"px' "+f(e,"footerTable",!1,"ui-jqgrid-ftable ui-common-table")+"><tbody><tr role='row' "+f(e,"footerBox",!1,"footrow footrow-"+l)+">"),yi=$("tr:first",b),pt="<tr class='jqgfirstrow' role='row'>",t.p.disableClick=!1,$("th",yi).each(function(n){var u,r;gt=t.p.colModel[n].width;t.p.colModel[n].resizable===undefined&&(t.p.colModel[n].resizable=!0);t.p.colModel[n].resizable?(lt=document.createElement("span"),$(lt).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+l).css("cursor","col-resize"),$(this).addClass(t.p.resizeclass)):lt="";$(this).css("width",gt+"px").prepend(lt);lt=null;u="";t.p.colModel[n].hidden&&($(this).css("display","none"),u="display:none;");pt+="<td role='gridcell' style='height:0px;width:"+gt+"px;"+u+"'><\/td>";i.headers[n]={width:gt,el:this};ft=t.p.colModel[n].sortable;typeof ft!="boolean"&&(t.p.colModel[n].sortable=!0,ft=!0);r=t.p.colModel[n].name;r==="cb"||r==="subgrid"||r==="rn"||t.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable");ft&&(t.p.multiSort?t.p.viewsortcols[0]?($("div span.s-ico",this).show(),t.p.colModel[n].lso&&$("div span.ui-icon-"+t.p.colModel[n].lso,this).removeClass(o).css("display","")):t.p.colModel[n].lso&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.colModel[n].lso,this).removeClass(o).css("display","")):t.p.viewsortcols[0]?($("div span.s-ico",this).show(),n===t.p.lastsort&&$("div span.ui-icon-"+t.p.sortorder,this).removeClass(o).css("display","")):n===t.p.lastsort&&t.p.sortname!==""&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+t.p.sortorder,this).removeClass(o).css("display","")));t.p.footerrow&&(yt+="<td role='gridcell' "+st(n,0,"",null,"",!1)+">&#160;<\/td>")}).mousedown(function(n){if($(n.target).closest("th>span.ui-jqgrid-resize").length===1){var r=ur(this);return t.p.forceFit===!0&&(t.p.nv=kr(r)),i.dragStart(r,n,dr(r)),!1}}).click(function(n){var r,f,e,u,i,o;return t.p.disableClick?(t.p.disableClick=!1,!1):(r="th>div.ui-jqgrid-sortable",t.p.viewsortcols[2]||(r="th>div>span>span.ui-grid-ico-sort"),u=$(n.target).closest(r),u.length!==1)?void 0:(t.p.frozenColumns?(o=$(this)[0].id.substring(t.p.id.length+1),$(t.p.colModel).each(function(n){if(this.name===o)return i=n,!1})):i=ur(this),t.p.viewsortcols[2]||(f=!0,e=u.attr("sort")),i!=null&&rr($("div",this)[0].id,i,f,e,this),!1)}),t.p.sortable&&$.fn.sortable)try{$(t).jqGrid("sortableColumns",yi)}catch(tu){}t.p.footerrow&&(yt+="<\/tr><\/tbody><\/table>");pt+="<\/tr>";or=document.createElement("tbody");this.appendChild(or);$(this).addClass(f(e,"rowTable",!0,"ui-jqgrid-btable ui-common-table")).append(pt);pt=null;var hr=$("<table "+f(e,"headerTable",!1,"ui-jqgrid-htable ui-common-table")+" style='width:"+t.p.tblwidth+"px' role='presentation' aria-labelledby='gbox_"+this.id+"'><\/table>").append(b),p=t.p.caption&&t.p.hiddengrid===!0?!0:!1,ot=$("<div class='ui-jqgrid-hbox"+(l==="rtl"?"-rtl":"")+"'><\/div>");if(b=null,i.hDiv=document.createElement("div"),i.hDiv.style.width=i.width+"px",i.hDiv.className=f(e,"headerDiv",!0,"ui-jqgrid-hdiv"),$(i.hDiv).append(ot),$(ot).append(hr),hr=null,p&&$(i.hDiv).hide(),t.p.pager&&(typeof t.p.pager=="string"?t.p.pager.substr(0,1)!=="#"&&(t.p.pager="#"+t.p.pager):t.p.pager="#"+$(t.p.pager).attr("id"),$(t.p.pager).css({width:i.width+"px"}).addClass(f(e,"pagerBox",!0,"ui-jqgrid-pager")).appendTo(rt),p&&$(t.p.pager).hide(),ir(t.p.pager,"")),t.p.cellEdit===!1&&t.p.hoverrows===!0&&$(t).bind("mouseover",function(n){s=$(n.target).closest("tr.jqgrow");$(s).attr("class")!=="ui-subgrid"&&$(s).addClass(v)}).bind("mouseout",function(n){s=$(n.target).closest("tr.jqgrow");$(s).removeClass(v)}),$(t).before(i.hDiv).click(function(n){var i,r,f,u;if(h=n.target,s=$(h,t.rows).closest("tr.jqgrow"),$(s).length===0||s[0].className.indexOf(o)>-1||($(h,t).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==t.id)return this;if(i=$(h).hasClass("cbox"),r=$(t).triggerHandler("jqGridBeforeSelectRow",[s[0].id,n]),r=r===!1||r==="stop"?!1:!0,$.isFunction(t.p.beforeSelectRow)&&(f=t.p.beforeSelectRow.call(t,s[0].id,n),(f===!1||f==="stop")&&(r=!1)),h.tagName!=="A"&&(h.tagName!=="INPUT"&&h.tagName!=="TEXTAREA"&&h.tagName!=="OPTION"&&h.tagName!=="SELECT"||i)){if(c=s[0].id,h=$(h).closest("tr.jqgrow>td"),h.length>0&&(w=$.jgrid.getCellIndex(h),pi=$(h).closest("td,th").html(),$(t).triggerHandler("jqGridCellSelect",[c,w,pi,n]),$.isFunction(t.p.onCellSelect)&&t.p.onCellSelect.call(t,c,w,pi,n)),t.p.cellEdit===!0)if(t.p.multiselect&&i&&r)$(t).jqGrid("setSelection",c,!0,n);else if(h.length>0){c=s[0].rowIndex;try{$(t).jqGrid("editCell",c,w,!0)}catch(e){}}r&&(t.p.multikey?n[t.p.multikey]?$(t).jqGrid("setSelection",c,!0,n):t.p.multiselect&&i&&(i=$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+c).is(":checked"),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+c)[t.p.useProp?"prop":"attr"]("checked",!i)):t.p.multiselect&&t.p.multiboxonly?i?$(t).jqGrid("setSelection",c,!0,n):(u=t.p.frozenColumns?t.p.id+"_frozen":"",$(t.p.selarrrow).each(function(n,i){var r=$(t).jqGrid("getGridRowById",i);r&&$(r).removeClass(tt);$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1);u&&($("#"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(u)).removeClass(tt),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(u))[t.p.useProp?"prop":"attr"]("checked",!1))}),t.p.selarrrow=[],$(t).jqGrid("setSelection",c,!0,n)):$(t).jqGrid("setSelection",c,!0,n))}}).bind("reloadGrid",function(n,i){if(t.p.treeGrid===!0&&(t.p.datatype=t.p.treedatatype),i=i||{},i.current&&t.grid.selectionPreserver(t),t.p.datatype==="local"?($(t).jqGrid("resetSelection"),t.p.data.length&&(tr(),oi())):t.p.treeGrid||(t.p.selrow=null,t.p.multiselect&&(t.p.selarrrow=[],dt(!1)),t.p.savedRow=[]),t.p.scroll&&ht.call(t,!0,!1),i.page){var r=i.page;r>t.p.lastpage&&(r=t.p.lastpage);r<1&&(r=1);t.p.page=r;t.grid.bDiv.scrollTop=t.grid.prevRowHeight?(r-1)*t.grid.prevRowHeight*t.p.rowNum:0}return t.grid.prevRowHeight&&t.p.scroll&&i.page===undefined?(delete t.p.lastpage,t.grid.populateVisible()):t.grid.populate(),t.p.inlineNav===!0&&$(t).jqGrid("showAddEditButtons"),!1}).dblclick(function(n){if(h=n.target,s=$(h,t.rows).closest("tr.jqgrow"),$(s).length!==0){c=s[0].rowIndex;w=$.jgrid.getCellIndex(h);var i=$(t).triggerHandler("jqGridDblClickRow",[$(s).attr("id"),c,w,n]);return i!=null?i:$.isFunction(t.p.ondblClickRow)&&(i=t.p.ondblClickRow.call(t,$(s).attr("id"),c,w,n),i!=null)?i:void 0}}).bind("contextmenu",function(n){if(h=n.target,s=$(h,t.rows).closest("tr.jqgrow"),$(s).length!==0){t.p.multiselect||$(t).jqGrid("setSelection",s[0].id,!0,n);c=s[0].rowIndex;w=$.jgrid.getCellIndex(h);var i=$(t).triggerHandler("jqGridRightClickRow",[$(s).attr("id"),c,w,n]);return i!=null?i:$.isFunction(t.p.onRightClickRow)&&(i=t.p.onRightClickRow.call(t,$(s).attr("id"),c,w,n),i!=null)?i:void 0}}),i.bDiv=document.createElement("div"),bi&&String(t.p.height).toLowerCase()==="auto"&&(t.p.height="100%"),$(i.bDiv).append($('<div style="position:relative;"><\/div>').append("<div><\/div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:t.p.height+(isNaN(t.p.height)?"":"px"),width:i.width+"px"}).scroll(i.scrollGrid),$("table:first",i.bDiv).css({width:t.p.tblwidth+"px"}),$.support.tbody||$("tbody",this).length===2&&$("tbody:gt(0)",this).remove(),t.p.multikey&&($.jgrid.msie?$(i.bDiv).bind("selectstart",function(){return!1}):$(i.bDiv).bind("mousedown",function(){return!1})),p&&$(i.bDiv).hide(),ni=k+" "+f(e,"icon_caption_open",!0),wi=k+" "+f(e,"icon_caption_close",!0),i.cDiv=document.createElement("div"),ti=t.p.hidegrid===!0?$("<a role='link' class='ui-jqgrid-titlebar-close HeaderButton "+vr+"' title='"+($.jgrid.getRegional(t,"defaults.showhide",t.p.showhide)||"")+"' />").hover(function(){ti.addClass(v)},function(){ti.removeClass(v)}).append("<span class='ui-jqgrid-headlink "+ni+"'><\/span>").css(l==="rtl"?"left":"right","0px"):"",$(i.cDiv).append(ti).append("<span class='ui-jqgrid-title'>"+t.p.caption+"<\/span>").addClass("ui-jqgrid-titlebar ui-jqgrid-caption"+(l==="rtl"?"-rtl":"")+" "+f(e,"gridtitleBox",!0)),$(i.cDiv).insertBefore(i.hDiv),t.p.toolbar[0]&&(ii=f(e,"customtoolbarBox",!0,"ui-userdata"),i.uDiv=document.createElement("div"),t.p.toolbar[1]==="top"?$(i.uDiv).insertBefore(i.hDiv):t.p.toolbar[1]==="bottom"&&$(i.uDiv).insertAfter(i.hDiv),t.p.toolbar[1]==="both"?(i.ubDiv=document.createElement("div"),$(i.uDiv).addClass(ii+" ui-userdata-top").attr("id","t_"+this.id).insertBefore(i.hDiv).width(i.width),$(i.ubDiv).addClass(ii+" ui-userdata-bottom").attr("id","tb_"+this.id).insertAfter(i.hDiv).width(i.width),p&&$(i.ubDiv).hide()):$(i.uDiv).width(i.width).addClass(ii+" ui-userdata-top").attr("id","t_"+this.id),p&&$(i.uDiv).hide()),t.p.toppager&&(t.p.toppager=$.jgrid.jqID(t.p.id)+"_toppager",i.topDiv=$("<div id='"+t.p.toppager+"'><\/div>")[0],t.p.toppager="#"+t.p.toppager,$(i.topDiv).addClass(f(e,"toppagerBox",!0,"ui-jqgrid-toppager")).width(i.width).insertBefore(i.hDiv),ir(t.p.toppager,"_t")),t.p.footerrow&&(i.sDiv=$("<div class='ui-jqgrid-sdiv'><\/div>")[0],ot=$("<div class='ui-jqgrid-hbox"+(l==="rtl"?"-rtl":"")+"'><\/div>"),$(i.sDiv).append(ot).width(i.width).insertAfter(i.hDiv),$(ot).append(yt),i.footers=$(".ui-jqgrid-ftable",i.sDiv)[0].rows[0].cells,t.p.rownumbers&&(i.footers[0].className=f(e,"rownumBox",!0,"jqgrid-rownum")),p&&$(i.sDiv).hide()),ot=null,t.p.caption?(cr=t.p.datatype,t.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",i.cDiv).click(function(n){var f=$.isFunction(t.p.onHeaderClick),r=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-toppager, .ui-jqgrid-pager, .ui-jqgrid-sdiv",u,e=this;return t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&(r+=", #"+$(i.ubDiv).attr("id")),r+=", #"+$(i.uDiv).attr("id")),u=$(r,"#gview_"+$.jgrid.jqID(t.p.id)).length,t.p.gridstate==="visible"?$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast",function(){u--;u===0&&($("span",e).removeClass(ni).addClass(wi),t.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).hide(),$(t).triggerHandler("jqGridHeaderClick",[t.p.gridstate,n]),f&&(p||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}):t.p.gridstate==="hidden"&&$(r,"#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast",function(){u--;u===0&&($("span",e).removeClass(wi).addClass(ni),p&&(t.p.datatype=cr,nt(),p=!1),t.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(t.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(t.p.id)).show(),$(t).triggerHandler("jqGridHeaderClick",[t.p.gridstate,n]),f&&(p||t.p.onHeaderClick.call(t,t.p.gridstate,n)))}),!1}),p&&(t.p.datatype="local",$(".ui-jqgrid-titlebar-close",i.cDiv).trigger("click")))):($(i.cDiv).hide(),t.p.toppager||$(i.hDiv).addClass(f(t.p.styleUI+".common","cornertop",!0))),$(i.hDiv).after(i.bDiv).mousemove(function(n){if(i.resizing)return i.dragMove(n),!1}),$(".ui-jqgrid-labels",i.hDiv).bind("selectstart",function(){return!1}),$(document).bind("mouseup.jqGrid"+t.p.id,function(){return i.resizing?(i.dragEnd(!0),!1):!0}),t.formatCol=st,t.sortData=rr,t.updatepager=pr,t.refreshIndex=oi,t.setHeadCheckBox=dt,t.constructTr=si,t.formatter=function(n,t,i,r,u){return di(n,t,i,r,u)},$.extend(i,{populate:nt,emptyRows:ht,beginReq:ct,endReq:ut}),this.grid=i,t.addXmlData=function(n){hi(n)},t.addJSONData=function(n){kt(n)},this.grid.cols=this.rows[0].cells,$(t).triggerHandler("jqGridInitGrid"),$.isFunction(t.p.onInitGrid)&&t.p.onInitGrid.call(t),nt(),t.p.hiddengrid=!1,t.p.responsive){lr="onorientationchange"in window;ar=lr?"orientationchange":"resize";$(window).on(ar,function(){$(t).jqGrid("resizeGrid")})}}})};$.jgrid.extend({getGridParam:function(n,t){var r=this[0],i;if(r&&r.grid){if(t===undefined&&typeof t!="string"&&(t="jqGrid"),i=r.p,t!=="jqGrid")try{i=$(r).data(t)}catch(u){i=r.p}return n?i[n]!==undefined?i[n]:null:i}},setGridParam:function(n,t){return this.each(function(){if(t==null&&(t=!1),this.grid&&typeof n=="object")if(t===!0){var i=$.extend({},this.p,n);this.p=i}else $.extend(!0,this.p,n)})},getGridRowById:function(n){var t;return this.each(function(){try{for(var i=this.rows.length;i--;)if(n.toString()===this.rows[i].id){t=this.rows[i];break}}catch(r){t=$(this.grid.bDiv).find("#"+$.jgrid.jqID(n))}}),t},getDataIDs:function(){var i=[],n=0,t,r=0;return this.each(function(){if(t=this.rows.length,t&&t>0)while(n<t)$(this.rows[n]).hasClass("jqgrow")&&(i[r]=this.rows[n].id,r++),n++}),i},setSelection:function(n,t,i){return this.each(function(){function y(n){var u=$(r.grid.bDiv)[0].clientHeight,t=$(r.grid.bDiv)[0].scrollTop,i=$(r.rows[n]).position().top,f=r.rows[n].clientHeight;i+f>=u+t?$(r.grid.bDiv)[0].scrollTop=i-(u+t)+f+t:i<u+t&&i<t&&($(r.grid.bDiv)[0].scrollTop=i)}var r=this,f,u,h,s,c,e,l,a=$.jgrid.getMethod("getStyleUI"),o=a(r.p.styleUI+".common","highlight",!0),v=a(r.p.styleUI+".common","disabled",!0);n!==undefined&&((t=t===!1?!1:!0,u=$(r).jqGrid("getGridRowById",n),!u||!u.className||u.className.indexOf(v)>-1)||(r.p.scrollrows===!0&&(h=$(r).jqGrid("getGridRowById",n).rowIndex,h>=0&&y(h)),r.p.frozenColumns===!0&&(e=r.p.id+"_frozen"),r.p.multiselect?(r.setHeadCheckBox(!1),r.p.selrow=u.id,s=$.inArray(r.p.selrow,r.p.selarrrow),s===-1?(u.className!=="ui-subgrid"&&$(u).addClass(o).attr("aria-selected","true"),f=!0,r.p.selarrrow.push(r.p.selrow)):(u.className!=="ui-subgrid"&&$(u).removeClass(o).attr("aria-selected","false"),f=!1,r.p.selarrrow.splice(s,1),c=r.p.selarrrow[0],r.p.selrow=c===undefined?null:c),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(u.id))[r.p.useProp?"prop":"attr"]("checked",f),e&&(s===-1?$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).addClass(o):$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).removeClass(o),$("#jqg_"+$.jgrid.jqID(r.p.id)+"_"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e))[r.p.useProp?"prop":"attr"]("checked",f)),t&&($(r).triggerHandler("jqGridSelectRow",[u.id,f,i]),r.p.onSelectRow&&r.p.onSelectRow.call(r,u.id,f,i))):u.className!=="ui-subgrid"&&(r.p.selrow!==u.id?(l=$(r).jqGrid("getGridRowById",r.p.selrow),l&&$(l).removeClass(o).attr({"aria-selected":"false",tabindex:"-1"}),$(u).addClass(o).attr({"aria-selected":"true",tabindex:"0"}),e&&($("#"+$.jgrid.jqID(r.p.selrow),"#"+$.jgrid.jqID(e)).removeClass(o),$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(e)).addClass(o)),f=!0):f=!1,r.p.selrow=u.id,t&&($(r).triggerHandler("jqGridSelectRow",[u.id,f,i]),r.p.onSelectRow&&r.p.onSelectRow.call(r,u.id,f,i)))))})},resetSelection:function(n){return this.each(function(){var t=this,r,i,e=$.jgrid.getMethod("getStyleUI"),u=e(t.p.styleUI+".common","highlight",!0),o=e(t.p.styleUI+".common","hover",!0),f;t.p.frozenColumns===!0&&(i=t.p.id+"_frozen");n!==undefined?(r=n===t.p.selrow?t.p.selrow:n,$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(r)).removeClass(u).attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i)).removeClass(u),t.p.multiselect&&($("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(t.p.id))[t.p.useProp?"prop":"attr"]("checked",!1),i&&$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1),t.setHeadCheckBox(!1),f=$.inArray($.jgrid.jqID(r),t.p.selarrrow),f!==-1&&t.p.selarrrow.splice(f,1)),t.p.onUnSelectRow&&t.p.onUnSelectRow.call(t,r),r=null):t.p.multiselect?($(t.p.selarrrow).each(function(n,r){$($(t).jqGrid("getGridRowById",r)).removeClass(u).attr("aria-selected","false");$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r))[t.p.useProp?"prop":"attr"]("checked",!1);i&&($("#"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i)).removeClass(u),$("#jqg_"+$.jgrid.jqID(t.p.id)+"_"+$.jgrid.jqID(r),"#"+$.jgrid.jqID(i))[t.p.useProp?"prop":"attr"]("checked",!1));t.p.onUnSelectRow&&t.p.onUnSelectRow.call(t,r)}),t.setHeadCheckBox(!1),t.p.selarrrow=[],t.p.selrow=null):t.p.selrow&&($("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr#"+$.jgrid.jqID(t.p.selrow)).removeClass(u).attr("aria-selected","false"),i&&$("#"+$.jgrid.jqID(t.p.selrow),"#"+$.jgrid.jqID(i)).removeClass(u),t.p.onUnSelectRow&&t.p.onUnSelectRow.call(t,t.p.selrow),t.p.selrow=null);t.p.cellEdit===!0&&parseInt(t.p.iCol,10)>=0&&parseInt(t.p.iRow,10)>=0&&($("td:eq("+t.p.iCol+")",t.rows[t.p.iRow]).removeClass("edit-cell "+u),$(t.rows[t.p.iRow]).removeClass("selected-row "+o));t.p.savedRow=[]})},getRowData:function(n,t){var i={},r,u=!1,f,e=0;return this.each(function(){var o=this,s,h;if(n==null)u=!0,r=[],f=o.rows.length;else{if(h=$(o).jqGrid("getGridRowById",n),!h)return i;f=2}for(t&&t===!0&&o.p.data.length>0||(t=!1);e<f;)u&&(h=o.rows[e]),$(h).hasClass("jqgrow")&&(t?i=o.p.data[o.p._index[h.id]]:$('td[role="gridcell"]',h).each(function(n){if(s=o.p.colModel[n].name,s!=="cb"&&s!=="subgrid"&&s!=="rn")if(o.p.treeGrid===!0&&s===o.p.ExpandColumn)i[s]=$.jgrid.htmlDecode($("span:first",this).html());else try{i[s]=$.unformat.call(o,this,{rowId:h.id,colModel:o.p.colModel[n]},n)}catch(t){i[s]=$.jgrid.htmlDecode($(this).html())}}),u&&(r.push(i),i={})),e++}),r||i},delRowData:function(n){var i=!1,t,r,u;return this.each(function(){var f=this,s,e,o;if(t=$(f).jqGrid("getGridRowById",n),!t)return!1;f.p.subGrid&&(u=$(t).next(),u.hasClass("ui-subgrid")&&u.remove());$(t).remove();f.p.records--;f.p.reccount--;f.updatepager(!0,!1);i=!0;f.p.multiselect&&(r=$.inArray(n,f.p.selarrrow),r!==-1&&f.p.selarrrow.splice(r,1));f.p.multiselect&&f.p.selarrrow.length>0?f.p.selrow=f.p.selarrrow[f.p.selarrrow.length-1]:f.p.selrow===n&&(f.p.selrow=null);f.p.datatype==="local"&&(s=$.jgrid.stripPref(f.p.idPrefix,n),e=f.p._index[s],e!==undefined&&(f.p.data.splice(e,1),f.refreshIndex()));f.p.altRows===!0&&i&&(o=f.p.altclass,$(f.rows).each(function(n){n%2==1?$(this).addClass(o):$(this).removeClass(o)}))}),i},setRowData:function(n,t,i){var r,u=!0,f;return this.each(function(){var v,c,l;if(!this.grid)return!1;var e=this,h,o,a=typeof i,s={};if(o=$(this).jqGrid("getGridRowById",n),!o)return!1;if(t)try{if($(this.p.colModel).each(function(i){r=this.name;var u=$.jgrid.getAccessor(t,r);u!==undefined&&(s[r]=this.formatter&&typeof this.formatter=="string"&&this.formatter==="date"?$.unformat.date.call(e,u,this):u,h=e.formatter(n,s[r],i,t,"edit"),f=this.title?{title:$.jgrid.stripHtml(h)}:{},e.p.treeGrid===!0&&r===e.p.ExpandColumn?$("td[role='gridcell']:eq("+i+") > span:first",o).html(h).attr(f):$("td[role='gridcell']:eq("+i+")",o).html(h).attr(f))}),e.p.datatype==="local"){if(v=$.jgrid.stripPref(e.p.idPrefix,n),c=e.p._index[v],e.p.treeGrid)for(l in e.p.treeReader)e.p.treeReader.hasOwnProperty(l)&&delete s[e.p.treeReader[l]];c!==undefined&&(e.p.data[c]=$.extend(!0,e.p.data[c],s));s=null}}catch(y){u=!1}u&&(a==="string"?$(o).addClass(i):i!==null&&a==="object"&&$(o).css(i),$(e).triggerHandler("jqGridAfterGridComplete"))}),u},addRowData:function(n,t,i,r){$.inArray(i,["first","last","before","after"])===-1&&(i="last");var k=!1,p,u,d="",g="",s,w,o,f,h,l,c="",a,v,y,e,nt,b;return t&&($.isArray(t)?(a=!0,v=n):(t=[t],a=!1),this.each(function(){var tt=this,ft=t.length;o=tt.p.rownumbers===!0?1:0;s=tt.p.multiselect===!0?1:0;w=tt.p.subGrid===!0?1:0;a||(n!==undefined?n=String(n):(n=$.jgrid.randId(),tt.p.keyName!==!1&&(v=tt.p.keyName,t[0][v]!==undefined&&(n=t[0][v]))));y=tt.p.altclass;var rt=0,et=$(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","rowBox",!0,"jqgrow ui-row-"+tt.p.direction),it={},ut,ot=$.isFunction(tt.p.afterInsertRow)?!0:!1;for(o&&(d=$(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","rownumBox",!1,"jqgrid-rownum")),s&&(g=$(tt).jqGrid("getStyleUI",tt.p.styleUI+".base","multiBox",!1,"cbox"));rt<ft;){if(e=t[rt],u=[],ut=et,a){try{n=e[v];n===undefined&&(n=$.jgrid.randId())}catch(st){n=$.jgrid.randId()}ut+=tt.p.altRows===!0?(tt.rows.length-1)%2==0?" "+y:"":""}for(b=n,n=tt.p.idPrefix+n,o&&(c=tt.formatCol(0,1,"",null,n,!0),u[u.length]='<td role="gridcell" '+d+" "+c+">0<\/td>"),s&&(l='<input role="checkbox" type="checkbox" id="jqg_'+tt.p.id+"_"+n+'" '+g+"/>",c=tt.formatCol(o,1,"",null,n,!0),u[u.length]='<td role="gridcell" '+c+">"+l+"<\/td>"),w&&(u[u.length]=$(tt).jqGrid("addSubGridCell",s+o,1)),h=s+w+o;h<tt.p.colModel.length;h++)nt=tt.p.colModel[h],p=nt.name,it[p]=e[p],l=tt.formatter(n,$.jgrid.getAccessor(e,p),h,e),c=tt.formatCol(h,1,l,e,n,it),u[u.length]='<td role="gridcell" '+c+">"+l+"<\/td>";if(u.unshift(tt.constructTr(n,!1,ut,it,e)),u[u.length]="<\/tr>",tt.rows.length===0)$("table:first",tt.grid.bDiv).append(u.join(""));else switch(i){case"last":$(tt.rows[tt.rows.length-1]).after(u.join(""));f=tt.rows.length-1;break;case"first":$(tt.rows[0]).after(u.join(""));f=1;break;case"after":f=$(tt).jqGrid("getGridRowById",r);f&&($(tt.rows[f.rowIndex+1]).hasClass("ui-subgrid")?$(tt.rows[f.rowIndex+1]).after(u):$(f).after(u.join("")),f=f.rowIndex+1);break;case"before":f=$(tt).jqGrid("getGridRowById",r);f&&($(f).before(u.join("")),f=f.rowIndex-1)}tt.p.subGrid===!0&&$(tt).jqGrid("addSubGrid",s+o,f);tt.p.records++;tt.p.reccount++;$(tt).triggerHandler("jqGridAfterInsertRow",[n,e,e]);ot&&tt.p.afterInsertRow.call(tt,n,e,e);rt++;tt.p.datatype==="local"&&(it[tt.p.localReader.id]=b,tt.p._index[b]=tt.p.data.length,tt.p.data.push(it),it={})}tt.p.altRows!==!0||a||(i==="last"?(tt.rows.length-1)%2==0&&$(tt.rows[tt.rows.length-1]).addClass(y):$(tt.rows).each(function(n){n%2==0?$(this).addClass(y):$(this).removeClass(y)}));tt.updatepager(!0,!0);k=!0})),k},footerData:function(n,t,i){function o(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}var r,u=!1,f={},e;return n===undefined&&(n="get"),typeof i!="boolean"&&(i=!0),n=n.toLowerCase(),this.each(function(){var s=this,h;if(!s.grid||!s.p.footerrow||n==="set"&&o(t))return!1;u=!0;$(this.p.colModel).each(function(o){r=this.name;n==="set"?t[r]!==undefined&&(h=i?s.formatter("",t[r],o,t,"edit"):t[r],e=this.title?{title:$.jgrid.stripHtml(h)}:{},$("tr.footrow td:eq("+o+")",s.grid.sDiv).html(h).attr(e),u=!0):n==="get"&&(f[r]=$("tr.footrow td:eq("+o+")",s.grid.sDiv).html())})}),n==="get"?f:u},showHideCol:function(n,t){return this.each(function(){var i=this,s=!1,h=$.jgrid.cell_width?0:i.p.cellLayout,f,r,e,o,u;if(i.grid&&(typeof n=="string"&&(n=[n]),t=t!=="none"?"":"none",r=t===""?!0:!1,e=i.p.groupHeader&&($.isArray(i.p.groupHeader)||$.isFunction(i.p.groupHeader)),e&&$(i).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(u){if($.inArray(this.name,n)!==-1&&this.hidden===r){if(i.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr[role=row]",i.grid.hDiv).each(function(){$(this.cells[u]).css("display",t)});$(i.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[u]).css("display",t)});i.p.footerrow&&$("tr.footrow td:eq("+u+")",i.grid.sDiv).css("display",t);f=parseInt(this.width,10);t==="none"?i.p.tblwidth-=f+h:i.p.tblwidth+=f+h;this.hidden=!r;s=!0;$(i).triggerHandler("jqGridShowHideCol",[r,this.name,u])}}),s===!0&&(i.p.shrinkToFit!==!0||isNaN(i.p.height)||(i.p.tblwidth+=parseInt(i.p.scrollOffset,10)),$(i).jqGrid("setGridWidth",i.p.shrinkToFit===!0?i.p.tblwidth:i.p.width)),e))for(o=$.extend([],i.p.groupHeader),i.p.groupHeader=null,u=0;u<o.length;u++)$(i).jqGrid("setGroupHeaders",o[u])})},hideCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"none")})},showCol:function(n){return this.each(function(){$(this).jqGrid("showHideCol",n,"")})},remapColumns:function(n,t,i){function u(t){var i;i=t.length?$.makeArray(t):$.extend({},t);$.each(n,function(n){t[n]=i[this]})}function f(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(n,function(){var n=i[this];n&&t.appendChild(n)})})}var r=this.get(0);u(r.p.colModel);u(r.p.colNames);u(r.grid.headers);f($("thead:first",r.grid.hDiv),i&&":not(.ui-jqgrid-labels)");t&&f($("#"+$.jgrid.jqID(r.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");r.p.footerrow&&f($("tbody:first",r.grid.sDiv));r.p.remapColumns&&(r.p.remapColumns.length?u(r.p.remapColumns):r.p.remapColumns=$.makeArray(n));r.p.lastsort=$.inArray(r.p.lastsort,n);r.p.treeGrid&&(r.p.expColInd=$.inArray(r.p.expColInd,n));$(r).triggerHandler("jqGridRemapColumns",[n,t,i])},setGridWidth:function(n,t){return this.each(function(){var a,y;if(this.grid){var i=this,r,f=0,e=$.jgrid.cell_width?0:i.p.cellLayout,u,o=0,v=!1,c=i.p.scrollOffset,l,s=0,h;if(typeof t!="boolean"&&(t=i.p.shrinkToFit),!isNaN(n)){if(n=parseInt(n,10),i.grid.width=i.p.width=n,$("#gbox_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$("#gview_"+$.jgrid.jqID(i.p.id)).css("width",n+"px"),$(i.grid.bDiv).css("width",n+"px"),$(i.grid.hDiv).css("width",n+"px"),i.p.pager&&$(i.p.pager).css("width",n+"px"),i.p.toppager&&$(i.p.toppager).css("width",n+"px"),i.p.toolbar[0]===!0&&($(i.grid.uDiv).css("width",n+"px"),i.p.toolbar[1]==="both"&&$(i.grid.ubDiv).css("width",n+"px")),i.p.footerrow&&$(i.grid.sDiv).css("width",n+"px"),t===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),t===!0){if($.each(i.p.colModel,function(){this.hidden===!1&&(r=this.widthOrg,f+=r+e,this.fixed?s+=r+e:o++)}),o===0)return;if(i.p.tblwidth=f,l=n-e*o-s,isNaN(i.p.height)||($(i.grid.bDiv)[0].clientHeight<$(i.grid.bDiv)[0].scrollHeight||i.rows.length===1)&&(v=!0,l-=c),f=0,a=i.grid.cols.length>0,$.each(i.p.colModel,function(n){if(this.hidden===!1&&!this.fixed){if(r=this.widthOrg,r=Math.round(l*r/(i.p.tblwidth-e*o-s)),r<0)return;this.width=r;f+=r;i.grid.headers[n].width=r;i.grid.headers[n].el.style.width=r+"px";i.p.footerrow&&(i.grid.footers[n].style.width=r+"px");a&&(i.grid.cols[n].style.width=r+"px");u=n}}),!u)return;h=0;v?n-s-(f+e*o)!==c&&(h=n-s-(f+e*o)-c):Math.abs(n-s-(f+e*o))!==1&&(h=n-s-(f+e*o));i.p.colModel[u].width+=h;i.p.tblwidth=f+h+e*o+s;i.p.tblwidth>n?(y=i.p.tblwidth-parseInt(n,10),i.p.tblwidth=n,r=i.p.colModel[u].width=i.p.colModel[u].width-y):r=i.p.colModel[u].width;i.grid.headers[u].width=r;i.grid.headers[u].el.style.width=r+"px";a&&(i.grid.cols[u].style.width=r+"px");i.p.footerrow&&(i.grid.footers[u].style.width=r+"px")}i.p.tblwidth&&($("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px"),$("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px"),i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft,i.p.footerrow&&$("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px"))}}})},setGridHeight:function(n){return this.each(function(){var t=this,i;t.grid&&(i=$(t.grid.bDiv),i.css({height:n+(isNaN(n)?"":"px")}),t.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(i.height()-16),t.p.height=n,t.p.scroll&&t.grid.populateVisible())})},setCaption:function(n){return this.each(function(){var t=$(this).jqGrid("getStyleUI",this.p.styleUI+".common","cornertop",!0);this.p.caption=n;$(".ui-jqgrid-title, .ui-jqgrid-title-rtl",this.grid.cDiv).html(n);$(this.grid.cDiv).show();$(this.grid.hDiv).removeClass(t)})},setLabel:function(n,t,i,r){return this.each(function(){var f=this,e=-1,u,o;if(f.grid){if(n!==undefined)$(f.p.colModel).each(function(t){if(this.name===n)return e=t,!1});else return;e>=0&&(u=$("tr.ui-jqgrid-labels th:eq("+e+")",f.grid.hDiv),t&&(o=$(".s-ico",u),$("[id^=jqgh_]",u).empty().html(t).append(o),f.p.colNames[e]=t),i&&(typeof i=="string"?$(u).addClass(i):$(u).css(i)),typeof r=="object"&&$(u).attr(r))}})},setCell:function(n,t,i,r,u,f){return this.each(function(){var e=this,o=-1,l,a,s,c,y;if(e.grid&&(isNaN(t)?$(e.p.colModel).each(function(n){if(this.name===t)return o=n,!1}):o=parseInt(t,10),o>=0&&(s=$(e).jqGrid("getGridRowById",n),s))){var h=$("td:eq("+o+")",s),v=0,p=[];if(i!==""||f===!0){if(s.cells!==undefined)while(v<s.cells.length)p.push(s.cells[v].innerHTML),v++;l=e.formatter(n,i,o,p,"edit");a=e.p.colModel[o].title?{title:$.jgrid.stripHtml(l)}:{};e.p.treeGrid&&$(".tree-wrap",$(h)).length>0?$("span",$(h)).html(l).attr(a):$(h).html(l).attr(a);e.p.datatype==="local"&&(c=e.p.colModel[o],i=c.formatter&&typeof c.formatter=="string"&&c.formatter==="date"?$.unformat.date.call(e,i,c):i,y=e.p._index[$.jgrid.stripPref(e.p.idPrefix,n)],y!==undefined&&(e.p.data[y][c.name]=i))}typeof r=="string"?$(h).addClass(r):r&&$(h).css(r);typeof u=="object"&&$(h).attr(u)}})},getCell:function(n,t){var i=!1;return this.each(function(){var u=this,r=-1,f;if(u.grid&&(isNaN(t)?$(u.p.colModel).each(function(n){if(this.name===t)return r=n,!1}):r=parseInt(t,10),r>=0&&(f=$(u).jqGrid("getGridRowById",n),f)))try{i=$.unformat.call(u,$("td:eq("+r+")",f),{rowId:f.id,colModel:u.p.colModel[r]},r)}catch(e){i=$.jgrid.htmlDecode($("td:eq("+r+")",f).html())}}),i},getCol:function(n,t,i){var r=[],f,s=0,o,e,u;return t=typeof t!="boolean"?!1:t,i===undefined&&(i=!1),this.each(function(){var h=this,c=-1;if(h.grid&&(isNaN(n)?$(h.p.colModel).each(function(t){if(this.name===n)return c=t,!1}):c=parseInt(n,10),c>=0)){var a=h.rows.length,l=0,v=0;if(a&&a>0){while(l<a){if($(h.rows[l]).hasClass("jqgrow")){try{f=$.unformat.call(h,$(h.rows[l].cells[c]),{rowId:h.rows[l].id,colModel:h.p.colModel[c]},c)}catch(y){f=$.jgrid.htmlDecode(h.rows[l].cells[c].innerHTML)}i?(u=parseFloat(f),isNaN(u)||(s+=u,e===undefined&&(e=o=u),o=Math.min(o,u),e=Math.max(e,u),v++)):t?r.push({id:h.rows[l].id,value:f}):r.push(f)}l++}if(i)switch(i.toLowerCase()){case"sum":r=s;break;case"avg":r=s/v;break;case"count":r=a-1;break;case"min":r=o;break;case"max":r=e}}}}),r},clearGridData:function(n){return this.each(function(){var t=this,i;t.grid&&(typeof n!="boolean"&&(n=!1),t.p.deepempty?$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove():(i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0],$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)),t.p.footerrow&&n&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1))})},getInd:function(n,t){var r=!1,i;return this.each(function(){i=$(this).jqGrid("getGridRowById",n);i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(n){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},n||{});return this.each(function(){var n=this;$("body").is("[role]")||$("body").attr("role","application");n.p.scrollrows=t.scrollingRows;$(n).keydown(function(i){var f=$(n).find("tr[tabindex=0]")[0],u,r,e,o=n.p.treeReader.expanded_field;if(f)if(e=n.p._index[$.jgrid.stripPref(n.p.idPrefix,f.id)],i.keyCode===37||i.keyCode===38||i.keyCode===39||i.keyCode===40){if(i.keyCode===38){if(r=f.previousSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.previousSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u,!0,i);i.preventDefault()}if(i.keyCode===40){if(r=f.nextSibling,u="",r)if($(r).is(":hidden")){while(r)if(r=r.nextSibling,!$(r).is(":hidden")&&$(r).hasClass("jqgrow")){u=r.id;break}}else u=r.id;$(n).jqGrid("setSelection",u,!0,i);i.preventDefault()}i.keyCode===37&&(n.p.treeGrid&&n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$(n).triggerHandler("jqGridKeyLeft",[n.p.selrow]),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(n,n.p.selrow));i.keyCode===39&&(n.p.treeGrid&&!n.p.data[e][o]&&$(f).find("div.treeclick").trigger("click"),$(n).triggerHandler("jqGridKeyRight",[n.p.selrow]),$.isFunction(t.onRightKey)&&t.onRightKey.call(n,n.p.selrow))}else i.keyCode===13?($(n).triggerHandler("jqGridKeyEnter",[n.p.selrow]),$.isFunction(t.onEnter)&&t.onEnter.call(n,n.p.selrow)):i.keyCode===32&&($(n).triggerHandler("jqGridKeySpace",[n.p.selrow]),$.isFunction(t.onSpace)&&t.onSpace.call(n,n.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(n){var i=!1,t;return this.each(function(){n!==undefined&&(t=this.p._index[$.jgrid.stripPref(this.p.idPrefix,n)],t>=0&&(i=this.p.data[t]))}),i},progressBar:function(n){return n=$.extend({htmlcontent:"",method:"hide",loadtype:"disable"},n||{}),this.each(function(){var i=n.method==="show"?!0:!1,t=$("#load_"+$.jgrid.jqID(this.p.id)),r,u,f=$(window).scrollTop();n.htmlcontent!==""&&t.html(n.htmlcontent);switch(n.loadtype){case"enable":t.toggle(i);break;case"block":$("#lui_"+$.jgrid.jqID(this.p.id)).toggle(i);t.toggle(i)}t.is(":visible")&&(r=t.offsetParent(),t.css("top",""),t.offset().top<f&&(u=Math.min(10+f-r.offset().top,r.height()-t.height()),t.css("top",u+"px")))})},getColProp:function(n){var r={},u=this[0],i,t;if(!u.grid)return!1;for(i=u.p.colModel,t=0;t<i.length;t++)if(i[t].name===n){r=i[t];break}return r},setColProp:function(n,t){return this.each(function(){if(this.grid&&t)for(var r=this.p.colModel,i=0;i<r.length;i++)if(r[i].name===n){$.extend(!0,this.p.colModel[i],t);break}})},sortGrid:function(n,t,i){return this.each(function(){var r=this,f=-1,u,e=!1,o;if(r.grid){for(n||(n=r.p.sortname),u=0;u<r.p.colModel.length;u++)if(r.p.colModel[u].index===n||r.p.colModel[u].name===n){f=u;r.p.frozenColumns===!0&&r.p.colModel[u].frozen===!0&&(e=r.grid.fhDiv.find("#"+r.p.id+"_"+n));break}f!==-1&&(o=r.p.colModel[f].sortable,e||(e=r.grid.headers[f].el),typeof o!="boolean"&&(o=!0),typeof t!="boolean"&&(t=!1),o&&r.sortData("jqgh_"+r.p.id+"_"+n,f,t,i,e))}})},setGridState:function(n){return this.each(function(){if(this.grid){var t=this,i=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_open",!0),r=$(this).jqGrid("getStyleUI",this.p.styleUI+".base","icon_caption_close",!0);n==="hidden"?($(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideUp("fast"),t.p.pager&&$(t.p.pager).slideUp("fast"),t.p.toppager&&$(t.p.toppager).slideUp("fast"),t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&$(t.grid.ubDiv).slideUp("fast"),$(t.grid.uDiv).slideUp("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideUp("fast"),$(".ui-jqgrid-headlink",t.grid.cDiv).removeClass(i).addClass(r),t.p.gridstate="hidden"):n==="visible"&&($(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(t.p.id)).slideDown("fast"),t.p.pager&&$(t.p.pager).slideDown("fast"),t.p.toppager&&$(t.p.toppager).slideDown("fast"),t.p.toolbar[0]===!0&&(t.p.toolbar[1]==="both"&&$(t.grid.ubDiv).slideDown("fast"),$(t.grid.uDiv).slideDown("fast")),t.p.footerrow&&$(".ui-jqgrid-sdiv","#gbox_"+$.jgrid.jqID(t.p.id)).slideDown("fast"),$(".ui-jqgrid-headlink",t.grid.cDiv).removeClass(r).addClass(i),t.p.gridstate="visible")}})},setFrozenColumns:function(){return this.each(function(){var r,s,u,e,o,c,v,y,h;if(this.grid){var n=this,l=n.p.colModel,f=0,p=l.length,t=-1,a=!1,w=$(n).jqGrid("getStyleUI",n.p.styleUI+".base","headerDiv",!0,"ui-jqgrid-hdiv"),i=$(n).jqGrid("getStyleUI",n.p.styleUI+".common","hover",!0);if(n.p.subGrid!==!0&&n.p.treeGrid!==!0&&n.p.cellEdit!==!0&&!n.p.sortable&&!n.p.scroll){for(n.p.rownumbers&&f++,n.p.multiselect&&f++;f<p;){if(l[f].frozen===!0)a=!0,t=f;else break;f++}t>=0&&a&&(r=n.p.caption?$(n.grid.cDiv).outerHeight():0,s=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(n.p.id)).height(),n.p.toppager&&(r=r+$(n.grid.topDiv).outerHeight()),n.p.toolbar[0]===!0&&n.p.toolbar[1]!=="bottom"&&(r=r+$(n.grid.uDiv).outerHeight()),n.grid.fhDiv=$('<div style="position:absolute;'+(n.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+r+"px;height:"+s+'px;" class="frozen-div '+w+'"><\/div>'),n.grid.fbDiv=$('<div style="position:absolute;'+(n.p.direction==="rtl"?"right:0;":"left:0;")+"top:"+(parseInt(r,10)+parseInt(s,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"><\/div>'),$("#gview_"+$.jgrid.jqID(n.p.id)).append(n.grid.fhDiv),u=$(".ui-jqgrid-htable","#gview_"+$.jgrid.jqID(n.p.id)).clone(!0),n.p.groupHeader?($("tr.jqg-first-row-header, tr.jqg-third-row-header",u).each(function(){$("th:gt("+t+")",this).remove()}),e=-1,o=-1,$("tr.jqg-second-row-header th",u).each(function(){return c=parseInt($(this).attr("colspan"),10),v=parseInt($(this).attr("rowspan"),10),v&&(e++,o++),c&&(e=e+c,o++),e===t?(o=t,!1):void 0}),e!==t&&(o=t),$("tr.jqg-second-row-header",u).each(function(){$("th:gt("+o+")",this).remove()})):$("tr",u).each(function(){$("th:gt("+t+")",this).remove()}),$(u).width(1),$(n.grid.fhDiv).append(u).mousemove(function(t){if(n.grid.resizing)return n.grid.dragMove(t),!1}),n.p.footerrow&&(y=$(".ui-jqgrid-bdiv","#gview_"+$.jgrid.jqID(n.p.id)).height(),n.grid.fsDiv=$('<div style="position:absolute;left:0px;top:'+(parseInt(r,10)+parseInt(s,10)+parseInt(y,10)+1)+'px;" class="frozen-sdiv ui-jqgrid-sdiv"><\/div>'),$("#gview_"+$.jgrid.jqID(n.p.id)).append(n.grid.fsDiv),h=$(".ui-jqgrid-ftable","#gview_"+$.jgrid.jqID(n.p.id)).clone(!0),$("tr",h).each(function(){$("td:gt("+t+")",this).remove()}),$(h).width(1),$(n.grid.fsDiv).append(h)),$(n).bind("jqGridResizeStop.setFrozenColumns",function(t,i,r){var e=$(".ui-jqgrid-htable",n.grid.fhDiv),u,f;$("th:eq("+r+")",e).width(i);u=$(".ui-jqgrid-btable",n.grid.fbDiv);$("tr:first td:eq("+r+")",u).width(i);n.p.footerrow&&(f=$(".ui-jqgrid-ftable",n.grid.fsDiv),$("tr:first td:eq("+r+")",f).width(i))}),$("#gview_"+$.jgrid.jqID(n.p.id)).append(n.grid.fbDiv),$(n.grid.fbDiv).bind("mousewheel DOMMouseScroll",function(t){var i=$(n.grid.bDiv).scrollTop();t.originalEvent.wheelDelta>0||t.originalEvent.detail<0?$(n.grid.bDiv).scrollTop(i-25):$(n.grid.bDiv).scrollTop(i+25);t.preventDefault()}),n.p.hoverrows===!0&&$("#"+$.jgrid.jqID(n.p.id)).unbind("mouseover").unbind("mouseout"),$(n).bind("jqGridAfterGridComplete.setFrozenColumns",function(){$("#"+$.jgrid.jqID(n.p.id)+"_frozen").remove();$(n.grid.fbDiv).height($(n.grid.bDiv).height()-16);var r=$("#"+$.jgrid.jqID(n.p.id)).clone(!0);$("tr[role=row]",r).each(function(){$("td[role=gridcell]:gt("+t+")",this).remove()});$(r).width(1).attr("id",n.p.id+"_frozen");$(n.grid.fbDiv).append(r);n.p.hoverrows===!0&&($("tr.jqgrow",r).hover(function(){$(this).addClass(i);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)).addClass(i)},function(){$(this).removeClass(i);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)).removeClass(i)}),$("tr.jqgrow","#"+$.jgrid.jqID(n.p.id)).hover(function(){$(this).addClass(i);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)+"_frozen").addClass(i)},function(){$(this).removeClass(i);$("#"+$.jgrid.jqID(this.id),"#"+$.jgrid.jqID(n.p.id)+"_frozen").removeClass(i)}));r=null}),n.grid.hDiv.loading||$(n).triggerHandler("jqGridAfterGridComplete"),n.p.frozenColumns=!0)}}})},destroyFrozenColumns:function(){return this.each(function(){var n,i,t;this.grid&&this.p.frozenColumns===!0&&(n=this,i=$(n).jqGrid("getStyleUI",n.p.styleUI+".common","hover",!0),$(n.grid.fhDiv).remove(),$(n.grid.fbDiv).remove(),n.grid.fhDiv=null,n.grid.fbDiv=null,n.p.footerrow&&($(n.grid.fsDiv).remove(),n.grid.fsDiv=null),$(this).unbind(".setFrozenColumns"),n.p.hoverrows===!0&&$("#"+$.jgrid.jqID(n.p.id)).bind("mouseover",function(n){t=$(n.target).closest("tr.jqgrow");$(t).attr("class")!=="ui-subgrid"&&$(t).addClass(i)}).bind("mouseout",function(n){t=$(n.target).closest("tr.jqgrow");$(t).removeClass(i)}),this.p.frozenColumns=!1)})},resizeColumn:function(n,t){return this.each(function(){var u=this.grid,i=this.p,f=i.colModel,r,o=f.length,e,s;if(typeof n=="string"){for(r=0;r<o;r++)if(f[r].name===n){n=r;break}}else n=parseInt(n,10);if((t=parseInt(t,10),typeof n=="number"&&!(n<0)&&!(n>f.length-1)&&typeof t=="number")&&!(t<i.minColWidth)){if(i.forceFit)for(i.nv=0,r=n+1;r<o;r++)if(f[r].hidden!==!0){i.nv=r-n;break}if(u.resizing={idx:n},e=t-u.headers[n].width,i.forceFit){if(s=u.headers[n+i.nv].width-e,s<i.minColWidth)return;u.headers[n+i.nv].newWidth=u.headers[n+i.nv].width-e}u.newWidth=i.tblwidth+e;u.headers[n].newWidth=t;u.dragEnd(!1)}})},getStyleUI:function(n,t,i,r){try{var u="",e=n.split("."),f="";i||(u="class=",f='"');r==null&&(r="");switch(e.length){case 1:u+=f+r+" "+$.jgrid.styleUI[e[0]][t]+f;break;case 2:u+=f+r+" "+$.jgrid.styleUI[e[0]][e[1]][t]+f}}catch(o){u=""}return $.trim(u)},resizeGrid:function(n){return this.each(function(){var t=this;n===undefined&&(n=500);setTimeout(function(){var n=$(window).width(),i=$("#gbox_"+$.jgrid.jqID(t.p.id)).parent().width(),r=t.p.width;r=n-i>3?i:n;$("#"+$.jgrid.jqID(t.p.id)).jqGrid("setGridWidth",r)},n)})}});$.jgrid.extend({editCell:function(n,t,i){return this.each(function(){var r=this,f,u,e,o,h=$(this).jqGrid("getStyleUI",r.p.styleUI+".common","highlight",!0),c=$(this).jqGrid("getStyleUI",r.p.styleUI+".common","hover",!0),v=$(this).jqGrid("getStyleUI",r.p.styleUI+".celledit","inputClass",!0),l,a,s;if(r.grid&&r.p.cellEdit===!0){if(t=parseInt(t,10),r.p.selrow=r.rows[n].id,r.p.knv||$(r).jqGrid("GridNav"),r.p.savedRow.length>0){if(i===!0&&n==r.p.iRow&&t==r.p.iCol)return;$(r).jqGrid("saveCell",r.p.savedRow[0].id,r.p.savedRow[0].ic)}else window.setTimeout(function(){$("#"+$.jgrid.jqID(r.p.knv)).attr("tabindex","-1").focus()},1);if(o=r.p.colModel[t],f=o.name,f!=="subgrid"&&f!=="cb"&&f!=="rn"){if(e=$("td:eq("+t+")",r.rows[n]),o.editable!==!0||i!==!0||e.hasClass("not-editable-cell")||$.isFunction(r.p.isCellEditable)&&!r.p.isCellEditable.call(r,f,n,t))parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&$(r.rows[r.p.iRow]).removeClass("selected-row "+c).find("td:eq("+r.p.iCol+")").removeClass("edit-cell "+h),e.addClass("edit-cell "+h),$(r.rows[n]).addClass("selected-row "+c),u=e.html().replace(/\&#160\;/ig,""),$(r).triggerHandler("jqGridSelectCell",[r.rows[n].id,f,u,n,t]),$.isFunction(r.p.onSelectCell)&&r.p.onSelectCell.call(r,r.rows[n].id,f,u,n,t);else{parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&$(r.rows[r.p.iRow]).removeClass("selected-row "+c).find("td:eq("+r.p.iCol+")").removeClass("edit-cell "+h);$(e).addClass("edit-cell "+h);$(r.rows[n]).addClass("selected-row "+c);try{u=$.unformat.call(r,e,{rowId:r.rows[n].id,colModel:o},t)}catch(y){u=o.edittype&&o.edittype==="textarea"?$(e).text():$(e).html()}r.p.autoencode&&(u=$.jgrid.htmlDecode(u));o.edittype||(o.edittype="text");r.p.savedRow.push({id:n,ic:t,name:f,v:u});(u==="&nbsp;"||u==="&#160;"||u.length===1&&u.charCodeAt(0)===160)&&(u="");$.isFunction(r.p.formatCell)&&(l=r.p.formatCell.call(r,r.rows[n].id,f,u,n,t),l!==undefined&&(u=l));$(r).triggerHandler("jqGridBeforeEditCell",[r.rows[n].id,f,u,n,t]);$.isFunction(r.p.beforeEditCell)&&r.p.beforeEditCell.call(r,r.rows[n].id,f,u,n,t);a=$.extend({},o.editoptions||{},{id:n+"_"+f,name:f,rowId:r.rows[n].id,oper:"edit"});s=$.jgrid.createEl.call(r,o.edittype,a,u,!0,$.extend({},$.jgrid.ajaxOptions,r.p.ajaxSelectOptions||{}));$.inArray(o.edittype,["text","textarea","password","select"])>-1&&$(s).addClass(v);$(e).html("").append(s).attr("tabindex","0");$.jgrid.bindEv.call(r,s,a);window.setTimeout(function(){$(s).focus()},1);$("input, select, textarea",e).bind("keydown",function(i){if(i.keyCode===27&&($("input.hasDatepicker",e).length>0?$(".ui-datepicker").is(":hidden")?$(r).jqGrid("restoreCell",n,t):$("input.hasDatepicker",e).datepicker("hide"):$(r).jqGrid("restoreCell",n,t)),i.keyCode===13&&!i.shiftKey)return $(r).jqGrid("saveCell",n,t),!1;if(i.keyCode===9){if(r.grid.hDiv.loading)return!1;i.shiftKey?$(r).jqGrid("prevCell",n,t):$(r).jqGrid("nextCell",n,t)}i.stopPropagation()});$(r).triggerHandler("jqGridAfterEditCell",[r.rows[n].id,f,u,n,t]);$.isFunction(r.p.afterEditCell)&&r.p.afterEditCell.call(r,r.rows[n].id,f,u,n,t)}r.p.iCol=t;r.p.iRow=n}}})},saveCell:function(n,t){return this.each(function(){var i=this,b,h=$.jgrid.getRegional(this,"errors"),o=$.jgrid.getRegional(this,"edit"),k,d,v,y,p,nt,a,e,it,rt,w;if(i.grid&&i.p.cellEdit===!0){if(b=i.p.savedRow.length>=1?0:null,b!==null){var c=$("td:eq("+t+")",i.rows[n]),r,f,s=i.p.colModel[t],u=s.name,l=$.jgrid.jqID(u),tt=$(c).offset();switch(s.edittype){case"select":s.editoptions.multiple?(k=$("#"+n+"_"+l,i.rows[n]),d=[],r=$(k).val(),r?r.join(","):r="",$("option:selected",k).each(function(n,t){d[n]=$(t).text()}),f=d.join(",")):(r=$("#"+n+"_"+l+" option:selected",i.rows[n]).val(),f=$("#"+n+"_"+l+" option:selected",i.rows[n]).text());s.formatter&&(f=r);break;case"checkbox":v=["Yes","No"];s.editoptions&&(v=s.editoptions.value.split(":"));r=$("#"+n+"_"+l,i.rows[n]).is(":checked")?v[0]:v[1];f=r;break;case"password":case"text":case"textarea":case"button":r=$("#"+n+"_"+l,i.rows[n]).val();f=r;break;case"custom":try{if(s.editoptions&&$.isFunction(s.editoptions.custom_value))if(r=s.editoptions.custom_value.call(i,$(".customelement",c),"get"),r===undefined)throw"e2";else f=r;else throw"e1";}catch(g){g==="e1"?$.jgrid.info_dialog(h.errcap,"function 'custom_value' "+o.msg.nodefined,o.bClose,{styleUI:i.p.styleUI}):g==="e2"?$.jgrid.info_dialog(h.errcap,"function 'custom_value' "+o.msg.novalue,o.bClose,{styleUI:i.p.styleUI}):$.jgrid.info_dialog(h.errcap,g.message,o.bClose,{styleUI:i.p.styleUI})}}if(f!==i.p.savedRow[b].v)if(y=$(i).triggerHandler("jqGridBeforeSaveCell",[i.rows[n].id,u,r,n,t]),y&&(r=y,f=y),$.isFunction(i.p.beforeSaveCell)&&(p=i.p.beforeSaveCell.call(i,i.rows[n].id,u,r,n,t),p&&(r=p,f=p)),nt=$.jgrid.checkValues.call(i,r,t),nt[0]===!0){if(a=$(i).triggerHandler("jqGridBeforeSubmitCell",[i.rows[n].id,u,r,n,t])||{},$.isFunction(i.p.beforeSubmitCell)&&(a=i.p.beforeSubmitCell.call(i,i.rows[n].id,u,r,n,t),a||(a={})),$("input.hasDatepicker",c).length>0&&$("input.hasDatepicker",c).datepicker("hide"),i.p.cellsubmit==="remote")if(i.p.cellurl)e={},i.p.autoencode&&(r=$.jgrid.htmlEncode(r)),e[u]=r,w=i.p.prmNames,it=w.id,rt=w.oper,e[it]=$.jgrid.stripPref(i.p.idPrefix,i.rows[n].id),e[rt]=w.editoper,e=$.extend(a,e),$(i).jqGrid("progressBar",{method:"show",loadtype:i.p.loadui,htmlcontent:$.jgrid.getRegional(i,"defaults.savetext")}),i.grid.hDiv.loading=!0,$.ajax($.extend({url:i.p.cellurl,data:$.isFunction(i.p.serializeCellData)?i.p.serializeCellData.call(i,e):e,type:"POST",complete:function(s,l){if($(i).jqGrid("progressBar",{method:"hide",loadtype:i.p.loadui}),i.grid.hDiv.loading=!1,l==="success"){var a=$(i).triggerHandler("jqGridAfterSubmitCell",[i,s,e.id,u,r,n,t])||[!0,""];a[0]===!0&&$.isFunction(i.p.afterSubmitCell)&&(a=i.p.afterSubmitCell.call(i,s,e.id,u,r,n,t));a[0]===!0?($(c).empty(),$(i).jqGrid("setCell",i.rows[n].id,t,f,!1,!1,!0),$(c).addClass("dirty-cell"),$(i.rows[n]).addClass("edited"),$(i).triggerHandler("jqGridAfterSaveCell",[i.rows[n].id,u,r,n,t]),$.isFunction(i.p.afterSaveCell)&&i.p.afterSaveCell.call(i,i.rows[n].id,u,r,n,t),i.p.savedRow.splice(0,1)):($.jgrid.info_dialog(h.errcap,a[1],o.bClose,{styleUI:i.p.styleUI}),i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",n,t))}},error:function(r,u,f){$("#lui_"+$.jgrid.jqID(i.p.id)).hide();i.grid.hDiv.loading=!1;$(i).triggerHandler("jqGridErrorCell",[r,u,f]);$.isFunction(i.p.errorCell)?i.p.errorCell.call(i,r,u,f):$.jgrid.info_dialog(h.errcap,r.status+" : "+r.statusText+"<br/>"+u,o.bClose,{styleUI:i.p.styleUI});i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",n,t)}},$.jgrid.ajaxOptions,i.p.ajaxCellOptions||{}));else try{$.jgrid.info_dialog(h.errcap,h.nourl,o.bClose,{styleUI:i.p.styleUI});i.p.restoreCellonFail&&$(i).jqGrid("restoreCell",n,t)}catch(g){}i.p.cellsubmit==="clientArray"&&($(c).empty(),$(i).jqGrid("setCell",i.rows[n].id,t,f,!1,!1,!0),$(c).addClass("dirty-cell"),$(i.rows[n]).addClass("edited"),$(i).triggerHandler("jqGridAfterSaveCell",[i.rows[n].id,u,r,n,t]),$.isFunction(i.p.afterSaveCell)&&i.p.afterSaveCell.call(i,i.rows[n].id,u,r,n,t),i.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){$.jgrid.info_dialog(h.errcap,r+" "+nt[1],o.bClose,{styleUI:i.p.styleUI,top:tt.top+40,left:tt.left})},100);$(i).jqGrid("restoreCell",n,t)}catch(g){}else $(i).jqGrid("restoreCell",n,t)}window.setTimeout(function(){$("#"+$.jgrid.jqID(i.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(n,t){return this.each(function(){var i=this,r,u;if(i.grid&&i.p.cellEdit===!0){if(r=i.p.savedRow.length>=1?0:null,r!==null){if(u=$("td:eq("+t+")",i.rows[n]),$.isFunction($.fn.datepicker))try{$("input.hasDatepicker",u).datepicker("hide")}catch(f){}$(u).empty().attr("tabindex","-1");$(i).jqGrid("setCell",i.rows[n].id,t,i.p.savedRow[r].v,!1,!1,!0);$(i).triggerHandler("jqGridAfterRestoreCell",[i.rows[n].id,i.p.savedRow[r].v,n,t]);$.isFunction(i.p.afterRestoreCell)&&i.p.afterRestoreCell.call(i,i.rows[n].id,i.p.savedRow[r].v,n,t);i.p.savedRow.splice(0,1)}window.setTimeout(function(){$("#"+i.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(n,t){return this.each(function(){var i=this,u=!1,r;if(i.grid&&i.p.cellEdit===!0){for(r=t+1;r<i.p.colModel.length;r++)if(i.p.colModel[r].editable===!0&&(!$.isFunction(i.p.isCellEditable)||i.p.isCellEditable.call(i,i.p.colModel[r].name,n,r))){u=r;break}u!==!1?$(i).jqGrid("editCell",n,u,!0):i.p.savedRow.length>0&&$(i).jqGrid("saveCell",n,t)}})},prevCell:function(n,t){return this.each(function(){var i=this,u=!1,r;if(i.grid&&i.p.cellEdit===!0){for(r=t-1;r>=0;r--)if(i.p.colModel[r].editable===!0&&(!$.isFunction(i.p.isCellEditable)||i.p.isCellEditable.call(i,i.p.colModel[r].name,n,r))){u=r;break}u!==!1?$(i).jqGrid("editCell",n,u,!0):i.p.savedRow.length>0&&$(i).jqGrid("saveCell",n,t)}})},GridNav:function(){return this.each(function(){function r(t,i,r){if(r.substr(0,1)==="v"){var f=$(n.grid.bDiv)[0].clientHeight,e=$(n.grid.bDiv)[0].scrollTop,o=n.rows[t].offsetTop+n.rows[t].clientHeight,s=n.rows[t].offsetTop;r==="vd"&&o>=f&&($(n.grid.bDiv)[0].scrollTop=$(n.grid.bDiv)[0].scrollTop+n.rows[t].clientHeight);r==="vu"&&s<e&&($(n.grid.bDiv)[0].scrollTop=$(n.grid.bDiv)[0].scrollTop-n.rows[t].clientHeight)}if(r==="h"){var h=$(n.grid.bDiv)[0].clientWidth,u=$(n.grid.bDiv)[0].scrollLeft,c=n.rows[t].cells[i].offsetLeft+n.rows[t].cells[i].clientWidth,l=n.rows[t].cells[i].offsetLeft;c>=h+parseInt(u,10)?$(n.grid.bDiv)[0].scrollLeft=$(n.grid.bDiv)[0].scrollLeft+n.rows[t].cells[i].clientWidth:l<u&&($(n.grid.bDiv)[0].scrollLeft=$(n.grid.bDiv)[0].scrollLeft-n.rows[t].cells[i].clientWidth)}}function f(t,i){var u,r;if(i==="lft")for(u=t+1,r=t;r>=0;r--)if(n.p.colModel[r].hidden!==!0){u=r;break}if(i==="rgt")for(u=t-1,r=t;r<n.p.colModel.length;r++)if(n.p.colModel[r].hidden!==!0){u=r;break}return u}var n=this,u,t,i;n.grid&&n.p.cellEdit===!0&&(n.p.knv=n.p.id+"_kn",u=$("<div style='position:fixed;top:0px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+n.p.knv+"'><\/div><\/div>"),$(u).insertBefore(n.grid.cDiv),$("#"+n.p.knv).focus().keydown(function(u){i=u.keyCode;n.p.direction==="rtl"&&(i===37?i=39:i===39&&(i=37));switch(i){case 38:n.p.iRow-1>0&&(r(n.p.iRow-1,n.p.iCol,"vu"),$(n).jqGrid("editCell",n.p.iRow-1,n.p.iCol,!1));break;case 40:n.p.iRow+1<=n.rows.length-1&&(r(n.p.iRow+1,n.p.iCol,"vd"),$(n).jqGrid("editCell",n.p.iRow+1,n.p.iCol,!1));break;case 37:n.p.iCol-1>=0&&(t=f(n.p.iCol-1,"lft"),r(n.p.iRow,t,"h"),$(n).jqGrid("editCell",n.p.iRow,t,!1));break;case 39:n.p.iCol+1<=n.p.colModel.length-1&&(t=f(n.p.iCol+1,"rgt"),r(n.p.iRow,t,"h"),$(n).jqGrid("editCell",n.p.iRow,t,!1));break;case 13:parseInt(n.p.iCol,10)>=0&&parseInt(n.p.iRow,10)>=0&&$(n).jqGrid("editCell",n.p.iRow,n.p.iCol,!0);break;default:return!0}return!1}))})},getChangedCells:function(n){var t=[];return n||(n="all"),this.each(function(){var i=this,r;i.grid&&i.p.cellEdit===!0&&$(i.rows).each(function(u){var f={};$(this).hasClass("edited")&&($("td",this).each(function(t){if(r=i.p.colModel[t].name,r!=="cb"&&r!=="subgrid")if(n==="dirty"){if($(this).hasClass("dirty-cell"))try{f[r]=$.unformat.call(i,this,{rowId:i.rows[u].id,colModel:i.p.colModel[t]},t)}catch(e){f[r]=$.jgrid.htmlDecode($(this).html())}}else try{f[r]=$.unformat.call(i,this,{rowId:i.rows[u].id,colModel:i.p.colModel[t]},t)}catch(e){f[r]=$.jgrid.htmlDecode($(this).html())}}),f.id=this.id,t.push(f))})}),t}});$.extend($.jgrid,{showModal:function(n){n.w.show()},closeModal:function(n){n.w.hide().attr("aria-hidden","true");n.o&&n.o.remove()},hideModal:function(n,t){var i,e,r,u,f,o;if(t=$.extend({jqm:!0,gb:"",removemodal:!1,formprop:!1,form:""},t||{}),i=t.gb&&typeof t.gb=="string"&&t.gb.substr(0,6)==="#gbox_"?$("#"+t.gb.substr(6))[0]:!1,!t.onClose||(e=i?t.onClose.call(i,n):t.onClose(n),typeof e!="boolean"||e)){if(t.formprop&&i&&t.form&&(r=$(n)[0].style.height,u=$(n)[0].style.width,r.indexOf("px")>-1&&(r=parseFloat(r)),u.indexOf("px")>-1&&(u=parseFloat(u)),t.form==="edit"?(f="#"+$.jgrid.jqID("FrmGrid_"+t.gb.substr(6)),o="formProp"):t.form==="view"&&(f="#"+$.jgrid.jqID("ViewGrid_"+t.gb.substr(6)),o="viewProp"),$(i).data(o,{top:parseFloat($(n).css("top")),left:parseFloat($(n).css("left")),width:u,height:r,dataheight:$(f).height(),datawidth:$(f).width()})),$.fn.jqm&&t.jqm===!0)$(n).attr("aria-hidden","true").jqmHide();else{if(t.gb!=="")try{$(".jqgrid-overlay:first",t.gb).hide()}catch(s){}$(n).hide().attr("aria-hidden","true")}t.removemodal&&$(n).remove()}},findPos:function(n){var t=0,i=0;if(n.offsetParent)do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent);return[t,i]},createModal:function(n,t,i,r,u,f,e){var s,a,v,h,y,p,w;i=$.extend(!0,{},$.jgrid.jqModal||{},i);var b=this,k=$(i.gbox).attr("dir")==="rtl"?!0:!1,c=$.jgrid.styleUI[i.styleUI||"jQueryUI"].modal,l=$.jgrid.styleUI[i.styleUI||"jQueryUI"].common,o=document.createElement("div");if(e=$.extend({},e||{}),o.className="ui-jqdialog "+c.modal,o.id=n.themodal,s=document.createElement("div"),s.className="ui-jqdialog-titlebar "+c.header,s.id=n.modalhead,$(s).append("<span class='ui-jqdialog-title'>"+i.caption+"<\/span>"),a=$("<a class='ui-jqdialog-titlebar-close "+l.cornerall+"'><\/a>").hover(function(){a.addClass(l.hover)},function(){a.removeClass(l.hover)}).append("<span class='"+l.icon_base+" "+c.icon_close+"'><\/span>"),$(s).append(a),k?(o.dir="rtl",$(".ui-jqdialog-title",s).css("float","right"),$(".ui-jqdialog-titlebar-close",s).css("left",.3+"em")):(o.dir="ltr",$(".ui-jqdialog-title",s).css("float","left"),$(".ui-jqdialog-titlebar-close",s).css("right",.3+"em")),v=document.createElement("div"),$(v).addClass("ui-jqdialog-content "+c.content).attr("id",n.modalcontent),$(v).append(t),o.appendChild(v),$(o).prepend(s),f===!0?$("body").append(o):typeof f=="string"?$(f).append(o):$(o).insertBefore(r),$(o).css(e),i.jqModal===undefined&&(i.jqModal=!0),h={},$.fn.jqm&&i.jqModal===!0?(i.left===0&&i.top===0&&i.overlay&&(y=[],y=$.jgrid.findPos(u),i.left=y[0]+4,i.top=y[1]+4),h.top=i.top+"px",h.left=i.left):(i.left!==0||i.top!==0)&&(h.left=i.left,h.top=i.top+"px"),$("a.ui-jqdialog-titlebar-close",s).click(function(){var t=$("#"+$.jgrid.jqID(n.themodal)).data("onClose")||i.onClose,r=$("#"+$.jgrid.jqID(n.themodal)).data("gbox")||i.gbox;return b.hideModal("#"+$.jgrid.jqID(n.themodal),{gb:r,jqm:i.jqModal,onClose:t,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""}),!1}),i.width!==0&&i.width||(i.width=300),i.height!==0&&i.height||(i.height=200),i.zIndex||(p=$(r).parents("*[role=dialog]").filter(":first").css("z-index"),i.zIndex=p?parseInt(p,10)+2:950),w=0,k&&h.left&&!f&&(w=$(i.gbox).width()-(isNaN(i.width)?0:parseInt(i.width,10))-8,h.left=parseInt(h.left,10)+parseInt(w,10)),h.left&&(h.left+="px"),$(o).css($.extend({width:isNaN(i.width)?"auto":i.width+"px",height:isNaN(i.height)?"auto":i.height+"px",zIndex:i.zIndex,overflow:"hidden"},h)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":n.modalhead,"aria-hidden":"true"}),i.drag===undefined&&(i.drag=!0),i.resize===undefined&&(i.resize=!0),i.drag)if($(s).css("cursor","move"),$.fn.tinyDraggable)$(o).tinyDraggable({handle:"#"+$.jgrid.jqID(s.id)});else try{$(o).draggable({handle:$("#"+$.jgrid.jqID(s.id))})}catch(d){}if(i.resize)if($.fn.jqResize)$(o).append("<div class='jqResize "+c.resizable+" "+l.icon_base+" "+c.icon_resizable+"'><\/div>"),$("#"+$.jgrid.jqID(n.themodal)).jqResize(".jqResize",n.scrollelm?"#"+$.jgrid.jqID(n.scrollelm):!1);else try{$(o).resizable({handles:"se, sw",alsoResize:n.scrollelm?"#"+$.jgrid.jqID(n.scrollelm):!1})}catch(g){}i.closeOnEscape===!0&&$(o).keydown(function(t){if(t.which===27){var r=$("#"+$.jgrid.jqID(n.themodal)).data("onClose")||i.onClose;b.hideModal("#"+$.jgrid.jqID(n.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:r,removemodal:i.removemodal||!1,formprop:!i.recreateForm||!1,form:i.form||""})}})},viewModal:function(n,t){if(t=$.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:$.jgrid.showModal,onHide:$.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},t||{}),t.focusField===undefined&&(t.focusField=0),t.focusField=typeof t.focusField=="number"&&t.focusField>=0?parseInt(t.focusField,10):typeof t.focusField!="boolean"||t.focusField?0:!1,$.fn.jqm&&t.jqm===!0)t.jqM?$(n).attr("aria-hidden","false").jqm(t).jqmShow():$(n).attr("aria-hidden","false").jqmShow();else if(t.gbox!==""&&($(".jqgrid-overlay:first",t.gbox).show(),$(n).data("gbox",t.gbox)),$(n).show().attr("aria-hidden","false"),t.focusField>=0)try{$(":input:visible",n)[parseInt(t.focusField,10)].focus()}catch(i){}},info_dialog:function(n,t,i,r){var u={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]},e,f;$.extend(!0,u,$.jgrid.jqModal||{},{caption:"<b>"+n+"<\/b>"},r||{});var o=u.jqModal,l=this,c=$.jgrid.styleUI[u.styleUI||"jQueryUI"].modal,s=$.jgrid.styleUI[u.styleUI||"jQueryUI"].common;if($.fn.jqm&&!o&&(o=!1),e="",u.buttons.length>0)for(f=0;f<u.buttons.length;f++)u.buttons[f].id===undefined&&(u.buttons[f].id="info_button_"+f),e+="<a id='"+u.buttons[f].id+"' class='fm-button "+s.button+"'>"+u.buttons[f].text+"<\/a>";var a=isNaN(u.dataheight)?u.dataheight:u.dataheight+"px",v="text-align:"+u.align+";",h="<div id='info_id'>";h+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+a+";"+v+"'>"+t+"<\/div>";h+=i?"<div class='"+c.header+"' style='text-align:"+u.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a id='closedialog' class='fm-button "+s.button+"'>"+i+"<\/a>"+e+"<\/div>":e!==""?"<div class='"+c.header+"' style='text-align:"+u.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+e+"<\/div>":"";h+="<\/div>";try{$("#info_dialog").attr("aria-hidden")==="false"&&$.jgrid.hideModal("#info_dialog",{jqm:o});$("#info_dialog").remove()}catch(y){}$.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},h,u,"","",!0);e&&$.each(u.buttons,function(n){$("#"+$.jgrid.jqID(this.id),"#info_id").bind("click",function(){return u.buttons[n].onClick.call($("#info_dialog")),!1})});$("#closedialog","#info_id").click(function(){return l.hideModal("#info_dialog",{jqm:o,onClose:$("#info_dialog").data("onClose")||u.onClose,gb:$("#info_dialog").data("gbox")||u.gbox}),!1});$(".fm-button","#info_dialog").hover(function(){$(this).addClass(s.hover)},function(){$(this).removeClass(s.hover)});$.isFunction(u.beforeOpen)&&u.beforeOpen();$.jgrid.viewModal("#info_dialog",{onHide:function(n){n.w.hide().remove();n.o&&n.o.remove()},modal:u.modal,jqm:o});$.isFunction(u.afterOpen)&&u.afterOpen();try{$("#info_dialog").focus()}catch(p){}},bindEv:function(n,t){var i=this;$.isFunction(t.dataInit)&&t.dataInit.call(i,n,t);t.dataEvents&&$.each(t.dataEvents,function(){this.data!==undefined?$(n).bind(this.type,this.data,this.fn):$(n).bind(this.type,this.fn)})},createEl:function(n,t,i,r,u){function y(n,t,i){var r=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value","oper"];i!==undefined&&$.isArray(i)&&$.merge(r,i);$.each(t,function(t,i){$.inArray(t,r)===-1&&$(n).attr(t,i)});t.hasOwnProperty("id")||$(n).attr("id",$.jgrid.randId())}var f="",o=this,it,g,c,l,p,b,a,rt,v,e,h,s,nt,ut,ft,d,tt,w,et;switch(n){case"textarea":f=document.createElement("textarea");r?t.cols||$(f).css({width:"98%"}):t.cols||(t.cols=20);t.rows||(t.rows=2);(i==="&nbsp;"||i==="&#160;"||i.length===1&&i.charCodeAt(0)===160)&&(i="");f.value=i;y(f,t);$(f).attr({role:"textbox",multiline:"true"});break;case"checkbox":f=document.createElement("input");f.type="checkbox";t.value?(g=t.value.split(":"),i===g[0]&&(f.checked=!0,f.defaultChecked=!0),f.value=g[0],$(f).attr("offval",g[1])):(it=(i+"").toLowerCase(),it.search(/(false|f|0|no|n|off|undefined)/i)<0&&it!==""?(f.checked=!0,f.defaultChecked=!0,f.value=i):f.value="on",$(f).attr("offval","off"));y(f,t,["value"]);$(f).attr("role","checkbox");break;case"select":if(f=document.createElement("select"),f.setAttribute("role","select"),l=[],t.multiple===!0?(c=!0,f.multiple="multiple",$(f).attr("aria-multiselectable","true")):c=!1,t.dataUrl!=null){p=null;b=t.postData||u.postData;try{p=t.rowId}catch(k){}o.p&&o.p.idPrefix&&(p=$.jgrid.stripPref(o.p.idPrefix,p));$.ajax($.extend({url:$.isFunction(t.dataUrl)?t.dataUrl.call(o,p,i,String(t.name)):t.dataUrl,type:"GET",dataType:"html",data:$.isFunction(b)?b.call(o,p,i,String(t.name)):b,context:{elem:f,options:t,vl:i},success:function(n){var i=[],r=this.elem,u=this.vl,t=$.extend({},this.options),h=t.multiple===!0,c=t.cacheUrlData===!0,e="",s,f=$.isFunction(t.buildSelect)?t.buildSelect.call(o,n):n;typeof f=="string"&&(f=$($.trim(f)).html());f&&($(r).append(f),y(r,t,b?["postData"]:undefined),t.size===undefined&&(t.size=h?3:1),h?(i=u.split(","),i=$.map(i,function(n){return $.trim(n)})):i[0]=$.trim(u),setTimeout(function(){if($("option",r).each(function(n){s=$(this).text();u=$(this).val()||s;c&&(e+=(n!==0?";":"")+u+":"+s);n===0&&r.multiple&&(this.selected=!1);$(this).attr("role","option");($.inArray($.trim(s),i)>-1||$.inArray($.trim(u),i)>-1)&&(this.selected="selected")}),c)if(t.oper==="edit")$(o).jqGrid("setColProp",t.name,{editoptions:{buildSelect:null,dataUrl:null,value:e}});else if(t.oper==="search")$(o).jqGrid("setColProp",t.name,{searchoptions:{dataUrl:null,value:e}});else if(t.oper==="filter"&&$("#fbox_"+o.p.id)[0].p){var f=$("#fbox_"+o.p.id)[0].p.columns,n;$.each(f,function(){return n=this.index||this.name,t.name===n?(this.searchoptions.dataUrl=null,this.searchoptions.value=e,!1):void 0})}$(o).triggerHandler("jqGridAddEditAfterSelectUrlComplete",[r])},0))}},u||{}))}else if(t.value){if(t.size===undefined&&(t.size=c?3:1),c&&(l=i.split(","),l=$.map(l,function(n){return $.trim(n)})),typeof t.value=="function"&&(t.value=t.value()),ut=t.separator===undefined?":":t.separator,ft=t.delimiter===undefined?";":t.delimiter,typeof t.value=="string")for(rt=t.value.split(ft),a=0;a<rt.length;a++)v=rt[a].split(ut),v.length>2&&(v[1]=$.map(v,function(n,t){if(t>0)return n}).join(ut)),e=document.createElement("option"),e.setAttribute("role","option"),e.value=v[0],e.innerHTML=v[1],f.appendChild(e),c||$.trim(v[0])!==$.trim(i)&&$.trim(v[1])!==$.trim(i)||(e.selected="selected"),c&&($.inArray($.trim(v[1]),l)>-1||$.inArray($.trim(v[0]),l)>-1)&&(e.selected="selected");else if(Object.prototype.toString.call(t.value)==="[object Array]")for(h=t.value,a=0;a<h.length;a++)h[a].length===2&&(s=h[a][0],nt=h[a][1],e=document.createElement("option"),e.setAttribute("role","option"),e.value=s,e.innerHTML=nt,f.appendChild(e),c||$.trim(s)!==$.trim(i)&&$.trim(nt)!==$.trim(i)||(e.selected="selected"),c&&($.inArray($.trim(nt),l)>-1||$.inArray($.trim(s),l)>-1)&&(e.selected="selected"));else if(typeof t.value=="object"){h=t.value;for(s in h)h.hasOwnProperty(s)&&(e=document.createElement("option"),e.setAttribute("role","option"),e.value=s,e.innerHTML=h[s],f.appendChild(e),c||$.trim(s)!==$.trim(i)&&$.trim(h[s])!==$.trim(i)||(e.selected="selected"),c&&($.inArray($.trim(h[s]),l)>-1||$.inArray($.trim(s),l)>-1)&&(e.selected="selected"))}y(f,t,["value"])}break;case"image":case"file":f=document.createElement("input");f.type=n;y(f,t);break;case"custom":f=document.createElement("span");try{if($.isFunction(t.custom_element))if(d=t.custom_element.call(o,i,t),d)d=$(d).addClass("customelement").attr({id:t.id,name:t.name}),$(f).empty().append(d);else throw"e2";else throw"e1";}catch(k){tt=$.jgrid.getRegional(o,"errors");w=$.jgrid.getRegional(o,"edit");k==="e1"?$.jgrid.info_dialog(tt.errcap,"function 'custom_element' "+w.msg.nodefined,w.bClose,{styleUI:o.p.styleUI}):k==="e2"?$.jgrid.info_dialog(tt.errcap,"function 'custom_element' "+w.msg.novalue,w.bClose,{styleUI:o.p.styleUI}):$.jgrid.info_dialog(tt.errcap,typeof k=="string"?k:k.message,w.bClose,{styleUI:o.p.styleUI})}break;default:et=n==="button"?"button":"textbox";f=document.createElement("input");f.type=n;f.value=i;y(f,t);n!=="button"&&(r?t.size||$(f).css({width:"96%"}):t.size||(t.size=20));$(f).attr("role",et)}return f},checkDate:function(n,t){var a=function(n){return n%4==0&&(n%100!=0||n%400==0)?29:28},i={},h,c,l,s;if(n=n.toLowerCase(),h=n.indexOf("/")!==-1?"/":n.indexOf("-")!==-1?"-":n.indexOf(".")!==-1?".":"/",n=n.split(h),t=t.split(h),t.length!==3)return!1;for(var u=-1,f,e=-1,o=-1,r=0;r<n.length;r++)c=isNaN(t[r])?0:parseInt(t[r],10),i[n[r]]=c,f=n[r],f.indexOf("y")!==-1&&(u=r),f.indexOf("m")!==-1&&(o=r),f.indexOf("d")!==-1&&(e=r);return(f=n[u]==="y"||n[u]==="yyyy"?4:n[u]==="yy"?2:-1,l=[0,31,29,31,30,31,30,31,31,30,31,30,31],u===-1)?!1:(s=i[n[u]].toString(),f===2&&s.length===1&&(f=1),s.length!==f||i[n[u]]===0&&t[u]!=="00")?!1:o===-1?!1:(s=i[n[o]].toString(),s.length<1||i[n[o]]<1||i[n[o]]>12)?!1:e===-1?!1:(s=i[n[e]].toString(),s.length<1||i[n[e]]<1||i[n[e]]>31||i[n[o]]===2&&i[n[e]]>a(i[n[u]])||i[n[e]]>l[i[n[o]]])?!1:!0},isEmpty:function(n){return n.match(/^\s+$/)||n===""?!0:!1},checkTime:function(n){var t;if(!$.jgrid.isEmpty(n))if(t=n.match(/^(\d{1,2}):(\d{2})([apAP][Mm])?$/),t){if(t[3]){if(t[1]<1||t[1]>12)return!1}else if(t[1]>23)return!1;if(t[2]>59)return!1}else return!1;return!0},checkValues:function(n,t,i,r){var u,s,f,c,p,l=this,o=l.p.colModel,e=$.jgrid.getRegional(this,"edit.msg"),a,h,v,y;if(i===undefined)if(typeof t=="string"){for(s=0,p=o.length;s<p;s++)if(o[s].name===t){u=o[s].editrules;t=s;o[s].formoptions!=null&&(f=o[s].formoptions.label);break}}else t>=0&&(u=o[t].editrules);else u=i,f=r===undefined?"_":r;if(u){if(f||(f=l.p.colNames!=null?l.p.colNames[t]:o[t].label),u.required===!0&&$.jgrid.isEmpty(n))return[!1,f+": "+e.required,""];if(h=u.required===!1?!1:!0,u.number===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&isNaN(n))return[!1,f+": "+e.number,""];if(u.minValue!==undefined&&!isNaN(u.minValue)&&parseFloat(n)<parseFloat(u.minValue))return[!1,f+": "+e.minValue+" "+u.minValue,""];if(u.maxValue!==undefined&&!isNaN(u.maxValue)&&parseFloat(n)>parseFloat(u.maxValue))return[!1,f+": "+e.maxValue+" "+u.maxValue,""];if(u.email===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&(v=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,!v.test(n)))return[!1,f+": "+e.email,""];if(u.integer===!0&&!(h===!1&&$.jgrid.isEmpty(n))){if(isNaN(n))return[!1,f+": "+e.integer,""];if(n%1!=0||n.indexOf(".")!==-1)return[!1,f+": "+e.integer,""]}if(u.date===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&(o[t].formatoptions&&o[t].formatoptions.newformat?(c=o[t].formatoptions.newformat,a=$.jgrid.getRegional(l,"formatter.date.masks"),a&&a.hasOwnProperty(c)&&(c=a[c])):c=o[t].datefmt||"Y-m-d",!$.jgrid.checkDate(c,n)))return[!1,f+": "+e.date+" - "+c,""];if(u.time===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&!$.jgrid.checkTime(n))return[!1,f+": "+e.date+" - hh:mm (am/pm)",""];if(u.url===!0&&!(h===!1&&$.jgrid.isEmpty(n))&&(v=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!v.test(n)))return[!1,f+": "+e.url,""];if(u.custom===!0&&!(h===!1&&$.jgrid.isEmpty(n)))return $.isFunction(u.custom_func)?(y=u.custom_func.call(l,n,f,t),$.isArray(y)?y:[!1,e.customarray,""]):[!1,e.customfcheck,""]}return[!0,"",""]}});$.fn.jqFilter=function(n){var i,r,t;if(typeof n=="string"){if(i=$.fn.jqFilter[n],!i)throw"jqFilter - No such method: "+n;return r=$.makeArray(arguments).slice(1),i.apply(this,r)}return t=$.extend(!0,{filter:null,columns:[],sortStrategy:null,onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[],operands:null,numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},$.jgrid.filter,n||{}),this.each(function(){var u,f,n,e,s;if(!this.filter&&(this.p=t,(this.p.filter===null||this.p.filter===undefined)&&(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]}),this.p.sortStrategy!=null&&$.isFunction(this.p.sortStrategy)&&this.p.columns.sort(this.p.sortStrategy),f=this.p.columns.length,e=/msie/i.test(navigator.userAgent)&&!window.opera,this.p.initFilter=$.extend(!0,{},this.p.filter),f)){for(u=0;u<f;u++)n=this.p.columns[u],n.stype?n.inputtype=n.stype:n.inputtype||(n.inputtype="text"),n.sorttype?n.searchtype=n.sorttype:n.searchtype||(n.searchtype="string"),n.hidden===undefined&&(n.hidden=!1),n.label||(n.label=n.name),n.index&&(n.name=n.index),n.hasOwnProperty("searchoptions")||(n.searchoptions={}),n.hasOwnProperty("searchrules")||(n.searchrules={});var o=function(){return $("#"+$.jgrid.jqID(t.id))[0]||null},h=o(),i=$.jgrid.styleUI[h.p.styleUI||"jQueryUI"].filter,r=$.jgrid.styleUI[h.p.styleUI||"jQueryUI"].common;this.p.showQuery&&$(this).append("<table class='queryresult "+i.table_widget+"' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'><\/td><\/tr><\/tbody><\/table>");s=function(n,i){var r=[!0,""],u=o();if($.isFunction(i.searchrules))r=i.searchrules.call(u,n,i);else if($.jgrid&&$.jgrid.checkValues)try{r=$.jgrid.checkValues.call(u,n,-1,i.searchrules,i.label)}catch(f){}r&&r.length&&r[0]===!1&&(t.error=!r[0],t.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",$.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){$("table.group:first",this).remove();var n=this.createTableForGroup(t.filter,null);$(this).append(n);$.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(n,u){var e=this,f,o=$("<table class='group "+i.table_widget+" ui-search-table' style='border:0px none;'><tbody><\/tbody><\/table>"),v="left",y,s,c,p,d,l,w,h,b,a,g,k;if(this.p.direction==="rtl"&&(v="right",o.attr("dir","rtl")),u===null&&o.append("<tr class='error' style='display:none;'><th colspan='5' class='"+r.error+"' align='"+v+"'><\/th><\/tr>"),y=$("<tr><\/tr>"),o.append(y),s=$("<th colspan='5' align='"+v+"'><\/th>"),y.append(s),this.p.ruleButtons===!0){for(c=$("<select class='opsel "+i.srSelect+"'><\/select>"),s.append(c),p="",f=0;f<t.groupOps.length;f++)d=n.groupOp===e.p.groupOps[f].op?" selected='selected'":"",p+="<option value='"+e.p.groupOps[f].op+"'"+d+">"+e.p.groupOps[f].text+"<\/option>";c.append(p).bind("change",function(){n.groupOp=$(c).val();e.onchange()})}if(l="<span><\/span>",this.p.groupButton&&(l=$("<input type='button' value='+ {}' title='Add subgroup' class='add-group "+r.button+"'/>"),l.bind("click",function(){return n.groups===undefined&&(n.groups=[]),n.groups.push({groupOp:t.groupOps[0].op,rules:[],groups:[]}),e.reDraw(),e.onchange(),!1})),s.append(l),this.p.ruleButtons===!0&&(w=$("<input type='button' value='+' title='Add rule' class='add-rule ui-add "+r.button+"'/>"),w.bind("click",function(){var i;for(n.rules===undefined&&(n.rules=[]),f=0;f<e.p.columns.length;f++){var t=e.p.columns[f].search===undefined?!0:e.p.columns[f].search,r=e.p.columns[f].hidden===!0,u=e.p.columns[f].searchoptions.searchhidden===!0;if(u&&t||t&&!r){h=e.p.columns[f];break}}return i=h.searchoptions.sopt?h.searchoptions.sopt:e.p.sopt?e.p.sopt:$.inArray(h.searchtype,e.p.strarr)!==-1?e.p.stropts:e.p.numopts,n.rules.push({field:h.name,op:i[0],data:""}),e.reDraw(),!1}),s.append(w)),u!==null&&(b=$("<input type='button' value='-' title='Delete group' class='delete-group "+r.button+"'/>"),s.append(b),b.bind("click",function(){for(f=0;f<u.groups.length;f++)if(u.groups[f]===n){u.groups.splice(f,1);break}return e.reDraw(),e.onchange(),!1})),n.groups!==undefined)for(f=0;f<n.groups.length;f++)a=$("<tr><\/tr>"),o.append(a),g=$("<td class='first'><\/td>"),a.append(g),k=$("<td colspan='4'><\/td>"),k.append(this.createTableForGroup(n.groups[f],n)),a.append(k);if(n.groupOp===undefined&&(n.groupOp=e.p.groupOps[0].op),n.rules!==undefined)for(f=0;f<n.rules.length;f++)o.append(this.createTableRowForRule(n.rules[f],n));return o};this.createTableRowForRule=function(n,u){var f=this,v=o(),y=$("<tr><\/tr>"),h,a,c,s,b="",k,nt,d,l,p,tt,it,w,g,rt,ut,ft;for(y.append("<td class='first'><\/td>"),nt=$("<td class='columns'><\/td>"),y.append(nt),d=$("<select class='"+i.srSelect+"'><\/select>"),p=[],nt.append(d),d.bind("change",function(){var t,r,u,o;for(n.field=$(d).val(),c=$(this).parents("tr:first"),$(".data",c).empty(),h=0;h<f.p.columns.length;h++)if(f.p.columns[h].name===n.field){s=f.p.columns[h];break}if(s){for(s.searchoptions.id=$.jgrid.randId(),s.searchoptions.name=n.field,s.searchoptions.oper="filter",e&&s.inputtype==="text"&&(s.searchoptions.size||(s.searchoptions.size=10)),t=$.jgrid.createEl.call(v,s.inputtype,s.searchoptions,"",!0,f.p.ajaxSelectOptions||{},!0),$(t).addClass("input-elm "+i.srInput),a=s.searchoptions.sopt?s.searchoptions.sopt:f.p.sopt?f.p.sopt:$.inArray(s.searchtype,f.p.strarr)!==-1?f.p.stropts:f.p.numopts,r="",u=0,p=[],$.each(f.p.ops,function(){p.push(this.oper)}),h=0;h<a.length;h++)l=$.inArray(a[h],p),l!==-1&&(u===0&&(n.op=f.p.ops[l].oper),r+="<option value='"+f.p.ops[l].oper+"'>"+f.p.ops[l].text+"<\/option>",u++);$(".selectopts",c).empty().append(r);$(".selectopts",c)[0].selectedIndex=0;$.jgrid.msie&&$.jgrid.msiever()<9&&(o=parseInt($("select.selectopts",c)[0].offsetWidth,10)+1,$(".selectopts",c).width(o),$(".selectopts",c).css("width","auto"));$(".data",c).append(t);$.jgrid.bindEv.call(v,t,s.searchoptions);$(".input-elm",c).bind("change",function(t){var i=t.target;n.data=i.nodeName.toUpperCase()==="SPAN"&&s.searchoptions&&$.isFunction(s.searchoptions.custom_value)?s.searchoptions.custom_value.call(v,$(i).children(".customelement:first"),"get"):i.value;f.onchange()});setTimeout(function(){n.data=$(t).val();f.onchange()},0)}}),tt=0,h=0;h<f.p.columns.length;h++){var et=f.p.columns[h].search===undefined?!0:f.p.columns[h].search,ot=f.p.columns[h].hidden===!0,st=f.p.columns[h].searchoptions.searchhidden===!0;(st&&et||et&&!ot)&&(k="",n.field===f.p.columns[h].name&&(k=" selected='selected'",tt=h),b+="<option value='"+f.p.columns[h].name+"'"+k+">"+f.p.columns[h].label+"<\/option>")}for(d.append(b),it=$("<td class='operators'><\/td>"),y.append(it),s=t.columns[tt],s.searchoptions.id=$.jgrid.randId(),e&&s.inputtype==="text"&&(s.searchoptions.size||(s.searchoptions.size=10)),s.searchoptions.name=n.field,s.searchoptions.oper="filter",w=$.jgrid.createEl.call(v,s.inputtype,s.searchoptions,n.data,!0,f.p.ajaxSelectOptions||{},!0),(n.op==="nu"||n.op==="nn")&&($(w).attr("readonly","true"),$(w).attr("disabled","true")),g=$("<select class='selectopts "+i.srSelect+"'><\/select>"),it.append(g),g.bind("change",function(){n.op=$(g).val();c=$(this).parents("tr:first");var t=$(".input-elm",c)[0];n.op==="nu"||n.op==="nn"?(n.data="",t.tagName.toUpperCase()!=="SELECT"&&(t.value=""),t.setAttribute("readonly","true"),t.setAttribute("disabled","true")):(t.tagName.toUpperCase()==="SELECT"&&(n.data=t.value),t.removeAttribute("readonly"),t.removeAttribute("disabled"));f.onchange()}),a=s.searchoptions.sopt?s.searchoptions.sopt:f.p.sopt?f.p.sopt:$.inArray(s.searchtype,f.p.strarr)!==-1?f.p.stropts:f.p.numopts,b="",$.each(f.p.ops,function(){p.push(this.oper)}),h=0;h<a.length;h++)l=$.inArray(a[h],p),l!==-1&&(k=n.op===f.p.ops[l].oper?" selected='selected'":"",b+="<option value='"+f.p.ops[l].oper+"'"+k+">"+f.p.ops[l].text+"<\/option>");return g.append(b),rt=$("<td class='data'><\/td>"),y.append(rt),rt.append(w),$.jgrid.bindEv.call(v,w,s.searchoptions),$(w).addClass("input-elm "+i.srInput).bind("change",function(){n.data=s.inputtype==="custom"?s.searchoptions.custom_value.call(v,$(this).children(".customelement:first"),"get"):$(this).val();f.onchange()}),ut=$("<td><\/td>"),y.append(ut),this.p.ruleButtons===!0&&(ft=$("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del "+r.button+"'/>"),ut.append(ft),ft.bind("click",function(){for(h=0;h<u.rules.length;h++)if(u.rules[h]===n){u.rules.splice(h,1);break}return f.reDraw(),f.onchange(),!1})),y};this.getStringForGroup=function(n){var t="(",i;if(n.groups!==undefined)for(i=0;i<n.groups.length;i++){t.length>1&&(t+=" "+n.groupOp+" ");try{t+=this.getStringForGroup(n.groups[i])}catch(r){alert(r)}}if(n.rules!==undefined)try{for(i=0;i<n.rules.length;i++)t.length>1&&(t+=" "+n.groupOp+" "),t+=this.getStringForRule(n.rules[i])}catch(u){alert(u)}return(t+=")",t==="()")?"":t};this.getStringForRule=function(n){for(var e="",i="",f,r,u=0;u<this.p.ops.length;u++)if(this.p.ops[u].oper===n.op){e=this.p.operands.hasOwnProperty(n.op)?this.p.operands[n.op]:"";i=this.p.ops[u].oper;break}for(u=0;u<this.p.columns.length;u++)if(this.p.columns[u].name===n.field){f=this.p.columns[u];break}return f===undefined?"":(r=n.data,(i==="bw"||i==="bn")&&(r=r+"%"),(i==="ew"||i==="en")&&(r="%"+r),(i==="cn"||i==="nc")&&(r="%"+r+"%"),(i==="in"||i==="ni")&&(r=" ("+r+")"),t.errorcheck&&s(n.data,f),$.inArray(f.searchtype,["int","integer","float","number","currency"])!==-1||i==="nn"||i==="nu"?n.field+" "+e+" "+r:n.field+" "+e+' "'+r+'"')};this.resetFilter=function(){this.p.filter=$.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){$("th."+r.error,this).html("");$("tr.error",this).hide()};this.showError=function(){$("th."+r.error,this).html(this.p.errmsg);$("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(t.filter)};this.toString=function(){function i(t){if(n.p.errorcheck){for(var r,i=0;i<n.p.columns.length;i++)if(n.p.columns[i].name===t.field){r=n.p.columns[i];break}r&&s(t.data,r)}return t.op+"(item."+t.field+",'"+t.data+"')"}function t(n){var r="(",u;if(n.groups!==undefined)for(u=0;u<n.groups.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=t(n.groups[u]);if(n.rules!==undefined)for(u=0;u<n.rules.length;u++)r.length>1&&(r+=n.groupOp==="OR"?" || ":" && "),r+=i(n.rules[u]);return(r+=")",r==="()")?"":r}var n=this;return t(this.p.filter)};this.reDraw();this.p.showQuery&&this.onchange();this.filter=!0}})};$.extend($.fn.jqFilter,{toSQLString:function(){var n="";return this.each(function(){n=this.toUserFriendlyString()}),n},filterData:function(){var n;return this.each(function(){n=this.p.filter}),n},getParameter:function(n){return n!==undefined&&this.p.hasOwnProperty(n)?this.p[n]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(n){typeof n=="string"&&(n=$.jgrid.parse(n));this.each(function(){this.p.filter=n;this.reDraw();this.onchange()})}});$.jgrid.extend({filterToolbar:function(n){var t=$.jgrid.getRegional(this[0],"search");return n=$.extend({autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw",searchOperators:!1,resetIcon:"x",operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^","in":"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},t,n||{}),this.each(function(){var i=this;if(!i.p.filterToolbar){$(i).data("filterToolbar")||$(i).data("filterToolbar",n);i.p.force_regional&&(n=$.extend(n,t));var h=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].filter,e=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,c=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].base,u=function(){var e={},c=0,o,u,l={},r,a,t,s,h,f;$.each(i.p.colModel,function(){var t=$("#gs_"+i.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);if(u=this.index||this.name,r=n.searchOperators?t.parent().prev().children("a").attr("soper")||n.defaultSearch:this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:this.stype==="select"?"eq":n.defaultSearch,o=this.stype==="custom"&&$.isFunction(this.searchoptions.custom_value)&&t.length>0&&t[0].nodeName.toUpperCase()==="SPAN"?this.searchoptions.custom_value.call(i,t.children(".customelement:first"),"get"):t.val(),o||r==="nu"||r==="nn")e[u]=o,l[u]=r,c++;else try{delete i.p.postData[u]}catch(f){}});a=c>0?!0:!1;n.stringResult===!0||i.p.datatype==="local"||n.searchOperators===!0?(t='{"groupOp":"'+n.groupOp+'","rules":[',s=0,$.each(e,function(n,i){s>0&&(t+=",");t+='{"field":"'+n+'",';t+='"op":"'+l[n]+'",';i+="";t+='"data":"'+i.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';s++}),t+="]}",$.extend(i.p.postData,{filters:t}),$.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):$.extend(i.p.postData,e);i.p.searchurl&&(h=i.p.url,$(i).jqGrid("setGridParam",{url:i.p.searchurl}));f=$(i).triggerHandler("jqGridToolbarBeforeSearch")==="stop"?!0:!1;!f&&$.isFunction(n.beforeSearch)&&(f=n.beforeSearch.call(i));f||$(i).jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[{page:1}]);h&&$(i).jqGrid("setGridParam",{url:h});$(i).triggerHandler("jqGridToolbarAfterSearch");$.isFunction(n.afterSearch)&&n.afterSearch.call(i)},l=function(t){var f={},o=0,u,c,r,s,h,e;t=typeof t!="boolean"?!0:t;$.each(i.p.colModel,function(){var n,t=$("#gs_"+i.p.idPrefix+$.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv);this.searchoptions&&this.searchoptions.defaultValue!==undefined&&(n=this.searchoptions.defaultValue);u=this.index||this.name;switch(this.stype){case"select":if(t.find("option").each(function(t){return t===0&&(this.selected=!0),$(this).val()===n?(this.selected=!0,!1):void 0}),n!==undefined)f[u]=n,o++;else try{delete i.p.postData[u]}catch(r){}break;case"text":if(t.val(n||""),n!==undefined)f[u]=n,o++;else try{delete i.p.postData[u]}catch(e){}break;case"custom":$.isFunction(this.searchoptions.custom_value)&&t.length>0&&t[0].nodeName.toUpperCase()==="SPAN"&&this.searchoptions.custom_value.call(i,t.children(".customelement:first"),"set",n||"")}});c=o>0?!0:!1;i.p.resetsearch=!0;n.stringResult===!0||i.p.datatype==="local"?(r='{"groupOp":"'+n.groupOp+'","rules":[',s=0,$.each(f,function(n,t){s>0&&(r+=",");r+='{"field":"'+n+'",';r+='"op":"eq",';t+="";r+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';s++}),r+="]}",$.extend(i.p.postData,{filters:r}),$.each(["searchField","searchString","searchOper"],function(n,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})):$.extend(i.p.postData,f);i.p.searchurl&&(h=i.p.url,$(i).jqGrid("setGridParam",{url:i.p.searchurl}));e=$(i).triggerHandler("jqGridToolbarBeforeClear")==="stop"?!0:!1;!e&&$.isFunction(n.beforeClear)&&(e=n.beforeClear.call(i));e||t&&$(i).jqGrid("setGridParam",{search:c}).trigger("reloadGrid",[{page:1}]);h&&$(i).jqGrid("setGridParam",{url:h});$(i).triggerHandler("jqGridToolbarAfterClear");$.isFunction(n.afterClear)&&n.afterClear()},a=function(){var t=$("tr.ui-search-toolbar",i.grid.hDiv),n=i.p.frozenColumns===!0?$("tr.ui-search-toolbar",i.grid.fhDiv):!1;t.css("display")==="none"?(t.show(),n&&n.show()):(t.hide(),n&&n.hide())},v=function(t,r,f){var a,c;$("#sopt_menu").remove();r=parseInt(r,10);f=parseInt(f,10)+18;for(var p=$(".ui-jqgrid-view").css("font-size")||"11px",l='<ul id="sopt_menu" class="ui-search-menu modal-content" role="menu" tabindex="0" style="font-size:'+p+";left:"+r+"px;top:"+f+'px;">',w=$(t).attr("soper"),v,y=[],s,o=0,b=$(t).attr("colname"),k=i.p.colModel.length;o<k;){if(i.p.colModel[o].name===b)break;o++}for(a=i.p.colModel[o],c=$.extend({},a.searchoptions),c.sopt||(c.sopt=[],c.sopt[0]=a.stype==="select"?"eq":n.defaultSearch),$.each(n.odata,function(){y.push(this.oper)}),o=0;o<c.sopt.length;o++)s=$.inArray(c.sopt[o],y),s!==-1&&(v=w===n.odata[s].oper?e.highlight:"",l+='<li class="ui-menu-item '+v+'" role="presentation"><a class="'+e.cornerall+' g-menu-item" tabindex="0" role="menuitem" value="'+n.odata[s].oper+'" oper="'+n.operands[n.odata[s].oper]+'"><table class="ui-common-table"><tr><td width="25px">'+n.operands[n.odata[s].oper]+"<\/td><td>"+n.odata[s].text+"<\/td><\/tr><\/table><\/a><\/li>");l+="<\/ul>";$("body").append(l);$("#sopt_menu").addClass("ui-menu "+h.menu_widget);$("#sopt_menu > li > a").hover(function(){$(this).addClass(e.hover)},function(){$(this).removeClass(e.hover)}).click(function(){var r=$(this).attr("value"),f=$(this).attr("oper"),e;$(i).triggerHandler("jqGridToolbarSelectOper",[r,f,t]);$("#sopt_menu").hide();$(t).text(f).attr("soper",r);n.autosearch===!0&&(e=$(t).parent().next().children()[0],($(e).val()||r==="nu"||r==="nn")&&u())})},o=$("<tr class='ui-search-toolbar' role='row'><\/tr>"),s,f,r;if(n.restoreFromFilters&&(r=i.p.postData.filters,r&&(typeof r=="string"&&(r=$.jgrid.parse(r)),f=r.rules.length?r.rules:!1)),$.each(i.p.colModel,function(t){var e=this,r,d="",g="=",y,p,nt,tt,w,b,l,k=$("<th role='columnheader' class='"+c.headerBox+" ui-th-"+i.p.direction+"' id='gsh_"+i.p.id+"_"+e.name+"' ><\/th>"),it=$("<div><\/div>"),a=$("<table class='ui-search-table' cellspacing='0'><tr><td class='ui-search-oper' headers=''><\/td><td class='ui-search-input' headers=''><\/td><td class='ui-search-clear' headers=''><\/td><\/tr><\/table>"),v,rt;if(this.hidden===!0&&$(k).css("display","none"),this.search=this.search===!1?!1:!0,this.stype===undefined&&(this.stype="text"),r=$.extend({},this.searchoptions||{},{name:e.index||e.name,id:"gs_"+i.p.idPrefix+e.name,oper:"search"}),this.search){if(n.restoreFromFilters&&f)for(l=!1,v=0;v<f.length;v++)if(f[v].field&&(rt=e.index||e.name,rt===f[v].field)){l=f[v];break}if(n.searchOperators){for(y=r.sopt?r.sopt[0]:e.stype==="select"?"eq":n.defaultSearch,n.restoreFromFilters&&l&&(y=l.op),p=0;p<n.odata.length;p++)if(n.odata[p].oper===y){g=n.operands[y]||"";break}nt=r.searchtitle!=null?r.searchtitle:n.operandTitle;d="<a title='"+nt+"' style='padding-right: 0.5em;' soper='"+y+"' class='soptclass' colname='"+this.name+"'>"+g+"<\/a>"}$("td:eq(0)",a).attr("colindex",t).append(d);r.clearSearch===undefined&&(r.clearSearch=!0);r.clearSearch?(tt=n.resetTitle||"Clear Search Value",$("td:eq(2)",a).append("<a title='"+tt+"' style='padding-right: 0.3em;padding-left: 0.3em;' class='clearsearchclass'>"+n.resetIcon+"<\/a>")):$("td:eq(2)",a).hide();this.surl&&(r.dataUrl=this.surl);w="";r.defaultValue&&(w=$.isFunction(r.defaultValue)?r.defaultValue.call(i):r.defaultValue);n.restoreFromFilters&&l&&(w=l.data);b=$.jgrid.createEl.call(i,this.stype,r,w,!1,$.extend({},$.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));$(b).css({width:"100%"}).addClass(h.srInput);$("td:eq(1)",a).append(b);$(it).append(a);switch(this.stype){case"select":n.autosearch===!0&&(r.dataEvents=[{type:"change",fn:function(){return u(),!1}}]);break;case"text":n.autosearch===!0&&(r.dataEvents=n.searchOnEnter?[{type:"keypress",fn:function(n){var t=n.charCode||n.keyCode||0;return t===13?(u(),!1):this}}]:[{type:"keydown",fn:function(t){var i=t.which;switch(i){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:s&&clearTimeout(s);s=setTimeout(function(){u()},n.autosearchDelay)}}}])}$.jgrid.bindEv.call(i,b,r)}$(k).append(it);$(o).append(k);n.searchOperators||$("td:eq(0)",a).hide()}),$("table thead",i.grid.hDiv).append(o),n.searchOperators){$(".soptclass",o).click(function(n){var t=$(this).offset(),i=t.left,r=t.top;v(this,i,r);n.stopPropagation()});$("body").on("click",function(n){n.target.className!=="soptclass"&&$("#sopt_menu").hide()})}$(".clearsearchclass",o).click(function(){var t=$(this).parents("tr:first"),f=parseInt($("td.ui-search-oper",t).attr("colindex"),10),e=$.extend({},i.p.colModel[f].searchoptions||{}),r=e.defaultValue?e.defaultValue:"";i.p.colModel[f].stype==="select"?r?$("td.ui-search-input select",t).val(r):$("td.ui-search-input select",t)[0].selectedIndex=0:$("td.ui-search-input input",t).val(r);n.autosearch===!0&&u()});this.p.filterToolbar=!0;this.triggerToolbar=u;this.clearToolbar=l;this.toggleToolbar=a}})},destroyFilterToolbar:function(){return this.each(function(){this.p.filterToolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.p.filterToolbar=!1,$(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},searchGrid:function(n){var t=$.jgrid.getRegional(this[0],"search");return n=$.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,sortStrategy:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null,operands:{eq:"=",ne:"<>",lt:"<",le:"<=",gt:">",ge:">=",bw:"LIKE",bn:"NOT LIKE","in":"IN",ni:"NOT IN",ew:"LIKE",en:"NOT LIKE",cn:"LIKE",nc:"NOT LIKE",nu:"IS NULL",nn:"ISNOT NULL"}},t,n||{}),this.each(function(){function k(r){c=$(t).triggerHandler("jqGridFilterBeforeShow",[r]);c===undefined&&(c=!0);c&&$.isFunction(n.beforeShowSearch)&&(c=n.beforeShowSearch.call(t,r));c&&($.jgrid.viewModal("#"+$.jgrid.jqID(f.themodal),{gbox:"#gbox_"+$.jgrid.jqID(i),jqm:n.jqModal,modal:n.modal,overlay:n.overlay,toTop:n.toTop}),$(t).triggerHandler("jqGridFilterAfterShow",[r]),$.isFunction(n.afterShowSearch)&&n.afterShowSearch.call(t,r))}var t=this,w;if(t.grid){var i="fbox_"+t.p.id,c=!0,r=!0,f={themodal:"searchmod"+i,modalhead:"searchhd"+i,modalcontent:"searchcnt"+i,scrollelm:i},s=t.p.postData[n.sFilter],h,y=$.jgrid.styleUI[t.p.styleUI||"jQueryUI"].filter,u=$.jgrid.styleUI[t.p.styleUI||"jQueryUI"].common;if(n.styleUI=t.p.styleUI,typeof s=="string"&&(s=$.jgrid.parse(s)),n.recreateFilter===!0&&$("#"+$.jgrid.jqID(f.themodal)).remove(),$("#"+$.jgrid.jqID(f.themodal))[0]!==undefined)k($("#fbox_"+$.jgrid.jqID(t.p.id)));else{var e=$("<div><div id='"+i+"' class='searchFilter' style='overflow:auto'><\/div><\/div>").insertBefore("#gview_"+$.jgrid.jqID(t.p.id)),d="left",g="";t.p.direction==="rtl"&&(d="right",g=" style='text-align:left'",e.attr("dir","rtl"));var o=$.extend([],t.p.colModel),tt="<a id='"+i+"_search' class='fm-button "+u.button+" fm-button-icon-right ui-search'><span class='"+u.icon_base+" "+y.icon_search+"'><\/span>"+n.Find+"<\/a>",it="<a id='"+i+"_reset' class='fm-button "+u.button+" fm-button-icon-left ui-reset'><span class='"+u.icon_base+" "+y.icon_reset+"'><\/span>"+n.Reset+"<\/a>",b="",l="",p,a=!1,nt,v=-1;n.showQuery&&(b="<a id='"+i+"_query' class='fm-button "+u.button+" fm-button-icon-left'><span class='"+u.icon_base+" "+y.icon_query+"'><\/span>Query<\/a>");n.columns.length?(o=n.columns,v=0,p=o[0].index||o[0].name):$.each(o,function(n,i){if(i.label||(i.label=t.p.colNames[n]),!a){var r=i.search===undefined?!0:i.search,u=i.hidden===!0,f=i.searchoptions&&i.searchoptions.searchhidden===!0;(f&&r||r&&!u)&&(a=!0,p=i.index||i.name,v=n)}});(!s&&p||n.multipleSearch===!1)&&(w="eq",v>=0&&o[v].searchoptions&&o[v].searchoptions.sopt?w=o[v].searchoptions.sopt[0]:n.sopt&&n.sopt.length&&(w=n.sopt[0]),s={groupOp:"AND",rules:[{field:p,op:w,data:""}]});a=!1;n.tmplNames&&n.tmplNames.length&&(a=!0,l="<tr><td class='ui-search-label'>"+n.tmplLabel+"<\/td>",l+="<td><select class='ui-template "+y.srSelect+"'>",l+="<option value='default'>Default<\/option>",$.each(n.tmplNames,function(n,t){l+="<option value='"+n+"'>"+t+"<\/option>"}),l+="<\/select><\/td><\/tr>");nt="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+i+"_2'><tbody><tr><td colspan='2'><hr class='"+u.content+"' style='margin:1px'/><\/td><\/tr>"+l+"<tr><td class='EditButton' style='text-align:"+d+"'>"+it+"<\/td><td class='EditButton' "+g+">"+b+tt+"<\/td><\/tr><\/tbody><\/table>";i=$.jgrid.jqID(i);$("#"+i).jqFilter({columns:o,sortStrategy:n.sortStrategy,filter:n.loadDefaults?s:null,showQuery:n.showQuery,errorcheck:n.errorcheck,sopt:n.sopt,groupButton:n.multipleGroup,ruleButtons:n.multipleSearch,afterRedraw:n.afterRedraw,ops:n.odata,operands:n.operands,ajaxSelectOptions:t.p.ajaxSelectOptions,groupOps:n.groupOps,onChange:function(){this.p.showQuery&&$(".query",this).html(this.toUserFriendlyString());$.isFunction(n.afterChange)&&n.afterChange.call(t,$("#"+i),n)},direction:t.p.direction,id:t.p.id});e.append(nt);a&&n.tmplFilters&&n.tmplFilters.length&&$(".ui-template",e).bind("change",function(){var t=$(this).val();return t==="default"?$("#"+i).jqFilter("addFilter",s):$("#"+i).jqFilter("addFilter",n.tmplFilters[parseInt(t,10)]),!1});n.multipleGroup===!0&&(n.multipleSearch=!0);$(t).triggerHandler("jqGridFilterInitialize",[$("#"+i)]);$.isFunction(n.onInitializeSearch)&&n.onInitializeSearch.call(t,$("#"+i));n.gbox="#gbox_"+i;n.layer?$.jgrid.createModal(f,e,n,"#gview_"+$.jgrid.jqID(t.p.id),$("#gbox_"+$.jgrid.jqID(t.p.id))[0],"#"+$.jgrid.jqID(n.layer),{position:"relative"}):$.jgrid.createModal(f,e,n,"#gview_"+$.jgrid.jqID(t.p.id),$("#gbox_"+$.jgrid.jqID(t.p.id))[0]);(n.searchOnEnter||n.closeOnEscape)&&$("#"+$.jgrid.jqID(f.themodal)).keydown(function(t){var r=$(t.target);return n.searchOnEnter&&t.which===13&&!r.hasClass("add-group")&&!r.hasClass("add-rule")&&!r.hasClass("delete-group")&&!r.hasClass("delete-rule")&&(!r.hasClass("fm-button")||!r.is("[id$=_query]"))?($("#"+i+"_search").click(),!1):n.closeOnEscape&&t.which===27?($("#"+$.jgrid.jqID(f.modalhead)).find(".ui-jqdialog-titlebar-close").click(),!1):void 0});b&&$("#"+i+"_query").bind("click",function(){return $(".queryresult",e).toggle(),!1});n.stringResult===undefined&&(n.stringResult=n.multipleSearch);$("#"+i+"_search").bind("click",function(){var u={},o,e;if(h=$("#"+i),h.find(".input-elm:focus").change(),e=h.jqFilter("filterData"),n.errorcheck&&(h[0].hideError(),n.showQuery||h.jqFilter("toSQLString"),h[0].p.error))return h[0].showError(),!1;if(n.stringResult){try{o=JSON.stringify(e)}catch(s){}typeof o=="string"&&(u[n.sFilter]=o,$.each([n.sField,n.sValue,n.sOper],function(){u[this]=""}))}else n.multipleSearch?(u[n.sFilter]=e,$.each([n.sField,n.sValue,n.sOper],function(){u[this]=""})):(u[n.sField]=e.rules[0].field,u[n.sValue]=e.rules[0].data,u[n.sOper]=e.rules[0].op,u[n.sFilter]="");return t.p.search=!0,$.extend(t.p.postData,u),r=$(t).triggerHandler("jqGridFilterSearch"),r===undefined&&(r=!0),r&&$.isFunction(n.onSearch)&&(r=n.onSearch.call(t,t.p.filters)),r!==!1&&$(t).trigger("reloadGrid",[{page:1}]),n.closeAfterSearch&&$.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:n.jqModal,onClose:n.onClose}),!1});$("#"+i+"_reset").bind("click",function(){var u={},o=$("#"+i);return t.p.search=!1,t.p.resetsearch=!0,n.multipleSearch===!1?u[n.sField]=u[n.sValue]=u[n.sOper]="":u[n.sFilter]="",o[0].resetFilter(),a&&$(".ui-template",e).val("default"),$.extend(t.p.postData,u),r=$(t).triggerHandler("jqGridFilterReset"),r===undefined&&(r=!0),r&&$.isFunction(n.onReset)&&(r=n.onReset.call(t)),r!==!1&&$(t).trigger("reloadGrid",[{page:1}]),n.closeAfterReset&&$.jgrid.hideModal("#"+$.jgrid.jqID(f.themodal),{gb:"#gbox_"+$.jgrid.jqID(t.p.id),jqm:n.jqModal,onClose:n.onClose}),!1});k($("#"+i));$(".fm-button:not(."+u.disabled+")",e).hover(function(){$(this).addClass(u.hover)},function(){$(this).removeClass(u.hover)})}}})}});n={};$.jgrid.extend({editGridRow:function(t,i){var e=$.jgrid.getRegional(this[0],"edit"),f=this[0].p.styleUI,u=$.jgrid.styleUI[f].formedit,r=$.jgrid.styleUI[f].common;return i=$.extend(!0,{top:0,left:0,width:"500",datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:r.overlay,removemodal:!0,form:"edit",template:null,focusField:!0},e,i||{}),n[$(this)[0].p.id]=i,this.each(function(){function kt(){return $(v).find(".FormElement").each(function(){var i=$(".customelement",this),r,t,u,o;if(i.length)r=i[0],t=$(r).attr("name"),$.each(f.p.colModel,function(){if(this.name===t&&this.editoptions&&$.isFunction(this.editoptions.custom_value)){try{if(e[t]=this.editoptions.custom_value.call(f,$("#"+$.jgrid.jqID(t),v),"get"),e[t]===undefined)throw"e1";}catch(i){i==="e1"?$.jgrid.info_dialog(b.errcap,"function 'custom_value' "+n[$(this)[0]].p.msg.novalue,n[$(this)[0]].p.bClose,{styleUI:n[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(b.errcap,i.message,n[$(this)[0]].p.bClose,{styleUI:n[$(this)[0]].p.styleUI})}return!0}});else{switch($(this).get(0).type){case"checkbox":$(this).is(":checked")?e[this.name]=$(this).val():(u=$(this).attr("offval"),e[this.name]=u);break;case"select-one":e[this.name]=$("option:selected",this).val();break;case"select-multiple":e[this.name]=$(this).val();e[this.name]=e[this.name]?e[this.name].join(","):"";o=[];$("option:selected",this).each(function(n,t){o[n]=$(t).text()});break;case"password":case"text":case"textarea":case"button":e[this.name]=$(this).val()}f.p.autoencode&&(e[this.name]=$.jgrid.htmlEncode(e[this.name]))}}),!0}function gt(t,i,r,e){for(var h,w,l,y=0,s,k,c,d=[],v=!1,g="",p,b=1;b<=e;b++)g+="<td class='CaptionTD'>&#160;<\/td><td class='DataTD'>&#160;<\/td>";return t!=="_empty"&&(v=$(i).jqGrid("getInd",t)),$(i.p.colModel).each(function(p){var rt;if(h=this.name,w=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,k=w?"style='display:none'":"",h!=="cb"&&h!=="subgrid"&&this.editable===!0&&h!=="rn"){if(v===!1)s="";else if(h===i.p.ExpandColumn&&i.p.treeGrid===!0)s=$("td[role='gridcell']:eq("+p+")",i.rows[v]).text();else{try{s=$.unformat.call(i,$("td[role='gridcell']:eq("+p+")",i.rows[v]),{rowId:t,colModel:this},p)}catch(ft){s=this.edittype&&this.edittype==="textarea"?$("td[role='gridcell']:eq("+p+")",i.rows[v]).text():$("td[role='gridcell']:eq("+p+")",i.rows[v]).html()}s&&s!=="&nbsp;"&&s!=="&#160;"&&(s.length!==1||s.charCodeAt(0)!==160)||(s="")}var b=$.extend({},this.editoptions||{},{id:h,name:h,rowId:t,oper:"edit"}),tt=$.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),it=parseInt(tt.rowpos,10)||y+1,ut=parseInt((parseInt(tt.colpos,10)||1)*2,10);t==="_empty"&&b.defaultValue&&(s=$.isFunction(b.defaultValue)?b.defaultValue.call(f):b.defaultValue);this.edittype||(this.edittype="text");f.p.autoencode&&(s=$.jgrid.htmlDecode(s));c=$.jgrid.createEl.call(f,this.edittype,b,s,!1,$.extend({},$.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));this.edittype==="select"&&(s=$(c).val(),$(c).get(0).type==="select-multiple"&&s&&(s=s.join(",")));this.edittype==="checkbox"&&(s=$(c).is(":checked")?$(c).val():$(c).attr("offval"));(n[f.p.id].checkOnSubmit||n[f.p.id].checkOnUpdate)&&(n[f.p.id]._savedData[h]=s);$(c).addClass("FormElement");$.inArray(this.edittype,["text","textarea","password","select"])>-1&&$(c).addClass(u.inputClass);nt?$(a).find("#"+h).replaceWith(c):(l=$(r).find("tr[rowpos="+it+"]"),tt.rowabove&&(rt=$("<tr><td class='contentinfo' colspan='"+e*2+"'>"+tt.rowcontent+"<\/td><\/tr>"),$(r).append(rt),rt[0].rp=it),l.length===0&&(l=$("<tr "+k+" rowpos='"+it+"'><\/tr>").addClass("FormData").attr("id","tr_"+h),$(l).append(g),$(r).append(l),l[0].rp=it),$("td:eq("+(ut-2)+")",l[0]).html("<label for='"+h+"'>"+(tt.label===undefined?i.p.colNames[p]:tt.label)+"<\/label>"),$("td:eq("+(ut-1)+")",l[0]).append(tt.elmprefix).append(c).append(tt.elmsuffix));this.edittype==="custom"&&$.isFunction(b.custom_value)&&b.custom_value.call(f,$("#"+h,o),"set",s);$.jgrid.bindEv.call(f,c,b);d[y]=p;y++}}),y>0&&(nt?(p="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+i.p.id+"_id' value='"+t+"'/>",$(a).append(p)):(p=$("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(e*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+i.p.id+"_id' value='"+t+"'/><\/td><\/tr>"),p[0].rp=y+999,$(r).append(p)),(n[f.p.id].checkOnSubmit||n[f.p.id].checkOnUpdate)&&(n[f.p.id]._savedData[i.p.id+"_id"]=t)),d}function lt(t,i,r){var e,y=0,u,o,c,h,l,s,a;if((n[f.p.id].checkOnSubmit||n[f.p.id].checkOnUpdate)&&(n[f.p.id]._savedData={},n[f.p.id]._savedData[i.p.id+"_id"]=t),s=i.p.colModel,t==="_empty"){$(s).each(function(){e=this.name;c=$.extend({},this.editoptions||{});o=$("#"+$.jgrid.jqID(e),r);o&&o.length&&o[0]!==null&&(h="",this.edittype==="custom"&&$.isFunction(c.custom_value)?c.custom_value.call(f,$("#"+e,r),"set",h):c.defaultValue?(h=$.isFunction(c.defaultValue)?c.defaultValue.call(f):c.defaultValue,o[0].type==="checkbox"?(l=h.toLowerCase(),l.search(/(false|f|0|no|n|off|undefined)/i)<0&&l!==""?(o[0].checked=!0,o[0].defaultChecked=!0,o[0].value=h):(o[0].checked=!1,o[0].defaultChecked=!1)):o.val(h)):o[0].type==="checkbox"?(o[0].checked=!1,o[0].defaultChecked=!1,h=$(o).attr("offval")):o[0].type&&o[0].type.substr(0,6)==="select"?o[0].selectedIndex=0:o.val(h),(n[f.p.id].checkOnSubmit===!0||n[f.p.id].checkOnUpdate)&&(n[f.p.id]._savedData[e]=h))});$("#id_g",r).val(t);return}(a=$(i).jqGrid("getInd",t,!0),a)&&($('td[role="gridcell"]',a).each(function(o){var h,c;if(e=s[o].name,e!=="cb"&&e!=="subgrid"&&e!=="rn"&&s[o].editable===!0){if(e===i.p.ExpandColumn&&i.p.treeGrid===!0)u=$(this).text();else try{u=$.unformat.call(i,$(this),{rowId:t,colModel:s[o]},o)}catch(a){u=s[o].edittype==="textarea"?$(this).text():$(this).html()}f.p.autoencode&&(u=$.jgrid.htmlDecode(u));(n[f.p.id].checkOnSubmit===!0||n[f.p.id].checkOnUpdate)&&(n[f.p.id]._savedData[e]=u);e=$.jgrid.jqID(e);switch(s[o].edittype){case"password":case"text":case"button":case"image":case"textarea":(u==="&nbsp;"||u==="&#160;"||u.length===1&&u.charCodeAt(0)===160)&&(u="");$("#"+e,r).val(u);break;case"select":h=u.split(",");h=$.map(h,function(n){return $.trim(n)});$("#"+e+" option",r).each(function(){this.selected=s[o].editoptions.multiple||$.trim(u)!==$.trim($(this).text())&&h[0]!==$.trim($(this).text())&&h[0]!==$.trim($(this).val())?s[o].editoptions.multiple?$.inArray($.trim($(this).text()),h)>-1||$.inArray($.trim($(this).val()),h)>-1?!0:!1:!1:!0});(n[f.p.id].checkOnSubmit===!0||n[f.p.id].checkOnUpdate)&&(u=$("#"+e,r).val(),s[o].editoptions.multiple&&(u=u.join(",")),n[f.p.id]._savedData[e]=u);break;case"checkbox":u=String(u);s[o].editoptions&&s[o].editoptions.value?(c=s[o].editoptions.value.split(":"),c[0]===u?$("#"+e,r)[f.p.useProp?"prop":"attr"]({checked:!0,defaultChecked:!0}):$("#"+e,r)[f.p.useProp?"prop":"attr"]({checked:!1,defaultChecked:!1})):(u=u.toLowerCase(),u.search(/(false|f|0|no|n|off|undefined)/i)<0&&u!==""?($("#"+e,r)[f.p.useProp?"prop":"attr"]("checked",!0),$("#"+e,r)[f.p.useProp?"prop":"attr"]("defaultChecked",!0)):($("#"+e,r)[f.p.useProp?"prop":"attr"]("checked",!1),$("#"+e,r)[f.p.useProp?"prop":"attr"]("defaultChecked",!1)));(n[f.p.id].checkOnSubmit===!0||n[f.p.id].checkOnUpdate)&&(u=$("#"+e,r).is(":checked")?$("#"+e,r).val():$("#"+e,r).attr("offval"));break;case"custom":try{if(s[o].editoptions&&$.isFunction(s[o].editoptions.custom_value))s[o].editoptions.custom_value.call(f,$("#"+e,r),"set",u);else throw"e1";}catch(l){l==="e1"?$.jgrid.info_dialog(b.errcap,"function 'custom_value' "+n[$(this)[0]].p.msg.nodefined,$.rp_ge[$(this)[0]].p.bClose,{styleUI:n[$(this)[0]].p.styleUI}):$.jgrid.info_dialog(b.errcap,l.message,$.rp_ge[$(this)[0]].p.bClose,{styleUI:n[$(this)[0]].p.styleUI})}}y++}}),y>0&&$("#id_g",v).val(t))}function ni(){$.each(f.p.colModel,function(n,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&e.hasOwnProperty(t.name)&&e[t.name]===""&&(e[t.name]="null")})}function tt(){var k,t=[!0,"",""],d={},c=f.p.prmNames,u,p,g,tt,nt,it,y=$(f).triggerHandler("jqGridAddEditBeforeCheckValues",[$(o),h]),ut,rt,a,w;y&&typeof y=="object"&&(e=y);$.isFunction(n[f.p.id].beforeCheckValues)&&(y=n[f.p.id].beforeCheckValues.call(f,e,$(o),h),y&&typeof y=="object"&&(e=y));for(g in e)if(e.hasOwnProperty(g)&&(t=$.jgrid.checkValues.call(f,e[g],g),t[0]===!1))break;if(ni(),t[0]&&(d=$(f).triggerHandler("jqGridAddEditClickSubmit",[n[f.p.id],e,h]),d===undefined&&$.isFunction(n[f.p.id].onclickSubmit)&&(d=n[f.p.id].onclickSubmit.call(f,n[f.p.id],e,h)||{}),t=$(f).triggerHandler("jqGridAddEditBeforeSubmit",[e,$(o),h]),t===undefined&&(t=[!0,"",""]),t[0]&&$.isFunction(n[f.p.id].beforeSubmit)&&(t=n[f.p.id].beforeSubmit.call(f,e,$(o),h))),t[0]&&!n[f.p.id].processing){if(n[f.p.id].processing=!0,$("#sData",v+"_2").addClass(r.active),it=n[f.p.id].url||$(f).jqGrid("getGridParam","editurl"),p=c.oper,u=it==="clientArray"?f.p.keyName:c.id,e[p]=$.trim(e[f.p.id+"_id"])==="_empty"?c.addoper:c.editoper,e[p]!==c.addoper?e[u]=e[f.p.id+"_id"]:e[u]===undefined&&(e[u]=e[f.p.id+"_id"]),delete e[f.p.id+"_id"],e=$.extend(e,n[f.p.id].editData,d),f.p.treeGrid===!0){e[p]===c.addoper&&(tt=$(f).jqGrid("getGridParam","selrow"),ut=f.p.treeGridModel==="adjacency"?f.p.treeReader.parent_id_field:"parent_id",e[ut]=tt);for(nt in f.p.treeReader)if(f.p.treeReader.hasOwnProperty(nt)&&(rt=f.p.treeReader[nt],e.hasOwnProperty(rt))){if(e[p]===c.addoper&&nt==="parent_id_field")continue;delete e[rt]}}e[u]=$.jgrid.stripPref(f.p.idPrefix,e[u]);a=$.extend({url:it,type:n[f.p.id].mtype,data:$.isFunction(n[f.p.id].serializeEditData)?n[f.p.id].serializeEditData.call(f,e):e,complete:function(a,y){var w;if($("#sData",v+"_2").removeClass(r.active),e[u]=f.p.idPrefix+e[u],a.status>=300&&a.status!==304?(t[0]=!1,t[1]=$(f).triggerHandler("jqGridAddEditErrorTextFormat",[a,h]),t[1]=$.isFunction(n[f.p.id].errorTextFormat)?n[f.p.id].errorTextFormat.call(f,a,h):y+" Status: '"+a.statusText+"'. Error code: "+a.status):(t=$(f).triggerHandler("jqGridAddEditAfterSubmit",[a,e,h]),t===undefined&&(t=[!0,"",""]),t[0]&&$.isFunction(n[f.p.id].afterSubmit)&&(t=n[f.p.id].afterSubmit.call(f,a,e,h))),t[0]===!1)$(".FormError",o).html(t[1]),$(".FormError",o).show();else if(f.p.autoencode&&$.each(e,function(n,t){e[n]=$.jgrid.htmlDecode(t)}),e[p]===c.addoper?(t[2]||(t[2]=$.jgrid.randId()),e[u]==null||e[u]==="_empty"?e[u]=t[2]:t[2]=e[u],n[f.p.id].reloadAfterSubmit?$(f).trigger("reloadGrid"):f.p.treeGrid===!0?$(f).jqGrid("addChildNode",t[2],tt,e):$(f).jqGrid("addRowData",t[2],e,i.addedrow),n[f.p.id].closeAfterAdd?(f.p.treeGrid!==!0&&$(f).jqGrid("setSelection",t[2]),$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form})):n[f.p.id].clearAfterAdd&&lt("_empty",f,o)):(n[f.p.id].reloadAfterSubmit?($(f).trigger("reloadGrid"),n[f.p.id].closeAfterEdit||setTimeout(function(){$(f).jqGrid("setSelection",e[u])},1e3)):f.p.treeGrid===!0?$(f).jqGrid("setTreeRow",e[u],e):$(f).jqGrid("setRowData",e[u],e),n[f.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form})),$.isFunction(n[f.p.id].afterComplete)&&(k=a,setTimeout(function(){$(f).triggerHandler("jqGridAddEditAfterComplete",[k,e,$(o),h]);n[f.p.id].afterComplete.call(f,k,e,$(o),h);k=null},500)),(n[f.p.id].checkOnSubmit||n[f.p.id].checkOnUpdate)&&($(o).data("disabled",!1),n[f.p.id]._savedData[f.p.id+"_id"]!=="_empty"))for(w in n[f.p.id]._savedData)n[f.p.id]._savedData.hasOwnProperty(w)&&e[w]&&(n[f.p.id]._savedData[w]=e[w]);n[f.p.id].processing=!1;try{$(":input:visible",o)[0].focus()}catch(b){}}},$.jgrid.ajaxOptions,n[f.p.id].ajaxEditOptions);a.url||n[f.p.id].useDataProxy||($.isFunction(f.p.dataProxy)?n[f.p.id].useDataProxy=!0:(t[0]=!1,t[1]+=" "+b.nourl));t[0]&&(n[f.p.id].useDataProxy?(w=f.p.dataProxy.call(f,a,"set_"+f.p.id),w===undefined&&(w=[!0,""]),w[0]===!1?(t[0]=!1,t[1]=w[1]||"Error deleting the selected row!"):(a.data.oper===c.addoper&&n[f.p.id].closeAfterAdd&&$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),a.data.oper===c.editoper&&n[f.p.id].closeAfterEdit&&$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}))):a.url==="clientArray"?(n[f.p.id].reloadAfterSubmit=!1,e=a.data,a.complete({status:200,statusText:""},"")):$.ajax(a))}t[0]===!1&&($(".FormError",o).html(t[1]),$(".FormError",o).show())}function dt(n,t){var r=!1;for(var i in n)if(n.hasOwnProperty(i)&&n[i]!=t[i]){r=!0;break}return r}function p(){var t=!0;return $(".FormError",o).hide(),n[f.p.id].checkOnUpdate&&(e={},kt(),g=dt(e,n[f.p.id]._savedData),g&&($(o).data("disabled",!0),$(".confirm","#"+s.themodal).show(),t=!1)),t}function ti(){var n;if(t!=="_empty"&&f.p.savedRow!==undefined&&f.p.savedRow.length>0&&$.isFunction($.fn.jqGrid.restoreRow))for(n=0;n<f.p.savedRow.length;n++)if(f.p.savedRow[n].id===t){$(f).jqGrid("restoreRow",t);break}}function at(n,t){var i=t[1].length-1;n===0?$("#pData",c).addClass(r.disabled):t[1][n-1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n-1])).hasClass(r.disabled)?$("#pData",c).addClass(r.disabled):$("#pData",c).removeClass(r.disabled);n===i?$("#nData",c).addClass(r.disabled):t[1][n+1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n+1])).hasClass(r.disabled)?$("#nData",c).addClass(r.disabled):$("#nData",c).removeClass(r.disabled)}function vt(){var n=$(f).jqGrid("getDataIDs"),t=$("#id_g",v).val(),i=$.inArray(t,n);return[i,n]}function ii(n){var t="";return typeof n=="string"&&(t=n.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(n,t){return'<span id="'+t+'" ><\/span>'})),t}var f=this,ct,ft,wt,et,ot,bt;if(f.grid&&t){var l=f.p.id,o="FrmGrid_"+l,d="TblGrid_"+l,v="#"+$.jgrid.jqID(d),c,s={themodal:"editmod"+l,modalhead:"edithd"+l,modalcontent:"editcnt"+l,scrollelm:o},y=!0,st=1,ht=0,e,g,h,nt=typeof n[f.p.id].template=="string"&&n[f.p.id].template.length>0,b=$.jgrid.getRegional(this,"errors");n[f.p.id].styleUI=f.p.styleUI||"jQueryUI";$.jgrid.isMobile()&&(n[f.p.id].resize=!1);t==="new"?(t="_empty",h="add",i.caption=n[f.p.id].addCaption):(i.caption=n[f.p.id].editCaption,h="edit");i.recreateForm||$(f).data("formProp")&&$.extend(n[$(this)[0].p.id],$(f).data("formProp"));ct=!0;i.checkOnUpdate&&i.jqModal&&!i.modal&&(ct=!1);var ri=isNaN(n[$(this)[0].p.id].dataheight)?n[$(this)[0].p.id].dataheight:n[$(this)[0].p.id].dataheight+"px",ui=isNaN(n[$(this)[0].p.id].datawidth)?n[$(this)[0].p.id].datawidth:n[$(this)[0].p.id].datawidth+"px",a=$("<form name='FormPost' id='"+o+"' class='FormGrid' onSubmit='return false;' style='width:"+ui+";height:"+ri+";'><\/form>").data("disabled",!1),w;if(nt?(w=ii(n[$(this)[0].p.id].template),c=v):(w=$("<table id='"+d+"' class='EditTable ui-common-table'><tbody><\/tbody><\/table>"),c=v+"_2"),o="#"+$.jgrid.jqID(o),$(a).append("<div class='FormError "+r.error+"' style='display:none;'><\/div>"),$(a).append("<div class='tinfo topinfo'>"+n[f.p.id].topinfo+"<\/div>"),$(f.p.colModel).each(function(){var n=this.formoptions;st=Math.max(st,n?n.colpos||0:0);ht=Math.max(ht,n?n.rowpos||0:0)}),$(a).append(w),y=$(f).triggerHandler("jqGridAddEditBeforeInitData",[a,h]),y===undefined&&(y=!0),y&&$.isFunction(n[f.p.id].beforeInitData)&&(y=n[f.p.id].beforeInitData.call(f,a,h)),y!==!1){ti();gt(t,f,w,st);var it=f.p.direction==="rtl"?!0:!1,fi=it?"nData":"pData",ei=it?"pData":"nData",yt="<a id='"+fi+"' class='fm-button "+r.button+"'><span class='"+r.icon_base+" "+u.icon_prev+"'><\/span><\/a>",k="<a id='"+ei+"' class='fm-button "+r.button+"'><span class='"+r.icon_base+" "+u.icon_next+"'><\/span><\/a>",rt="<a id='sData' class='fm-button "+r.button+"'>"+i.bSubmit+"<\/a>",ut="<a id='cData' class='fm-button "+r.button+"'>"+i.bCancel+"<\/a>",pt="<table style='height:auto' class='EditTable ui-common-table' id='"+d+"_2'><tbody><tr><td colspan='2'><hr class='"+r.content+"' style='margin:1px'/><\/td><\/tr><tr id='Act_Buttons'><td class='navButton'>"+(it?k+yt:yt+k)+"<\/td><td class='EditButton'>"+rt+ut+"<\/td><\/tr>";pt+="<\/tbody><\/table>";ht>0&&(ft=[],$.each($(w)[0].rows,function(n,t){ft[n]=t}),ft.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),$.each(ft,function(n,t){$("tbody",w).append(t)}));i.gbox="#gbox_"+$.jgrid.jqID(l);wt=!1;i.closeOnEscape===!0&&(i.closeOnEscape=!1,wt=!0);nt?($(a).find("#pData").replaceWith(yt),$(a).find("#nData").replaceWith(k),$(a).find("#sData").replaceWith(rt),$(a).find("#cData").replaceWith(ut),et=$("<div id="+d+"><\/div>").append(a)):et=$("<div><\/div>").append(a).append(pt);$(a).append("<div class='binfo topinfo bottominfo'>"+n[f.p.id].bottominfo+"<\/div>");$.jgrid.createModal(s,et,n[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(f.p.id),$("#gbox_"+$.jgrid.jqID(f.p.id))[0]);it&&($("#pData, #nData",v+"_2").css("float","right"),$(".EditButton",v+"_2").css("text-align","left"));n[f.p.id].topinfo&&$(".tinfo",o).show();n[f.p.id].bottominfo&&$(".binfo",o).show();et=null;pt=null;$("#"+$.jgrid.jqID(s.themodal)).keydown(function(t){var r=t.target;if($(o).data("disabled")===!0)return!1;if(n[f.p.id].savekey[0]===!0&&t.which===n[f.p.id].savekey[1]&&r.tagName!=="TEXTAREA")return $("#sData",v+"_2").trigger("click"),!1;if(t.which===27)return p()?(wt&&$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1):!1;if(n[f.p.id].navkeys[0]===!0){if($("#id_g",v).val()==="_empty")return!0;if(t.which===n[f.p.id].navkeys[1])return $("#pData",c).trigger("click"),!1;if(t.which===n[f.p.id].navkeys[2])return $("#nData",c).trigger("click"),!1}});i.checkOnUpdate&&($("a.ui-jqdialog-titlebar-close span","#"+$.jgrid.jqID(s.themodal)).removeClass("jqmClose"),$("a.ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(s.themodal)).unbind("click").click(function(){return p()?($.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1):!1}));i.saveicon=$.extend([!0,"left",u.icon_save],i.saveicon);i.closeicon=$.extend([!0,"left",u.icon_close],i.closeicon);i.saveicon[0]===!0&&$("#sData",c).addClass(i.saveicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+r.icon_base+" "+i.saveicon[2]+"'><\/span>");i.closeicon[0]===!0&&$("#cData",c).addClass(i.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+r.icon_base+" "+i.closeicon[2]+"'><\/span>");(n[f.p.id].checkOnSubmit||n[f.p.id].checkOnUpdate)&&(rt="<a id='sNew' class='fm-button "+r.button+"' style='z-index:1002'>"+i.bYes+"<\/a>",k="<a id='nNew' class='fm-button "+r.button+"' style='z-index:1002;margin-left:5px'>"+i.bNo+"<\/a>",ut="<a id='cNew' class='fm-button "+r.button+"' style='z-index:1002;margin-left:5px;'>"+i.bExit+"<\/a>",ot=i.zIndex||999,ot++,$("<div class='"+i.overlayClass+" jqgrid-overlay confirm' style='z-index:"+ot+";display:none;'>&#160;<\/div><div class='confirm ui-jqconfirm "+r.content+"' style='z-index:"+(ot+1)+"'>"+i.saveData+"<br/><br/>"+rt+k+ut+"<\/div>").insertAfter(o),$("#sNew","#"+$.jgrid.jqID(s.themodal)).click(function(){return tt(),$(o).data("disabled",!1),$(".confirm","#"+$.jgrid.jqID(s.themodal)).hide(),!1}),$("#nNew","#"+$.jgrid.jqID(s.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(s.themodal)).hide(),$(o).data("disabled",!1),setTimeout(function(){$(":input:visible",o)[0].focus()},0),!1}),$("#cNew","#"+$.jgrid.jqID(s.themodal)).click(function(){return $(".confirm","#"+$.jgrid.jqID(s.themodal)).hide(),$(o).data("disabled",!1),$.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1}));$(f).triggerHandler("jqGridAddEditInitializeForm",[$(o),h]);$.isFunction(n[f.p.id].onInitializeForm)&&n[f.p.id].onInitializeForm.call(f,$(o),h);t!=="_empty"&&n[f.p.id].viewPagerButtons?$("#pData,#nData",c).show():$("#pData,#nData",c).hide();$(f).triggerHandler("jqGridAddEditBeforeShowForm",[$(o),h]);$.isFunction(n[f.p.id].beforeShowForm)&&n[f.p.id].beforeShowForm.call(f,$(o),h);$("#"+$.jgrid.jqID(s.themodal)).data("onClose",n[f.p.id].onClose);$.jgrid.viewModal("#"+$.jgrid.jqID(s.themodal),{gbox:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,overlay:i.overlay,modal:i.modal,overlayClass:i.overlayClass,focusField:i.focusField,onHide:function(n){var t=$("#editmod"+l)[0].style.height,i=$("#editmod"+l)[0].style.width;t.indexOf("px")>-1&&(t=parseFloat(t));i.indexOf("px")>-1&&(i=parseFloat(i));$(f).data("formProp",{top:parseFloat($(n.w).css("top")),left:parseFloat($(n.w).css("left")),width:i,height:t,dataheight:$(o).height(),datawidth:$(o).width()});n.w.remove();n.o&&n.o.remove()}});ct||$("."+$.jgrid.jqID(i.overlayClass)).click(function(){return p()?($.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1):!1});$(".fm-button","#"+$.jgrid.jqID(s.themodal)).hover(function(){$(this).addClass(r.hover)},function(){$(this).removeClass(r.hover)});$("#sData",c).click(function(){return e={},$(".FormError",o).hide(),kt(),e[f.p.id+"_id"]==="_empty"?tt():i.checkOnSubmit===!0?(g=dt(e,n[f.p.id]._savedData),g?($(o).data("disabled",!0),$(".confirm","#"+$.jgrid.jqID(s.themodal)).show()):tt()):tt(),!1});$("#cData",c).click(function(){return p()?($.jgrid.hideModal("#"+$.jgrid.jqID(s.themodal),{gb:"#gbox_"+$.jgrid.jqID(l),jqm:i.jqModal,onClose:n[f.p.id].onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1):!1});$("#nData",c).click(function(){var n,t;if(!p())return!1;if($(".FormError",o).hide(),n=vt(),n[0]=parseInt(n[0],10),n[0]!==-1&&n[1][n[0]+1]){if(($(f).triggerHandler("jqGridAddEditClickPgButtons",["next",$(o),n[1][n[0]]]),$.isFunction(i.onclickPgButtons)&&(t=i.onclickPgButtons.call(f,"next",$(o),n[1][n[0]]),t!==undefined&&t===!1))||$("#"+$.jgrid.jqID(n[1][n[0]+1])).hasClass(r.disabled))return!1;lt(n[1][n[0]+1],f,o);$(f).jqGrid("setSelection",n[1][n[0]+1]);$(f).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",$(o),n[1][n[0]]]);$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(f,"next",$(o),n[1][n[0]+1]);at(n[0]+1,n)}return!1});$("#pData",c).click(function(){var n,t;if(!p())return!1;if($(".FormError",o).hide(),n=vt(),n[0]!==-1&&n[1][n[0]-1]){if(($(f).triggerHandler("jqGridAddEditClickPgButtons",["prev",$(o),n[1][n[0]]]),$.isFunction(i.onclickPgButtons)&&(t=i.onclickPgButtons.call(f,"prev",$(o),n[1][n[0]]),t!==undefined&&t===!1))||$("#"+$.jgrid.jqID(n[1][n[0]-1])).hasClass(r.disabled))return!1;lt(n[1][n[0]-1],f,o);$(f).jqGrid("setSelection",n[1][n[0]-1]);$(f).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",$(o),n[1][n[0]]]);$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(f,"prev",$(o),n[1][n[0]-1]);at(n[0]-1,n)}return!1});$(f).triggerHandler("jqGridAddEditAfterShowForm",[$(o),h]);$.isFunction(n[f.p.id].afterShowForm)&&n[f.p.id].afterShowForm.call(f,$(o),h);bt=vt();at(bt[0],bt)}}})},viewGridRow:function(t,i){var e=$.jgrid.getRegional(this[0],"view"),f=this[0].p.styleUI,u=$.jgrid.styleUI[f].formedit,r=$.jgrid.styleUI[f].common;return i=$.extend(!0,{top:0,left:0,width:500,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},e,i||{}),n[$(this)[0].p.id]=i,this.each(function(){function w(){(n[f.p.id].closeOnEscape===!0||n[f.p.id].navkeys[0]===!0)&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(h.modalhead)).attr("tabindex","-1").focus()},0)}function ot(n,t,u,f){for(var o,s,e,h=0,c,k,d=[],l=!1,tt="<td class='CaptionTD form-view-label "+r.content+"' width='"+i.labelswidth+"'>&#160;<\/td><td class='DataTD form-view-data ui-helper-reset "+r.content+"'>&#160;<\/td>",g="",it="<td class='CaptionTD form-view-label "+r.content+"'>&#160;<\/td><td class='DataTD form-view-data "+r.content+"'>&#160;<\/td>",rt=["integer","number","currency"],v=0,y=0,p,w,nt,b,a=1;a<=f;a++)g+=a===1?tt:it;return $(t.p.colModel).each(function(){s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1;s||this.align!=="right"||(this.formatter&&$.inArray(this.formatter,rt)!==-1?v=Math.max(v,parseInt(this.width,10)):y=Math.max(y,parseInt(this.width,10)))}),p=v!==0?v:y!==0?y:0,l=$(t).jqGrid("getInd",n),$(t.p.colModel).each(function(n){var v;if(o=this.name,w=!1,s=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,k=s?"style='display:none'":"",nt=typeof this.viewable!="boolean"?!0:this.viewable,o!=="cb"&&o!=="subgrid"&&o!=="rn"&&nt){c=l===!1?"":o===t.p.ExpandColumn&&t.p.treeGrid===!0?$("td:eq("+n+")",t.rows[l]).text():$("td:eq("+n+")",t.rows[l]).html();w=this.align==="right"&&p!==0?!0:!1;var i=$.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),r=parseInt(i.rowpos,10)||h+1,a=parseInt((parseInt(i.colpos,10)||1)*2,10);i.rowabove&&(v=$("<tr><td class='contentinfo' colspan='"+f*2+"'>"+i.rowcontent+"<\/td><\/tr>"),$(u).append(v),v[0].rp=r);e=$(u).find("tr[rowpos="+r+"]");e.length===0&&(e=$("<tr "+k+" rowpos='"+r+"'><\/tr>").addClass("FormData").attr("id","trv_"+o),$(e).append(g),$(u).append(e),e[0].rp=r);$("td:eq("+(a-2)+")",e[0]).html("<b>"+(i.label===undefined?t.p.colNames[n]:i.label)+"<\/b>");$("td:eq("+(a-1)+")",e[0]).append("<span>"+c+"<\/span>").attr("id","v_"+o);w&&$("td:eq("+(a-1)+") span",e[0]).css({"text-align":"right",width:p+"px"});d[h]=n;h++}}),h>0&&(b=$("<tr class='FormData' style='display:none'><td class='CaptionTD'><\/td><td colspan='"+(f*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+n+"'/><\/td><\/tr>"),b[0].rp=h+99,$(u).append(b)),d}function it(n,t){var i,r,o=0,u,f;(f=$(t).jqGrid("getInd",n,!0),f)&&($("td",f).each(function(n){i=t.p.colModel[n].name;r=t.p.colModel[n].editrules&&t.p.colModel[n].editrules.edithidden===!0?!1:t.p.colModel[n].hidden===!0?!0:!1;i!=="cb"&&i!=="subgrid"&&i!=="rn"&&(u=i===t.p.ExpandColumn&&t.p.treeGrid===!0?$(this).text():$(this).html(),i=$.jgrid.jqID("v_"+i),$("#"+i+" span","#"+e).html(u),r&&$("#"+i,"#"+e).parents("tr:first").hide(),o++)}),o>0&&$("#id_g","#"+e).val(n))}function b(n,t){var i=t[1].length-1;n===0?$("#pData","#"+e+"_2").addClass(r.disabled):t[1][n-1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n-1])).hasClass(r.disabled)?$("#pData",e+"_2").addClass(r.disabled):$("#pData","#"+e+"_2").removeClass(r.disabled);n===i?$("#nData","#"+e+"_2").addClass(r.disabled):t[1][n+1]!==undefined&&$("#"+$.jgrid.jqID(t[1][n+1])).hasClass(r.disabled)?$("#nData",e+"_2").addClass(r.disabled):$("#nData","#"+e+"_2").removeClass(r.disabled)}function k(){var n=$(f).jqGrid("getDataIDs"),t=$("#id_g","#"+e).val(),i=$.inArray(t,n);return[i,n]}var f=this,v,g,nt;if(f.grid&&t){var o=f.p.id,s="ViewGrid_"+$.jgrid.jqID(o),e="ViewTbl_"+$.jgrid.jqID(o),ft="ViewGrid_"+o,et="ViewTbl_"+o,h={themodal:"viewmod"+o,modalhead:"viewhd"+o,modalcontent:"viewcnt"+o,scrollelm:s},tt=$.isFunction(n[f.p.id].beforeInitData)?n[f.p.id].beforeInitData:!1,c=!0,y=1,p=0;n[f.p.id].styleUI=f.p.styleUI||"jQueryUI";i.recreateForm||$(f).data("viewProp")&&$.extend(n[$(this)[0].p.id],$(f).data("viewProp"));var st=isNaN(n[$(this)[0].p.id].dataheight)?n[$(this)[0].p.id].dataheight:n[$(this)[0].p.id].dataheight+"px",ht=isNaN(n[$(this)[0].p.id].datawidth)?n[$(this)[0].p.id].datawidth:n[$(this)[0].p.id].datawidth+"px",d=$("<form name='FormPost' id='"+ft+"' class='FormGrid' style='width:"+ht+";height:"+st+";'><\/form>"),l=$("<table id='"+et+"' class='EditTable ViewTable'><tbody><\/tbody><\/table>");if($(f.p.colModel).each(function(){var n=this.formoptions;y=Math.max(y,n?n.colpos||0:0);p=Math.max(p,n?n.rowpos||0:0)}),$(d).append(l),tt&&(c=tt.call(f,d),c===undefined&&(c=!0)),c!==!1){ot(t,f,l,y);var a=f.p.direction==="rtl"?!0:!1,ct=a?"nData":"pData",lt=a?"pData":"nData",rt="<a id='"+ct+"' class='fm-button "+r.button+"'><span class='"+r.icon_base+" "+u.icon_prev+"'><\/span><\/a>",ut="<a id='"+lt+"' class='fm-button "+r.button+"'><span class='"+r.icon_base+" "+u.icon_next+"'><\/span><\/a>",at="<a id='cData' class='fm-button "+r.button+"'>"+i.bClose+"<\/a>";p>0&&(v=[],$.each($(l)[0].rows,function(n,t){v[n]=t}),v.sort(function(n,t){return n.rp>t.rp?1:n.rp<t.rp?-1:0}),$.each(v,function(n,t){$("tbody",l).append(t)}));i.gbox="#gbox_"+$.jgrid.jqID(o);g=$("<div><\/div>").append(d).append("<table border='0' class='EditTable' id='"+e+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+i.labelswidth+"'>"+(a?ut+rt:rt+ut)+"<\/td><td class='EditButton'>"+at+"<\/td><\/tr><\/tbody><\/table>");$.jgrid.createModal(h,g,n[$(this)[0].p.id],"#gview_"+$.jgrid.jqID(f.p.id),$("#gview_"+$.jgrid.jqID(f.p.id))[0]);a&&($("#pData, #nData","#"+e+"_2").css("float","right"),$(".EditButton","#"+e+"_2").css("text-align","left"));i.viewPagerButtons||$("#pData, #nData","#"+e+"_2").hide();g=null;$("#"+h.themodal).keydown(function(t){if(t.which===27)return n[f.p.id].closeOnEscape&&$.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1;if(i.navkeys[0]===!0){if(t.which===i.navkeys[1])return $("#pData","#"+e+"_2").trigger("click"),!1;if(t.which===i.navkeys[2])return $("#nData","#"+e+"_2").trigger("click"),!1}});i.closeicon=$.extend([!0,"left",u.icon_close],i.closeicon);i.closeicon[0]===!0&&$("#cData","#"+e+"_2").addClass(i.closeicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+r.icon_base+" "+i.closeicon[2]+"'><\/span>");$.isFunction(i.beforeShowForm)&&i.beforeShowForm.call(f,$("#"+s));$.jgrid.viewModal("#"+$.jgrid.jqID(h.themodal),{gbox:"#gbox_"+$.jgrid.jqID(o),jqm:i.jqModal,overlay:i.overlay,modal:i.modal,onHide:function(n){$(f).data("viewProp",{top:parseFloat($(n.w).css("top")),left:parseFloat($(n.w).css("left")),width:$(n.w).width(),height:$(n.w).height(),dataheight:$("#"+s).height(),datawidth:$("#"+s).width()});n.w.remove();n.o&&n.o.remove()}});$(".fm-button:not(."+r.disabled+")","#"+e+"_2").hover(function(){$(this).addClass(r.hover)},function(){$(this).removeClass(r.hover)});w();$("#cData","#"+e+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:"#gbox_"+$.jgrid.jqID(o),jqm:i.jqModal,onClose:i.onClose,removemodal:n[f.p.id].removemodal,formprop:!n[f.p.id].recreateForm,form:n[f.p.id].form}),!1});$("#nData","#"+e+"_2").click(function(){$("#FormError","#"+e).hide();var n=k();return n[0]=parseInt(n[0],10),n[0]!==-1&&n[1][n[0]+1]&&($.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(f,"next",$("#"+s),n[1][n[0]]),it(n[1][n[0]+1],f),$(f).jqGrid("setSelection",n[1][n[0]+1]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(f,"next",$("#"+s),n[1][n[0]+1]),b(n[0]+1,n)),w(),!1});$("#pData","#"+e+"_2").click(function(){$("#FormError","#"+e).hide();var n=k();return n[0]!==-1&&n[1][n[0]-1]&&($.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(f,"prev",$("#"+s),n[1][n[0]]),it(n[1][n[0]-1],f),$(f).jqGrid("setSelection",n[1][n[0]-1]),$.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(f,"prev",$("#"+s),n[1][n[0]-1]),b(n[0]-1,n)),w(),!1});nt=k();b(nt[0],nt)}}})},delGridRow:function(t,i){var e=$.jgrid.getRegional(this[0],"del"),u=this[0].p.styleUI,f=$.jgrid.styleUI[u].formedit,r=$.jgrid.styleUI[u].common;return i=$.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,i||{}),n[$(this)[0].p.id]=i,this.each(function(){var u=this,d,g;if(u.grid&&t){var p=$.isFunction(n[u.p.id].beforeShowForm),w=$.isFunction(n[u.p.id].afterShowForm),a=$.isFunction(n[u.p.id].beforeInitData)?n[u.p.id].beforeInitData:!1,o=u.p.id,y={},s=!0,e="DelTbl_"+$.jgrid.jqID(o),l,b,v,k,nt="DelTbl_"+o,h={themodal:"delmod"+o,modalhead:"delhd"+o,modalcontent:"delcnt"+o,scrollelm:e};if(n[u.p.id].styleUI=u.p.styleUI||"jQueryUI",$.isArray(t)&&(t=t.join()),$("#"+$.jgrid.jqID(h.themodal))[0]!==undefined){if(a&&(s=a.call(u,$("#"+e)),s===undefined&&(s=!0)),s===!1)return;$("#DelData>td","#"+e).text(t);$("#DelError","#"+e).hide();n[u.p.id].processing===!0&&(n[u.p.id].processing=!1,$("#dData","#"+e).removeClass(r.active));p&&n[u.p.id].beforeShowForm.call(u,$("#"+e));$.jgrid.viewModal("#"+$.jgrid.jqID(h.themodal),{gbox:"#gbox_"+$.jgrid.jqID(o),jqm:n[u.p.id].jqModal,jqM:!1,overlay:n[u.p.id].overlay,modal:n[u.p.id].modal});w&&n[u.p.id].afterShowForm.call(u,$("#"+e))}else{var tt=isNaN(n[u.p.id].dataheight)?n[u.p.id].dataheight:n[u.p.id].dataheight+"px",it=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",c="<div id='"+nt+"' class='formdata' style='width:"+it+";overflow:auto;position:relative;height:"+tt+";'>";if(c+="<table class='DelTable'><tbody>",c+="<tr id='DelError' style='display:none'><td class='"+r.error+"'><\/td><\/tr>",c+="<tr id='DelData' style='display:none'><td >"+t+"<\/td><\/tr>",c+='<tr><td class="delmsg" style="white-space:pre;">'+n[u.p.id].msg+"<\/td><\/tr><tr><td >&#160;<\/td><\/tr>",c+="<\/tbody><\/table><\/div>",d="<a id='dData' class='fm-button "+r.button+"'>"+i.bSubmit+"<\/a>",g="<a id='eData' class='fm-button "+r.button+"'>"+i.bCancel+"<\/a>",c+="<table class='EditTable ui-common-table' id='"+e+"_2'><tbody><tr><td><hr class='"+r.content+"' style='margin:1px'/><\/td><\/tr><tr><td class='DelButton EditButton'>"+d+"&#160;"+g+"<\/td><\/tr><\/tbody><\/table>",i.gbox="#gbox_"+$.jgrid.jqID(o),$.jgrid.createModal(h,c,n[u.p.id],"#gview_"+$.jgrid.jqID(u.p.id),$("#gview_"+$.jgrid.jqID(u.p.id))[0]),a&&(s=a.call(u,$(c)),s===undefined&&(s=!0)),s===!1)return;$(".fm-button","#"+e+"_2").hover(function(){$(this).addClass(r.hover)},function(){$(this).removeClass(r.hover)});i.delicon=$.extend([!0,"left",f.icon_del],n[u.p.id].delicon);i.cancelicon=$.extend([!0,"left",f.icon_cancel],n[u.p.id].cancelicon);i.delicon[0]===!0&&$("#dData","#"+e+"_2").addClass(i.delicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+r.icon_base+" "+i.delicon[2]+"'><\/span>");i.cancelicon[0]===!0&&$("#eData","#"+e+"_2").addClass(i.cancelicon[1]==="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='"+r.icon_base+" "+i.cancelicon[2]+"'><\/span>");$("#dData","#"+e+"_2").click(function(){var t=[!0,""],a,f=$("#DelData>td","#"+e).text(),s,c;if(y={},$.isFunction(n[u.p.id].onclickSubmit)&&(y=n[u.p.id].onclickSubmit.call(u,n[u.p.id],f)||{}),$.isFunction(n[u.p.id].beforeSubmit)&&(t=n[u.p.id].beforeSubmit.call(u,f)),t[0]&&!n[u.p.id].processing){if(n[u.p.id].processing=!0,v=u.p.prmNames,l=$.extend({},n[u.p.id].delData,y),k=v.oper,l[k]=v.deloper,b=v.id,f=String(f).split(","),!f.length)return!1;for(a in f)f.hasOwnProperty(a)&&(f[a]=$.jgrid.stripPref(u.p.idPrefix,f[a]));l[b]=f.join();$(this).addClass(r.active);s=$.extend({url:n[u.p.id].url||$(u).jqGrid("getGridParam","editurl"),type:n[u.p.id].mtype,data:$.isFunction(n[u.p.id].serializeDelData)?n[u.p.id].serializeDelData.call(u,l):l,complete:function(s,c){var a;if($("#dData","#"+e+"_2").removeClass(r.active),s.status>=300&&s.status!==304?(t[0]=!1,t[1]=$.isFunction(n[u.p.id].errorTextFormat)?n[u.p.id].errorTextFormat.call(u,s):c+" Status: '"+s.statusText+"'. Error code: "+s.status):$.isFunction(n[u.p.id].afterSubmit)&&(t=n[u.p.id].afterSubmit.call(u,s,l)),t[0]===!1)$("#DelError>td","#"+e).html(t[1]),$("#DelError","#"+e).show();else{if(n[u.p.id].reloadAfterSubmit&&u.p.datatype!=="local")$(u).trigger("reloadGrid");else{if(u.p.treeGrid===!0)try{$(u).jqGrid("delTreeNode",u.p.idPrefix+f[0])}catch(v){}else for(a=0;a<f.length;a++)$(u).jqGrid("delRowData",u.p.idPrefix+f[a]);u.p.selrow=null;u.p.selarrrow=[]}$.isFunction(n[u.p.id].afterComplete)&&setTimeout(function(){n[u.p.id].afterComplete.call(u,s,f)},500)}n[u.p.id].processing=!1;t[0]&&$.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:"#gbox_"+$.jgrid.jqID(o),jqm:i.jqModal,onClose:n[u.p.id].onClose})}},$.jgrid.ajaxOptions,n[u.p.id].ajaxDelOptions);s.url||n[u.p.id].useDataProxy||($.isFunction(u.p.dataProxy)?n[u.p.id].useDataProxy=!0:(t[0]=!1,t[1]+=" "+$.jgrid.getRegional(u,"errors.nourl")));t[0]&&(n[u.p.id].useDataProxy?(c=u.p.dataProxy.call(u,s,"del_"+u.p.id),c===undefined&&(c=[!0,""]),c[0]===!1?(t[0]=!1,t[1]=c[1]||"Error deleting the selected row!"):$.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:"#gbox_"+$.jgrid.jqID(o),jqm:i.jqModal,onClose:n[u.p.id].onClose})):s.url==="clientArray"?(l=s.data,s.complete({status:200,statusText:""},"")):$.ajax(s))}return t[0]===!1&&($("#DelError>td","#"+e).html(t[1]),$("#DelError","#"+e).show()),!1});$("#eData","#"+e+"_2").click(function(){return $.jgrid.hideModal("#"+$.jgrid.jqID(h.themodal),{gb:"#gbox_"+$.jgrid.jqID(o),jqm:n[u.p.id].jqModal,onClose:n[u.p.id].onClose}),!1});p&&n[u.p.id].beforeShowForm.call(u,$("#"+e));$.jgrid.viewModal("#"+$.jgrid.jqID(h.themodal),{gbox:"#gbox_"+$.jgrid.jqID(o),jqm:n[u.p.id].jqModal,overlay:n[u.p.id].overlay,modal:n[u.p.id].modal});w&&n[u.p.id].afterShowForm.call(u,$("#"+e))}n[u.p.id].closeOnEscape===!0&&setTimeout(function(){$(".ui-jqdialog-titlebar-close","#"+$.jgrid.jqID(h.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(n,t,i,r,u,f,e){var c=$.jgrid.getRegional(this[0],"nav"),h=this[0].p.styleUI,s=$.jgrid.styleUI[h].navigator,o=$.jgrid.styleUI[h].common;return t=$.extend({edit:!0,editicon:s.icon_edit_nav,add:!0,addicon:s.icon_add_nav,del:!0,delicon:s.icon_del_nav,search:!0,searchicon:s.icon_search_nav,refresh:!0,refreshicon:s.icon_refresh_nav,refreshstate:"firstpage",view:!1,viewicon:s.icon_view_nav,position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null,dropmenu:!1,navButtonText:""},c,t||{}),this.each(function(){var w,l,d,tt,s,a,v,it,p,y;if(!this.p.navGrid&&(w={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},l=this,l.grid&&typeof n=="string")){$(l).data("navGrid")||$(l).data("navGrid",t);s=$(l).data("navGrid");l.p.force_regional&&(s=$.extend(s,c));$("#"+w.themodal)[0]===undefined&&(s.alerttop||s.alertleft||(window.innerWidth!==undefined?(s.alertleft=window.innerWidth,s.alerttop=window.innerHeight):document.documentElement!==undefined&&document.documentElement.clientWidth!==undefined&&document.documentElement.clientWidth!==0?(s.alertleft=document.documentElement.clientWidth,s.alerttop=document.documentElement.clientHeight):(s.alertleft=1024,s.alerttop=768),s.alertleft=s.alertleft/2-parseInt(s.alertwidth,10)/2,s.alerttop=s.alerttop/2-25),$.jgrid.createModal(w,"<div>"+s.alerttext+"<\/div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'><\/span><\/span>",{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqModal:!0,drag:!0,resize:!0,caption:s.alertcap,top:s.alerttop,left:s.alertleft,width:s.alertwidth,height:s.alertheight,closeOnEscape:s.closeOnEscape,zIndex:s.alertzIndex,styleUI:l.p.styleUI},"#gview_"+$.jgrid.jqID(l.p.id),$("#gbox_"+$.jgrid.jqID(l.p.id))[0],!0));var nt=1,g,b=function(){$(this).hasClass(o.disabled)||$(this).addClass(o.hover)},k=function(){$(this).removeClass(o.hover)};for(s.cloneToTop&&l.p.toppager&&(nt=2),g=0;g<nt;g++)v=$("<table class='ui-pg-table navtable ui-common-table'><tbody><tr><\/tr><\/tbody><\/table>"),it="<td class='ui-pg-button "+o.disabled+"' style='width:4px;'><span class='ui-separator'><\/span><\/td>",g===0?(p=n,y=l.p.id,p===l.p.toppager&&(y+="_top",nt=1)):(p=l.p.toppager,y=l.p.id+"_top"),l.p.direction==="rtl"&&$(v).attr("dir","rtl").css("float","right"),r=r||{},s.add&&(a=$("<td class='ui-pg-button "+o.cornerall+"'><\/td>"),$(a).append("<div class='ui-pg-div'><span class='"+o.icon_base+" "+s.addicon+"'><\/span>"+s.addtext+"<\/div>"),$("tr",v).append(a),$(a,v).attr({title:s.addtitle||"",id:r.id||"add_"+y}).click(function(){return $(this).hasClass(o.disabled)||($.isFunction(s.addfunc)?s.addfunc.call(l):$(l).jqGrid("editGridRow","new",r)),!1}).hover(b,k),a=null),i=i||{},s.edit&&(a=$("<td class='ui-pg-button "+o.cornerall+"'><\/td>"),$(a).append("<div class='ui-pg-div'><span class='"+o.icon_base+" "+s.editicon+"'><\/span>"+s.edittext+"<\/div>"),$("tr",v).append(a),$(a,v).attr({title:s.edittitle||"",id:i.id||"edit_"+y}).click(function(){if(!$(this).hasClass(o.disabled)){var n=l.p.selrow;n?$.isFunction(s.editfunc)?s.editfunc.call(l,n):$(l).jqGrid("editGridRow",n,i):($.jgrid.viewModal("#"+w.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(b,k),a=null),e=e||{},s.view&&(a=$("<td class='ui-pg-button "+o.cornerall+"'><\/td>"),$(a).append("<div class='ui-pg-div'><span class='"+o.icon_base+" "+s.viewicon+"'><\/span>"+s.viewtext+"<\/div>"),$("tr",v).append(a),$(a,v).attr({title:s.viewtitle||"",id:e.id||"view_"+y}).click(function(){if(!$(this).hasClass(o.disabled)){var n=l.p.selrow;n?$.isFunction(s.viewfunc)?s.viewfunc.call(l,n):$(l).jqGrid("viewGridRow",n,e):($.jgrid.viewModal("#"+w.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(b,k),a=null),u=u||{},s.del&&(a=$("<td class='ui-pg-button "+o.cornerall+"'><\/td>"),$(a).append("<div class='ui-pg-div'><span class='"+o.icon_base+" "+s.delicon+"'><\/span>"+s.deltext+"<\/div>"),$("tr",v).append(a),$(a,v).attr({title:s.deltitle||"",id:u.id||"del_"+y}).click(function(){if(!$(this).hasClass(o.disabled)){var n;l.p.multiselect?(n=l.p.selarrrow,n.length===0&&(n=null)):n=l.p.selrow;n?$.isFunction(s.delfunc)?s.delfunc.call(l,n):$(l).jqGrid("delGridRow",n,u):($.jgrid.viewModal("#"+w.themodal,{gbox:"#gbox_"+$.jgrid.jqID(l.p.id),jqm:!0}),$("#jqg_alrt").focus())}return!1}).hover(b,k),a=null),(s.add||s.edit||s.del||s.view)&&$("tr",v).append(it),f=f||{},s.search&&(a=$("<td class='ui-pg-button "+o.cornerall+"'><\/td>"),$(a).append("<div class='ui-pg-div'><span class='"+o.icon_base+" "+s.searchicon+"'><\/span>"+s.searchtext+"<\/div>"),$("tr",v).append(a),$(a,v).attr({title:s.searchtitle||"",id:f.id||"search_"+y}).click(function(){return $(this).hasClass(o.disabled)||($.isFunction(s.searchfunc)?s.searchfunc.call(l,f):$(l).jqGrid("searchGrid",f)),!1}).hover(b,k),f.showOnLoad&&f.showOnLoad===!0&&$(a,v).click(),a=null),s.refresh&&(a=$("<td class='ui-pg-button "+o.cornerall+"'><\/td>"),$(a).append("<div class='ui-pg-div'><span class='"+o.icon_base+" "+s.refreshicon+"'><\/span>"+s.refreshtext+"<\/div>"),$("tr",v).append(a),$(a,v).attr({title:s.refreshtitle||"",id:"refresh_"+y}).click(function(){if(!$(this).hasClass(o.disabled)){$.isFunction(s.beforeRefresh)&&s.beforeRefresh.call(l);l.p.search=!1;l.p.resetsearch=!0;try{if(s.refreshstate!=="currentfilter"){var n=l.p.id;l.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(n)).jqFilter("resetFilter")}catch(t){}$.isFunction(l.clearToolbar)&&l.clearToolbar.call(l,!1)}}catch(i){}switch(s.refreshstate){case"firstpage":$(l).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(l).trigger("reloadGrid",[{current:!0}])}$.isFunction(s.afterRefresh)&&s.afterRefresh.call(l)}return!1}).hover(b,k),a=null),tt=$(".ui-jqgrid").css("font-size")||"11px",$("body").append("<div id='testpg2' class='ui-jqgrid "+$.jgrid.styleUI[h].base.entrieBox+"' style='font-size:"+tt+";visibility:hidden;' ><\/div>"),d=$(v).clone().appendTo("#testpg2").width(),$("#testpg2").remove(),l.p._nvtd&&(s.dropmenu?(v=null,$(l).jqGrid("_buildNavMenu",p,y,t,i,r,u,f,e)):d>l.p._nvtd[0]?(l.p.responsive?(v=null,$(l).jqGrid("_buildNavMenu",p,y,t,i,r,u,f,e)):$(p+"_"+s.position,p).append(v).width(d),l.p._nvtd[0]=d):$(p+"_"+s.position,p).append(v),l.p._nvtd[1]=d),l.p.navGrid=!0;l.p.storeNavOptions&&(l.p.navOptions=s,l.p.editOptions=i,l.p.addOptions=r,l.p.delOptions=u,l.p.searchOptions=f,l.p.viewOptions=e,l.p.navButtons=[])}})},navButtonAdd:function(n,t){var i=this[0].p.styleUI,r=$.jgrid.styleUI[i].navigator;return t=$.extend({caption:"newButton",title:"",buttonicon:r.icon_newbutton_nav,onClickButton:null,position:"last",cursor:"pointer",internal:!1},t||{}),this.each(function(){var u;if(this.grid){typeof n=="string"&&n.indexOf("#")!==0&&(n="#"+$.jgrid.jqID(n));var r=$(".navtable",n)[0],f=this,e=$.jgrid.styleUI[i].common.disabled,o=$.jgrid.styleUI[i].common.hover,h=$.jgrid.styleUI[i].common.cornerall,l=$.jgrid.styleUI[i].common.icon_base;if(f.p.storeNavOptions&&!t.internal&&f.p.navButtons.push([n,t]),r){if(t.id&&$("#"+$.jgrid.jqID(t.id),r)[0]!==undefined)return;u=$("<td><\/td>");t.buttonicon.toString().toUpperCase()==="NONE"?$(u).addClass("ui-pg-button "+h).append("<div class='ui-pg-div'>"+t.caption+"<\/div>"):$(u).addClass("ui-pg-button "+h).append("<div class='ui-pg-div'><span class='"+l+" "+t.buttonicon+"'><\/span>"+t.caption+"<\/div>");t.id&&$(u).attr("id",t.id);t.position==="first"?r.rows[0].cells.length===0?$("tr",r).append(u):$("tr td:eq(0)",r).before(u):$("tr",r).append(u);$(u,r).attr("title",t.title||"").click(function(n){return $(this).hasClass(e)||$.isFunction(t.onClickButton)&&t.onClickButton.call(f,n),!1}).hover(function(){$(this).hasClass(e)||$(this).addClass(o)},function(){$(this).removeClass(o)})}else if(r=$(".dropdownmenu",n)[0],r){var s=$(r).val(),a=t.id||$.jgrid.randId(),c=$('<li class="ui-menu-item" role="presentation"><a class="'+h+' g-menu-item" tabindex="0" role="menuitem" id="'+a+'">'+(t.caption||t.title)+"<\/a><\/li>");s&&(t.position==="first"?$("#"+s).prepend(c):$("#"+s).append(c),$(c).on("click",function(n){return $(this).hasClass(e)||($("#"+s).hide(),$.isFunction(t.onClickButton)&&t.onClickButton.call(f,n)),!1}).find("a").hover(function(){$(this).hasClass(e)||$(this).addClass(o)},function(){$(this).removeClass(o)}))}}})},navSeparatorAdd:function(n,t){var r=this[0].p.styleUI,i=$.jgrid.styleUI[r].common;return t=$.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},t||{}),this.each(function(){if(this.grid){typeof n=="string"&&n.indexOf("#")!==0&&(n="#"+$.jgrid.jqID(n));var r=$(".navtable",n)[0],u,f;this.p.storeNavOptions&&this.p.navButtons.push([n,t]);r?(u="<td class='ui-pg-button "+i.disabled+"' style='width:4px;'><span class='"+t.sepclass+"'><\/span>"+t.sepcontent+"<\/td>",t.position==="first"?r.rows[0].cells.length===0?$("tr",r).append(u):$("tr td:eq(0)",r).before(u):$("tr",r).append(u)):(r=$(".dropdownmenu",n)[0],u="<li class='ui-menu-item "+i.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'><\/li>",r&&(f=$(r).val(),f&&(t.position==="first"?$("#"+f).prepend(u):$("#"+f).append(u))))}})},_buildNavMenu:function(n,t,i,r,u,f,e,o){return this.each(function(){var s=this,y=$.jgrid.getRegional(s,"nav"),a=s.p.styleUI,k=$.jgrid.styleUI[a].navigator,p=$.jgrid.styleUI[a].filter,h=$.jgrid.styleUI[a].common,c="form_menu_"+$.jgrid.randId(),w=i.navButtonText?i.navButtonText:y.selectcaption||"Actions",b="<button class='dropdownmenu "+h.button+"' value='"+c+"'>"+w+"<\/button>",l,v;$(n+"_"+i.position,n).append(b);l={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id};v=function(){var y=$(".ui-jqgrid-view").css("font-size")||"11px",v,a,n=$('<ul id="'+c+'" class="ui-nav-menu modal-content" role="menu" tabindex="0" style="display:none;font-size:'+y+'"><\/ul>');i.add&&(u=u||{},v=u.id||"add_"+t,a=$('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.addtext||i.addtitle)+"<\/a><\/li>").click(function(){return $(this).hasClass(h.disabled)||($.isFunction(i.addfunc)?i.addfunc.call(s):$(s).jqGrid("editGridRow","new",u),$(n).hide()),!1}),$(n).append(a));i.edit&&(r=r||{},v=r.id||"edit_"+t,a=$('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.edittext||i.edittitle)+"<\/a><\/li>").click(function(){if(!$(this).hasClass(h.disabled)){var t=s.p.selrow;t?$.isFunction(i.editfunc)?i.editfunc.call(s,t):$(s).jqGrid("editGridRow",t,r):($.jgrid.viewModal("#"+l.themodal,{gbox:"#gbox_"+$.jgrid.jqID(s.p.id),jqm:!0}),$("#jqg_alrt").focus());$(n).hide()}return!1}),$(n).append(a));i.view&&(o=o||{},v=o.id||"view_"+t,a=$('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.viewtext||i.viewtitle)+"<\/a><\/li>").click(function(){if(!$(this).hasClass(h.disabled)){var t=s.p.selrow;t?$.isFunction(i.editfunc)?i.viewfunc.call(s,t):$(s).jqGrid("viewGridRow",t,o):($.jgrid.viewModal("#"+l.themodal,{gbox:"#gbox_"+$.jgrid.jqID(s.p.id),jqm:!0}),$("#jqg_alrt").focus());$(n).hide()}return!1}),$(n).append(a));i.del&&(f=f||{},v=f.id||"del_"+t,a=$('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.deltext||i.deltitle)+"<\/a><\/li>").click(function(){if(!$(this).hasClass(h.disabled)){var t;s.p.multiselect?(t=s.p.selarrrow,t.length===0&&(t=null)):t=s.p.selrow;t?$.isFunction(i.delfunc)?i.delfunc.call(s,t):$(s).jqGrid("delGridRow",t,f):($.jgrid.viewModal("#"+l.themodal,{gbox:"#gbox_"+$.jgrid.jqID(s.p.id),jqm:!0}),$("#jqg_alrt").focus());$(n).hide()}return!1}),$(n).append(a));(i.add||i.edit||i.del||i.view)&&$(n).append("<li class='ui-menu-item "+h.disabled+"' style='width:100%' role='presentation'><hr class='ui-separator-li'><\/li>");i.search&&(e=e||{},v=e.id||"search_"+t,a=$('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.searchtext||i.searchtitle)+"<\/a><\/li>").click(function(){return $(this).hasClass(h.disabled)||($.isFunction(i.searchfunc)?i.searchfunc.call(s,e):$(s).jqGrid("searchGrid",e),$(n).hide()),!1}),$(n).append(a),e.showOnLoad&&e.showOnLoad===!0&&$(a).click());i.refresh&&(v=e.id||"search_"+t,a=$('<li class="ui-menu-item" role="presentation"><a class="'+h.cornerall+' g-menu-item" tabindex="0" role="menuitem" id="'+v+'">'+(i.refreshtext||i.refreshtitle)+"<\/a><\/li>").click(function(){if(!$(this).hasClass(h.disabled)){$.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(s);s.p.search=!1;s.p.resetsearch=!0;try{if(i.refreshstate!=="currentfilter"){var t=s.p.id;s.p.postData.filters="";try{$("#fbox_"+$.jgrid.jqID(t)).jqFilter("resetFilter")}catch(r){}$.isFunction(s.clearToolbar)&&s.clearToolbar.call(s,!1)}}catch(u){}switch(i.refreshstate){case"firstpage":$(s).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":$(s).trigger("reloadGrid",[{current:!0}])}$.isFunction(i.afterRefresh)&&i.afterRefresh.call(s);$(n).hide()}return!1}),$(n).append(a));$(n).hide();$("body").append(n);$("#"+c).addClass("ui-menu "+p.menu_widget);$("#"+c+" > li > a").hover(function(){$(this).addClass(h.hover)},function(){$(this).removeClass(h.hover)})};v();$(".dropdownmenu",n+"_"+i.position).on("click",function(n){var t=$(this).offset(),r=t.left,u=parseInt(t.top),i=$(this).val();$("#"+i).show().css({top:u-($("#"+i).height()+10)+"px",left:r+"px"});n.stopPropagation()});$("body").on("click",function(n){$(n.target).hasClass("dropdownmenu")||$("#"+c).hide()})})},GridToForm:function(n,t){return this.each(function(){var u=this,i,r;if(u.grid&&(r=$(u).jqGrid("getRowData",n),r))for(i in r)r.hasOwnProperty(i)&&($("[name="+$.jgrid.jqID(i)+"]",t).is("input:radio")||$("[name="+$.jgrid.jqID(i)+"]",t).is("input:checkbox")?$("[name="+$.jgrid.jqID(i)+"]",t).each(function(){$(this).val()==r[i]?$(this)[u.p.useProp?"prop":"attr"]("checked",!0):$(this)[u.p.useProp?"prop":"attr"]("checked",!1)}):$("[name="+$.jgrid.jqID(i)+"]",t).val(r[i]))})},FormToGrid:function(n,t,i,r){return this.each(function(){var f=this,e,u;f.grid&&(i||(i="set"),r||(r="first"),e=$(t).serializeArray(),u={},$.each(e,function(n,t){u[t.name]=t.value}),i==="add"?$(f).jqGrid("addRowData",n,u,r):i==="set"&&$(f).jqGrid("setRowData",n,u))})}});$.jgrid.extend({groupingSetup:function(){return this.each(function(){var u=this,t,i,f,r=u.p.colModel,n=u.p.groupingView,e=$.jgrid.styleUI[u.p.styleUI||"jQueryUI"].grouping;if(n!==null&&(typeof n=="object"||$.isFunction(n)))if(n.plusicon||(n.plusicon=e.icon_plus),n.minusicon||(n.minusicon=e.icon_minus),n.groupField.length){for(n.visibiltyOnNextGrouping===undefined&&(n.visibiltyOnNextGrouping=[]),n.lastvalues=[],n._locgr||(n.groups=[]),n.counters=[],t=0;t<n.groupField.length;t++)n.groupOrder[t]||(n.groupOrder[t]="asc"),n.groupText[t]||(n.groupText[t]="{0}"),typeof n.groupColumnShow[t]!="boolean"&&(n.groupColumnShow[t]=!0),typeof n.groupSummary[t]!="boolean"&&(n.groupSummary[t]=!1),n.groupSummaryPos[t]||(n.groupSummaryPos[t]="footer"),n.groupColumnShow[t]===!0?(n.visibiltyOnNextGrouping[t]=!0,$(u).jqGrid("showCol",n.groupField[t])):(n.visibiltyOnNextGrouping[t]=$("#"+$.jgrid.jqID(u.p.id+"_"+n.groupField[t])).is(":visible"),$(u).jqGrid("hideCol",n.groupField[t]));for(n.summary=[],n.hideFirstGroupCol&&(n.formatDisplayField[0]=function(n){return n}),i=0,f=r.length;i<f;i++)n.hideFirstGroupCol&&(r[i].hidden||n.groupField[0]!==r[i].name||(r[i].formatter=function(){return""})),r[i].summaryType&&(r[i].summaryDivider?n.summary.push({nm:r[i].name,st:r[i].summaryType,v:"",sd:r[i].summaryDivider,vd:"",sr:r[i].summaryRound,srt:r[i].summaryRoundType||"round"}):n.summary.push({nm:r[i].name,st:r[i].summaryType,v:"",sr:r[i].summaryRound,srt:r[i].summaryRoundType||"round"}))}else u.p.grouping=!1;else u.p.grouping=!1})},groupingPrepare:function(n,t){return this.each(function(){for(var i=this.p.groupingView,o=this,s=function(){$.isFunction(this.st)?this.v=this.st.call(o,this.v,this.nm,n):(this.v=$(o).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,n),this.st.toLowerCase()==="avg"&&this.sd&&(this.vd=$(o).jqGrid("groupingCalculations.handler",this.st,this.vd,this.sd,this.sr,this.srt,n)))},l=i.groupField.length,e,u,h,f,c=0,r=0;r<l;r++)e=i.groupField[r],h=i.displayField[r],u=n[e],f=h==null?null:n[h],f==null&&(f=u),u!==undefined&&(t===0?(i.groups.push({idx:r,dataIndex:e,value:u,displayValue:f,startRow:t,cnt:1,summary:[]}),i.lastvalues[r]=u,i.counters[r]={cnt:1,pos:i.groups.length-1,summary:$.extend(!0,[],i.summary)},$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary):typeof u=="object"||($.isArray(i.isInTheSameGroup)&&$.isFunction(i.isInTheSameGroup[r])?i.isInTheSameGroup[r].call(o,i.lastvalues[r],u,r,i):i.lastvalues[r]===u)?c===1?(i.groups.push({idx:r,dataIndex:e,value:u,displayValue:f,startRow:t,cnt:1,summary:[]}),i.lastvalues[r]=u,i.counters[r]={cnt:1,pos:i.groups.length-1,summary:$.extend(!0,[],i.summary)},$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary):(i.counters[r].cnt+=1,i.groups[i.counters[r].pos].cnt=i.counters[r].cnt,$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary):(i.groups.push({idx:r,dataIndex:e,value:u,displayValue:f,startRow:t,cnt:1,summary:[]}),i.lastvalues[r]=u,c=1,i.counters[r]={cnt:1,pos:i.groups.length-1,summary:$.extend(!0,[],i.summary)},$.each(i.counters[r].summary,s),i.groups[i.counters[r].pos].summary=i.counters[r].summary))}),this},groupingToggle:function(n){return this.each(function(){var r=this,l=r.p.groupingView,e=n.split("_"),s=parseInt(e[e.length-2],10);e.splice(e.length-2,2);var a=e.join("_"),o=l.minusicon,h=l.plusicon,k=$("#"+$.jgrid.jqID(n)),t=k.length?k[0].nextSibling:null,v=$("#"+$.jgrid.jqID(n)+" span.tree-wrap-"+r.p.direction),y=function(n){var t=$.map(n.split(" "),function(n){if(n.substring(0,a.length+1)===a+"_")return parseInt(n.substring(a.length+1),10)});return t.length>0?t[0]:undefined},i,c,p=!1,w=!1,f=r.p.frozenColumns?r.p.id+"_frozen":!1,b=f?$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(f)):!1,u=b&&b.length?b[0].nextSibling:null;if(v.hasClass(o)){if(l.showSummaryOnHide){if(t)while(t){if(i=y(t.className),i!==undefined&&i<=s)break;$(t).hide();t=t.nextSibling;f&&($(u).hide(),u=u.nextSibling)}}else if(t)while(t){if(i=y(t.className),i!==undefined&&i<=s)break;$(t).hide();t=t.nextSibling;f&&($(u).hide(),u=u.nextSibling)}v.removeClass(o).addClass(h);p=!0}else{if(t)for(c=undefined;t;){if(i=y(t.className),c===undefined&&(c=i===undefined),w=$(t).hasClass("ui-subgrid")&&$(t).hasClass("ui-sg-collapsed"),i!==undefined){if(i<=s)break;i===s+1&&(w||($(t).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(o).addClass(h),f&&$(u).show().find(">td>span.tree-wrap-"+r.p.direction).removeClass(o).addClass(h)))}else c&&(w||($(t).show(),f&&$(u).show()));t=t.nextSibling;f&&(u=u.nextSibling)}v.removeClass(h).addClass(o)}$(r).triggerHandler("jqGridGroupingClickGroup",[n,p]);$.isFunction(r.p.onClickGroup)&&r.p.onClickGroup.call(r,n,p)}),!1},groupingRender:function(n,t,i,r){return this.each(function(){function d(n,t,i){var u=!1,r,f;if(t===0)u=i[n];else if(f=i[n].idx,f===0)u=i[n];else for(r=n;r>=0;r--)if(i[r].idx===f-t){u=i[r];break}return u}function k(n,i,r,u){for(var o=d(n,i,r),s=f.p.colModel,h,a=o.cnt,v="",c,l,e=u;e<t;e++)c="<td "+f.formatCol(e,1,"")+">&#160;<\/td>",l="{0}",$.each(o.summary,function(){if(this.nm===s[e].name){s[e].summaryTpl&&(l=s[e].summaryTpl);typeof this.st=="string"&&this.st.toLowerCase()==="avg"&&(this.sd&&this.vd?this.v=this.v/this.vd:this.v&&a>0&&(this.v=this.v/a));try{this.groupCount=o.cnt;this.groupIndex=o.dataIndex;this.groupValue=o.value;h=f.formatter("",this.v,e,this)}catch(n){h=this.v}return c="<td "+f.formatCol(e,1,"")+">"+$.jgrid.template(l,h)+"<\/td>",!1}}),v+=c;return v}var f=this,u=f.p.groupingView,e="",v="",s,c,y=u.groupCollapse?u.plusicon:u.minusicon,o,p=[],b=u.groupField.length,l=$.jgrid.styleUI[f.p.styleUI||"jQueryUI"].common,h,w,a;y=y+" tree-wrap-"+f.p.direction;$.each(f.p.colModel,function(n,t){for(var i=0;i<b;i++)if(u.groupField[i]===t.name){p[i]=n;break}});h=0;w=$.makeArray(u.groupSummary);w.reverse();a=f.p.multiselect?' colspan="2"':"";$.each(u.groups,function(d,g){var nt,ot,it,et;if(u._locgr&&!(g.startRow+g.cnt>(i-1)*r&&g.startRow<i*r))return!0;h++;c=f.p.id+"ghead_"+g.idx;s=c+"_"+d;v="<span style='cursor:pointer;margin-right:8px;margin-left:5px;' class='"+l.icon_base+" "+y+"' onclick=\"jQuery('#"+$.jgrid.jqID(f.p.id)+"').jqGrid('groupingToggle','"+s+"');return false;\"><\/span>";try{$.isArray(u.formatDisplayField)&&$.isFunction(u.formatDisplayField[g.idx])?(g.displayValue=u.formatDisplayField[g.idx].call(f,g.displayValue,g.value,f.p.colModel[p[g.idx]],g.idx,u),o=g.displayValue):o=f.formatter(s,g.displayValue,p[g.idx],g.value)}catch(ct){o=g.displayValue}if(nt="",nt=$.isFunction(u.groupText[g.idx])?u.groupText[g.idx].call(f,o,g.cnt,g.summary):$.jgrid.template(u.groupText[g.idx],o,g.cnt,g.summary),typeof nt=="string"||typeof nt=="number"||(nt=o),u.groupSummaryPos[g.idx]==="header"?(e+='<tr id="'+s+'"'+(u.groupCollapse&&g.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+l.content+" jqgroup ui-row-"+f.p.direction+" "+c+'"><td style="padding-left:'+g.idx*12+'px;"'+a+">"+v+nt+"<\/td>",e+=k(d,0,u.groups,u.groupColumnShow[g.idx]===!1?a===""?2:3:a===""?1:2),e+="<\/tr>"):e+='<tr id="'+s+'"'+(u.groupCollapse&&g.idx>0?' style="display:none;" ':" ")+'role="row" class= "'+l.content+" jqgroup ui-row-"+f.p.direction+" "+c+'"><td style="padding-left:'+g.idx*12+'px;" colspan="'+(u.groupColumnShow[g.idx]===!1?t-1:t)+'">'+v+nt+"<\/td><\/tr>",ot=b-1===g.idx,ot){var ft=u.groups[d+1],rt,tt,ut=0,st=g.startRow,ht=ft!==undefined?ft.startRow:u.groups[d].startRow+u.groups[d].cnt;for(u._locgr&&(ut=(i-1)*r,ut>g.startRow&&(st=ut)),rt=st;rt<ht;rt++){if(!n[rt-ut])break;e+=n[rt-ut].join("")}if(u.groupSummaryPos[g.idx]!=="header"){if(ft!==undefined){for(it=0;it<u.groupField.length;it++)if(ft.dataIndex===u.groupField[it])break;h=u.groupField.length-it}for(tt=0;tt<h;tt++)w[tt]&&(et="",u.groupCollapse&&!u.showSummaryOnHide&&(et=' style="display:none;"'),e+="<tr"+et+' jqfootlevel="'+(g.idx-tt)+'" role="row" class="'+l.content+" jqfoot ui-row-"+f.p.direction+'">',e+=k(d,tt,u.groups,0),e+="<\/tr>");h=it}}});$("#"+$.jgrid.jqID(f.p.id)+" tbody:first").append(e);e=null})},groupingGroupBy:function(n,t){return this.each(function(){var u=this,r,i;for(typeof n=="string"&&(n=[n]),r=u.p.groupingView,u.p.grouping=!0,r._locgr=!1,r.visibiltyOnNextGrouping===undefined&&(r.visibiltyOnNextGrouping=[]),i=0;i<r.groupField.length;i++)!r.groupColumnShow[i]&&r.visibiltyOnNextGrouping[i]&&$(u).jqGrid("showCol",r.groupField[i]);for(i=0;i<n.length;i++)r.visibiltyOnNextGrouping[i]=$("#"+$.jgrid.jqID(u.p.id)+"_"+$.jgrid.jqID(n[i])).is(":visible");u.p.groupingView=$.extend(u.p.groupingView,t||{});r.groupField=n;$(u).trigger("reloadGrid")})},groupingRemove:function(n){return this.each(function(){var t=this,i,r;if(n===undefined&&(n=!0),t.p.grouping=!1,n===!0){for(i=t.p.groupingView,r=0;r<i.groupField.length;r++)!i.groupColumnShow[r]&&i.visibiltyOnNextGrouping[r]&&$(t).jqGrid("showCol",i.groupField);$("tr.jqgroup, tr.jqfoot","#"+$.jgrid.jqID(t.p.id)+" tbody:first").remove();$("tr.jqgrow:hidden","#"+$.jgrid.jqID(t.p.id)+" tbody:first").show()}else $(t).trigger("reloadGrid")})},groupingCalculations:{handler:function(n,t,i,r,u,f){var o={sum:function(){return parseFloat(t||0)+parseFloat(f[i]||0)},min:function(){return t===""?parseFloat(f[i]||0):Math.min(parseFloat(t),parseFloat(f[i]||0))},max:function(){return t===""?parseFloat(f[i]||0):Math.max(parseFloat(t),parseFloat(f[i]||0))},count:function(){return(t===""&&(t=0),f.hasOwnProperty(i))?t+1:0},avg:function(){return o.sum()}},e,s;if(!o[n])throw"jqGrid Grouping No such method: "+n;return e=o[n](),r!=null&&(u==="fixed"?e=e.toFixed(r):(s=Math.pow(10,r),e=Math.round(e*s)/s)),e}},setGroupHeaders:function(n){return n=$.extend({useColSpanStyle:!1,groupHeaders:[]},n||{}),this.each(function(){var t=this,i,c,y=0,o,u,f,l,b,r,a,p,k,s,d,w=t.p.colModel,g=w.length,nt=t.grid.headers,e=$("table.ui-jqgrid-htable",t.grid.hDiv),ut=e.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),ft=e.children("thead"),v,h=e.find(".jqg-first-row-header"),tt=$.jgrid.styleUI[t.p.styleUI||"jQueryUI"].base,it,rt;for(t.p.groupHeader||(t.p.groupHeader=[]),t.p.groupHeader.push(n),h[0]===undefined?h=$("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):h.empty(),rt=function(n,t){for(var r=t.length,i=0;i<r;i++)if(t[i].startColumnName===n)return i;return-1},$(t).prepend(ft),o=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),i=0;i<g;i++)if(f=nt[i].el,l=$(f),c=w[i],b={height:"0px",width:nt[i].width+"px",display:c.hidden?"none":""},$("<th>",{role:"gridcell"}).css(b).addClass("ui-first-th-"+t.p.direction).appendTo(h),f.style.width="",r=rt(c.name,n.groupHeaders),r>=0){for(a=n.groupHeaders[r],p=a.numberOfColumns,k=a.titleText,d=a.className||"",s=0,r=0;r<p&&i+r<g;r++)w[i+r].hidden||s++;u=$("<th>").attr({role:"columnheader"}).addClass(tt.headerBox+" ui-th-column-header ui-th-"+t.p.direction+" "+d).html(k);s>0&&u.attr("colspan",String(s));t.p.headertitles&&u.attr("title",u.text());s===0&&u.hide();l.before(u);o.append(f);y=p-1}else y===0?n.useColSpanStyle?l.attr("rowspan","2"):($("<th>",{role:"columnheader"}).addClass(tt.headerBox+" ui-th-column-header ui-th-"+t.p.direction).css({display:c.hidden?"none":""}).insertBefore(l),o.append(f)):(o.append(f),y--);v=$(t).children("thead");v.prepend(h);o.insertAfter(ut);e.append(v);n.useColSpanStyle&&(e.find("span.ui-jqgrid-resize").each(function(){var n=$(this).parent();n.is(":visible")&&(this.style.cssText="height: "+n.height()+"px !important; cursor: col-resize;")}),e.find("div.ui-jqgrid-sortable").each(function(){var n=$(this),t=n.parent();t.is(":visible")&&t.is(":has(span.ui-jqgrid-resize)")&&n.css("top",(t.height()-n.outerHeight())/2-4+"px")}));it=v.find("tr.jqg-first-row-header");$(t).bind("jqGridResizeStop.setGroupHeaders",function(n,t,i){it.find("th").eq(i).width(t)})})},destroyGroupHeader:function(n){return n===undefined&&(n=!0),this.each(function(){var u=this,f,t,s,r,i,e,o=u.grid,h=$("table.ui-jqgrid-htable thead",o.hDiv),l=u.p.colModel,c;if(o){for($(this).unbind(".setGroupHeaders"),f=$("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),r=o.headers,t=0,s=r.length;t<s;t++){c=l[t].hidden?"none":"";i=$(r[t].el).width(r[t].width).css("display",c);try{i.removeAttr("rowSpan")}catch(a){i.attr("rowSpan",1)}f.append(i);e=i.children("span.ui-jqgrid-resize");e.length>0&&(e[0].style.height="");i.children("div")[0].style.top=""}$(h).children("tr.ui-jqgrid-labels").remove();$(h).prepend(f);n===!0&&$(u).jqGrid("setGridParam",{groupHeader:null})}})}});$.jgrid=$.jgrid||{};$.extend($.jgrid,{saveState:function(n,t){if(t=$.extend({useStorage:!0,storageType:"localStorage",beforeSetItem:null,compression:!1,compressionModule:"LZString",compressionMethod:"compressToUTF16"},t||{}),n){var r="",e="",u,i=$("#"+n)[0],f;if(i.grid){if(f=$(i).data("inlineNav"),f&&i.p.inlineNav&&$(i).jqGrid("setGridParam",{_iN:f}),f=$(i).data("filterToolbar"),f&&i.p.filterToolbar&&$(i).jqGrid("setGridParam",{_fT:f}),r=$(i).jqGrid("jqGridExport",{exptype:"jsonstring",ident:"",root:""}),$(i.grid.bDiv).find(".ui-jqgrid-btable tr:gt(0)").each(function(n,t){e+=t.outerHTML}),$.isFunction(t.beforeSetItem)&&(u=t.beforeSetItem.call(i,r),u!=null&&(r=u)),t.compression&&t.compressionModule)try{u=window[t.compressionModule][t.compressionMethod](r);u!=null&&(r=u,e=window[t.compressionModule][t.compressionMethod](e))}catch(o){}if(t.useStorage&&$.jgrid.isLocalStorage())try{window[t.storageType].setItem("jqGrid"+i.p.id,r);window[t.storageType].setItem("jqGrid"+i.p.id+"_data",e)}catch(o){o.code===22&&alert("Local storage limit is over!")}return r}}},loadState:function(n,t,i){var r,s,o,h,l,c,e,a,u,f;if(i=$.extend({useStorage:!0,storageType:"localStorage",clearAfterLoad:!1,beforeSetGrid:null,afterSetGrid:null,decompression:!1,decompressionModule:"LZString",decompressionMethod:"decompressFromUTF16"},i||{}),n){if(o=$("#"+n)[0],i.useStorage)try{t=window[i.storageType].getItem("jqGrid"+o.id);h=window[i.storageType].getItem("jqGrid"+o.id+"_data")}catch(v){}if(t){if(i.decompression&&i.decompressionModule)try{r=window[i.decompressionModule][i.decompressionMethod](t);r!=null&&(t=r,h=window[i.decompressionModule][i.decompressionMethod](h))}catch(v){}if(r=jqGridUtils.parse(t),r&&$.type(r)==="object"){if(o.grid&&$.jgrid.gridUnload(n),$.isFunction(i.beforeSetGrid)&&(s=i.beforeSetGrid(r),s&&$.type(s)==="object"&&(r=s)),e=function(n){return n},a={reccount:r.reccount,records:r.records,lastpage:r.lastpage,shrinkToFit:e(r.shrinkToFit),data:e(r.data),datatype:e(r.datatype),grouping:e(r.grouping)},r.shrinkToFit=!1,r.data=[],r.datatype="local",r.grouping=!1,r.inlineNav&&(l=e(r._iN),r._iN=null,delete r._iN),r.filterToolbar&&(c=e(r._fT),r._fT=null,delete r._fT),u=$("#"+n).jqGrid(r),u.append(h),u.jqGrid("setGridParam",a),r.storeNavOptions&&r.navGrid&&(u[0].p.navGrid=!1,u.jqGrid("navGrid",r.pager,r.navOptions,r.editOptions,r.addOptions,r.delOptions,r.searchOptions,r.viewOptions),r.navButtons&&r.navButtons.length))for(f=0;f<r.navButtons.length;f++)"sepclass"in r.navButtons[f][1]?u.jqGrid("navSeparatorAdd",r.navButtons[f][0],r.navButtons[f][1]):u.jqGrid("navButtonAdd",r.navButtons[f][0],r.navButtons[f][1]);r.inlineNav&&l&&(u.jqGrid("setGridParam",{inlineNav:!1}),u.jqGrid("inlineNav",r.pager,l));r.filterToolbar&&c&&(u.jqGrid("setGridParam",{filterToolbar:!1}),c.restoreFromFilters=!0,u.jqGrid("filterToolbar",c));r.frozenColumns&&u.jqGrid("setFrozenColumns");u[0].updatepager(!0,!0);$.isFunction(i.afterSetGrid)&&i.afterSetGrid(u);i.clearAfterLoad&&(window[i.storageType].removeItem("jqGrid"+o.id),window[i.storageType].removeItem("jqGrid"+o.id+"_data"))}else alert("can not convert to object")}}},isGridInStorage:function(n,t){var i={storageType:"localStorage"},r,u,f;i=$.extend(i,t||{});try{u=window[i.storageType].getItem("jqGrid"+n);f=window[i.storageType].getItem("jqGrid"+n+"_data");r=u!=null&&f!=null&&typeof u=="string"&&typeof f=="string"}catch(e){r=!1}return r},setRegional:function(n,t){var i={storageType:"sessionStorage"};if(i=$.extend(i,t||{}),i.regional){$.jgrid.saveState(n,i);i.beforeSetGrid=function(n){return n.regional=i.regional,n.force_regional=!0,n};$.jgrid.loadState(n,null,i);var u=$("#"+n)[0],e=$(u).jqGrid("getGridParam","colModel"),f=-1,r=$.jgrid.getRegional(u,"nav");$.each(e,function(n){if(this.formatter&&this.formatter==="actions")return f=n,!1});f!==-1&&r&&$("#"+n+" tbody tr").each(function(){var n=this.cells[f];$(n).find(".ui-inline-edit").attr("title",r.edittitle);$(n).find(".ui-inline-del").attr("title",r.deltitle);$(n).find(".ui-inline-save").attr("title",r.savetitle);$(n).find(".ui-inline-cancel").attr("title",r.canceltitle)});try{window[i.storageType].removeItem("jqGrid"+u.id);window[i.storageType].removeItem("jqGrid"+u.id+"_data")}catch(o){}}},jqGridImport:function(n,t){var r;t=$.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"root>grid",data:"root>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{});var i=(n.indexOf("#")===0?"":"#")+$.jgrid.jqID(n),u=function(n,t){var o=$(t.xmlGrid.config,n)[0],s=$(t.xmlGrid.data,n)[0],r,u,f,e;if(jqGridUtils.xmlToJSON){r=jqGridUtils.xmlToJSON(o);for(f in r)r.hasOwnProperty(f)&&(u=r[f]);s?(e=r.grid.datatype,r.grid.datatype="xmlstring",r.grid.datastr=n,$(i).jqGrid(u).jqGrid("setGridParam",{datatype:e})):setTimeout(function(){$(i).jqGrid(u)},0)}else alert("xml2json or parse are not present")},f=function(n,t){var e;if(n&&typeof n=="string"){var u=jqGridUtils.parse(n),r=u[t.jsonGrid.config],f=u[t.jsonGrid.data];f?(e=r.datatype,r.datatype="jsonstring",r.datastr=f,$(i).jqGrid(r).jqGrid("setGridParam",{datatype:e})):$(i).jqGrid(r)}};switch(t.imptype){case"xml":$.ajax($.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(n,r){r==="success"&&(u(n.responseXML,t),$(i).triggerHandler("jqGridImportComplete",[n,t]),$.isFunction(t.importComplete)&&t.importComplete(n));n=null}},t.ajaxOptions));break;case"xmlstring":t.impstring&&typeof t.impstring=="string"&&(r=$.parseXML(t.impstring),r&&(u(r,t),$(i).triggerHandler("jqGridImportComplete",[r,t]),$.isFunction(t.importComplete)&&t.importComplete(r)));break;case"json":$.ajax($.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(n){try{f(n.responseText,t);$(i).triggerHandler("jqGridImportComplete",[n,t]);$.isFunction(t.importComplete)&&t.importComplete(n)}catch(r){}n=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&typeof t.impstring=="string"&&(f(t.impstring,t),$(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),$.isFunction(t.importComplete)&&t.importComplete(t.impstring))}}});$.jgrid.extend({jqGridExport:function(n){n=$.extend({exptype:"xmlstring",root:"grid",ident:"\t",addOptions:{}},n||{});var t=null;return this.each(function(){if(this.grid){var r,i=$.extend(!0,{},$(this).jqGrid("getGridParam"),n.addOptions);if(i.rownumbers&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.multiselect&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.subGrid&&(i.colNames.splice(0,1),i.colModel.splice(0,1)),i.knv=null,i.treeGrid)for(r in i.treeReader)i.treeReader.hasOwnProperty(r)&&(i.colNames.splice(i.colNames.length-1),i.colModel.splice(i.colModel.length-1));switch(n.exptype){case"xmlstring":t="<"+n.root+">"+jqGridUtils.jsonToXML(i,{xmlDecl:""})+"<\/"+n.root+">";break;case"jsonstring":t=jqGridUtils.stringify(i);n.root&&(t="{"+n.root+":"+t+"}")}}}),t},excelExport:function(n){return n=$.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},n||{}),this.each(function(){var r,t,i;this.grid&&n.exptype==="remote"&&(t=$.extend({},this.p.postData),t[n.oper]=n.tag,i=jQuery.param(t),r=n.url.indexOf("?")!==-1?n.url+"&"+i:n.url+"?"+i,window.location=r)})}});$.jgrid.inlineEdit=$.jgrid.inlineEdit||{};$.jgrid.extend({editRow:function(n,t,i,r,u,f,e,o,s){var h={},c=$.makeArray(arguments).slice(1);return $.type(c[0])==="object"?h=c[0]:(t!==undefined&&(h.keys=t),$.isFunction(i)&&(h.oneditfunc=i),$.isFunction(r)&&(h.successfunc=r),u!==undefined&&(h.url=u),f!==undefined&&(h.extraparam=f),$.isFunction(e)&&(h.aftersavefunc=e),$.isFunction(o)&&(h.errorfunc=o),$.isFunction(s)&&(h.afterrestorefunc=s)),h=$.extend(!0,{keys:!1,keyevent:"keydown",oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",focusField:!0},$.jgrid.inlineEdit,h),this.each(function(){var t=this,u,r,c,l=0,e=null,s={},f,i,o,a=$(this).jqGrid("getStyleUI",t.p.styleUI+".inlinedit","inputClass",!0);t.grid&&(f=$(t).jqGrid("getInd",n,!0),f!==!1)&&(o=$.isFunction(h.beforeEditRow)?h.beforeEditRow.call(t,h,n):undefined,o===undefined&&(o=!0),o)&&(c=$(f).attr("editable")||"0",c!=="0"||$(f).hasClass("not-editable-row")||(i=t.p.colModel,$('td[role="gridcell"]',f).each(function(f){var h,c,o;if(u=i[f].name,h=t.p.treeGrid===!0&&u===t.p.ExpandColumn,h)r=$("span:first",this).html();else try{r=$.unformat.call(t,this,{rowId:n,colModel:i[f]},f)}catch(v){r=i[f].edittype&&i[f].edittype==="textarea"?$(this).text():$(this).html()}u!=="cb"&&u!=="subgrid"&&u!=="rn"&&(t.p.autoencode&&(r=$.jgrid.htmlDecode(r)),s[u]=r,i[f].editable===!0&&(e===null&&(e=f),h?$("span:first",this).html(""):$(this).html(""),c=$.extend({},i[f].editoptions||{},{id:n+"_"+u,name:u,rowId:n,oper:"edit"}),i[f].edittype||(i[f].edittype="text"),(r==="&nbsp;"||r==="&#160;"||r.length===1&&r.charCodeAt(0)===160)&&(r=""),o=$.jgrid.createEl.call(t,i[f].edittype,c,r,!0,$.extend({},$.jgrid.ajaxOptions,t.p.ajaxSelectOptions||{})),$(o).addClass("editable inline-edit-cell"),$.inArray(i[f].edittype,["text","textarea","password","select"])>-1&&$(o).addClass(a),h?$("span:first",this).append(o):$(this).append(o),$.jgrid.bindEv.call(t,o,c),i[f].edittype==="select"&&i[f].editoptions!==undefined&&i[f].editoptions.multiple===!0&&i[f].editoptions.dataUrl===undefined&&$.jgrid.msie&&$(o).width($(o).width()),l++))}),l>0&&(s.id=n,t.p.savedRow.push(s),$(f).attr("editable","1"),h.focusField&&(typeof h.focusField=="number"&&parseInt(h.focusField,10)<=i.length&&(e=h.focusField),setTimeout(function(){var n=$("td:eq("+e+") :input:visible",f).not(":disabled");n.length>0&&n.focus()},0)),h.keys===!0&&$(f).bind(h.keyevent,function(i){if(i.keyCode===27){if($(t).jqGrid("restoreRow",n,h.afterrestorefunc),t.p.inlineNav)try{$(t).jqGrid("showAddEditButtons")}catch(u){}return!1}if(i.keyCode===13){var r=i.target;if(r.tagName==="TEXTAREA")return!0;if($(t).jqGrid("saveRow",n,h)&&t.p.inlineNav)try{$(t).jqGrid("showAddEditButtons")}catch(f){}return!1}}),$(t).triggerHandler("jqGridInlineEditRow",[n,h]),$.isFunction(h.oneditfunc)&&h.oneditfunc.call(t,n))))})},saveRow:function(n,t,i,r,u,f,e){var ct=$.makeArray(arguments).slice(1),s={},o=this[0],l,ft,et,v,tt,it,rt,ot,st,g,ht;$.type(ct[0])==="object"?s=ct[0]:($.isFunction(t)&&(s.successfunc=t),i!==undefined&&(s.url=i),r!==undefined&&(s.extraparam=r),$.isFunction(u)&&(s.aftersavefunc=u),$.isFunction(f)&&(s.errorfunc=f),$.isFunction(e)&&(s.afterrestorefunc=e));s=$.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST",saveui:"enable",savetext:$.jgrid.getRegional(o,"defaults.savetext")},$.jgrid.inlineEdit,s);var w=!1,c,h={},b={},y={},lt,p,k,a,at=!1,vt=$.trim($(o).jqGrid("getStyleUI",o.p.styleUI+".common","error",!0));if(!o.grid||(a=$(o).jqGrid("getInd",n,!0),a===!1))return w;var nt=$.jgrid.getRegional(this,"errors"),d=$.jgrid.getRegional(this,"edit"),ut=$.isFunction(s.beforeSaveRow)?s.beforeSaveRow.call(o,s,n):undefined;if(ut===undefined&&(ut=!0),ut){if(lt=$(a).attr("editable"),s.url=s.url||o.p.editurl,lt==="1"){if($('td[role="gridcell"]',a).each(function(n){var t,r,i;if(l=o.p.colModel[n],c=l.name,c!=="cb"&&c!=="subgrid"&&l.editable===!0&&c!=="rn"&&!$(this).hasClass("not-editable-cell")){switch(l.edittype){case"checkbox":t=["Yes","No"];l.editoptions&&(t=l.editoptions.value.split(":"));h[c]=$("input",this).is(":checked")?t[0]:t[1];break;case"text":case"password":case"textarea":case"button":h[c]=$("input, textarea",this).val();break;case"select":l.editoptions.multiple?(r=$("select",this),i=[],h[c]=$(r).val(),h[c]=h[c]?h[c].join(","):"",$("select option:selected",this).each(function(n,t){i[n]=$(t).text()}),b[c]=i.join(",")):(h[c]=$("select option:selected",this).val(),b[c]=$("select option:selected",this).text());l.formatter&&l.formatter==="select"&&(b={});break;case"custom":try{if(l.editoptions&&$.isFunction(l.editoptions.custom_value)){if(h[c]=l.editoptions.custom_value.call(o,$(".customelement",this),"get"),h[c]===undefined)throw"e2";}else throw"e1";}catch(u){u==="e1"?$.jgrid.info_dialog(nt.errcap,"function 'custom_value' "+d.msg.nodefined,d.bClose,{styleUI:o.p.styleUI}):$.jgrid.info_dialog(nt.errcap,u.message,d.bClose,{styleUI:o.p.styleUI})}}if(k=$.jgrid.checkValues.call(o,h[c],n),k[0]===!1)return!1;o.p.autoencode&&(h[c]=$.jgrid.htmlEncode(h[c]));s.url!=="clientArray"&&l.editoptions&&l.editoptions.NullIfEmpty===!0&&h[c]===""&&(y[c]="null",at=!0)}}),k[0]===!1){try{ft=$(o).jqGrid("getGridRowById",n);et=$.jgrid.findPos(ft);$.jgrid.info_dialog(nt.errcap,k[1],d.bClose,{left:et[0],top:et[1]+$(ft).outerHeight(),styleUI:o.p.styleUI})}catch(yt){alert(k[1])}return w}if(tt=o.p.prmNames,it=n,v=o.p.keyName===!1?tt.id:o.p.keyName,h&&(h[tt.oper]=tt.editoper,h[v]===undefined||h[v]===""?h[v]=n:a.id!==o.p.idPrefix+h[v]&&(rt=$.jgrid.stripPref(o.p.idPrefix,n),o.p._index[rt]!==undefined&&(o.p._index[h[v]]=o.p._index[rt],delete o.p._index[rt]),n=o.p.idPrefix+h[v],$(a).attr("id",n),o.p.selrow===it&&(o.p.selrow=n),$.isArray(o.p.selarrrow)&&(ot=$.inArray(it,o.p.selarrrow),ot>=0&&(o.p.selarrrow[ot]=n)),o.p.multiselect&&(st="jqg_"+o.p.id+"_"+n,$("input.cbox",a).attr("id",st).attr("name",st))),o.p.inlineData===undefined&&(o.p.inlineData={}),h=$.extend({},h,o.p.inlineData,s.extraparam)),s.url==="clientArray"){for(h=$.extend({},h,b),o.p.autoencode&&$.each(h,function(n,t){h[n]=$.jgrid.htmlDecode(t)}),ht=$(o).jqGrid("setRowData",n,h),$(a).attr("editable","0"),g=0;g<o.p.savedRow.length;g++)if(String(o.p.savedRow[g].id)===String(it)){p=g;break}p>=0&&o.p.savedRow.splice(p,1);$(o).triggerHandler("jqGridInlineAfterSaveRow",[n,ht,h,s]);$.isFunction(s.aftersavefunc)&&s.aftersavefunc.call(o,n,ht,h,s);w=!0;$(a).removeClass("jqgrid-new-row").unbind("keydown")}else $(o).jqGrid("progressBar",{method:"show",loadtype:s.saveui,htmlcontent:s.savetext}),y=$.extend({},h,y),y[v]=$.jgrid.stripPref(o.p.idPrefix,y[v]),$.ajax($.extend({url:s.url,data:$.isFunction(o.p.serializeRowData)?o.p.serializeRowData.call(o,y):y,type:s.mtype,async:!1,complete:function(t,i){if($(o).jqGrid("progressBar",{method:"hide",loadtype:s.saveui,htmlcontent:s.savetext}),i==="success"){var f=!0,r,u;if(r=$(o).triggerHandler("jqGridInlineSuccessSaveRow",[t,n,s]),$.isArray(r)||(r=[!0,y]),r[0]&&$.isFunction(s.successfunc)&&(r=s.successfunc.call(o,t)),$.isArray(r)?(f=r[0],h=r[1]||h):f=r,f===!0){for(o.p.autoencode&&$.each(h,function(n,t){h[n]=$.jgrid.htmlDecode(t)}),at&&$.each(h,function(n){h[n]==="null"&&(h[n]="")}),h=$.extend({},h,b),$(o).jqGrid("setRowData",n,h),$(a).attr("editable","0"),u=0;u<o.p.savedRow.length;u++)if(String(o.p.savedRow[u].id)===String(n)){p=u;break}p>=0&&o.p.savedRow.splice(p,1);$(o).triggerHandler("jqGridInlineAfterSaveRow",[n,t,h,s]);$.isFunction(s.aftersavefunc)&&s.aftersavefunc.call(o,n,t,h,s);w=!0;$(a).removeClass("jqgrid-new-row").unbind("keydown")}else $(o).triggerHandler("jqGridInlineErrorSaveRow",[n,t,i,null,s]),$.isFunction(s.errorfunc)&&s.errorfunc.call(o,n,t,i,null),s.restoreAfterError===!0&&$(o).jqGrid("restoreRow",n,s.afterrestorefunc)}},error:function(t,i,r){if($("#lui_"+$.jgrid.jqID(o.p.id)).hide(),$(o).triggerHandler("jqGridInlineErrorSaveRow",[n,t,i,r,s]),$.isFunction(s.errorfunc))s.errorfunc.call(o,n,t,i,r);else{var u=t.responseText||t.statusText;try{$.jgrid.info_dialog(nt.errcap,'<div class="'+vt+'">'+u+"<\/div>",d.bClose,{buttonalign:"right",styleUI:o.p.styleUI})}catch(f){alert(u)}}s.restoreAfterError===!0&&$(o).jqGrid("restoreRow",n,s.afterrestorefunc)}},$.jgrid.ajaxOptions,o.p.ajaxRowOptions||{}))}return w}},restoreRow:function(n,t){var r=$.makeArray(arguments).slice(1),i={};return $.type(r[0])==="object"?i=r[0]:$.isFunction(t)&&(i.afterrestorefunc=t),i=$.extend(!0,{},$.jgrid.inlineEdit,i),this.each(function(){var t=this,r=-1,f,o={},u,e;if(t.grid&&(f=$(t).jqGrid("getInd",n,!0),f!==!1)&&(e=$.isFunction(i.beforeCancelRow)?i.beforeCancelRow.call(t,i,n):undefined,e===undefined&&(e=!0),e)){for(u=0;u<t.p.savedRow.length;u++)if(String(t.p.savedRow[u].id)===String(n)){r=u;break}if(r>=0){if($.isFunction($.fn.datepicker))try{$("input.hasDatepicker","#"+$.jgrid.jqID(f.id)).datepicker("hide")}catch(s){}$.each(t.p.colModel,function(){this.editable===!0&&t.p.savedRow[r].hasOwnProperty(this.name)&&(o[this.name]=t.p.savedRow[r][this.name])});$(t).jqGrid("setRowData",n,o);$(f).attr("editable","0").unbind("keydown");t.p.savedRow.splice(r,1);$("#"+$.jgrid.jqID(n),"#"+$.jgrid.jqID(t.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){$(t).jqGrid("delRowData",n);$(t).jqGrid("showAddEditButtons")},0)}$(t).triggerHandler("jqGridInlineAfterRestoreRow",[n]);$.isFunction(i.afterrestorefunc)&&i.afterrestorefunc.call(t,n)}})},addRow:function(n){return n=$.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},n||{}),this.each(function(){var t,i,r,u;this.grid&&(t=this,i=$.isFunction(n.beforeAddRow)?n.beforeAddRow.call(t,n.addRowParams):undefined,i===undefined&&(i=!0),i)&&(n.rowID=$.isFunction(n.rowID)?n.rowID.call(t,n):n.rowID!=null?n.rowID:$.jgrid.randId(),n.useDefValues===!0&&$(t.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var i=this.editoptions.defaultValue,r=$.isFunction(i)?i.call(t):i;n.initdata[this.name]=r}}),$(t).jqGrid("addRowData",n.rowID,n.initdata,n.position),n.rowID=t.p.idPrefix+n.rowID,$("#"+$.jgrid.jqID(n.rowID),"#"+$.jgrid.jqID(t.p.id)).addClass("jqgrid-new-row"),n.useFormatter?$("#"+$.jgrid.jqID(n.rowID)+" .ui-inline-edit","#"+$.jgrid.jqID(t.p.id)).click():(r=t.p.prmNames,u=r.oper,n.addRowParams.extraparam[u]=r.addoper,$(t).jqGrid("editRow",n.rowID,n.addRowParams),$(t).jqGrid("setSelection",n.rowID)))})},inlineNav:function(n,t){var i=this[0],u=$.jgrid.getRegional(i,"nav"),r=$.jgrid.styleUI[i.p.styleUI].inlinedit;return t=$.extend(!0,{edit:!0,editicon:r.icon_edit_nav,add:!0,addicon:r.icon_add_nav,save:!0,saveicon:r.icon_save_nav,cancel:!0,cancelicon:r.icon_cancel_nav,addParams:{addRowParams:{extraparam:{}}},editParams:{},restoreAfterSelect:!0},u,t||{}),this.each(function(){var r,f,s,o,h,e;if(this.grid&&!this.p.inlineNav){if(r=$.jgrid.jqID(i.p.id),f=$.trim($(i).jqGrid("getStyleUI",i.p.styleUI+".common","disabled",!0)),i.p.navGrid||$(i).jqGrid("navGrid",n,{refresh:!1,edit:!1,add:!1,del:!1,search:!1,view:!1}),$(i).data("inlineNav")||$(i).data("inlineNav",t),i.p.force_regional&&(t=$.extend(t,u)),i.p.inlineNav=!0,t.addParams.useFormatter===!0)for(s=i.p.colModel,o=0;o<s.length;o++)if(s[o].formatter&&s[o].formatter==="actions"){s[o].formatoptions&&(h={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},e=$.extend(h,s[o].formatoptions),t.addParams.addRowParams={keys:e.keys,oneditfunc:e.onEdit,successfunc:e.onSuccess,url:e.url,extraparam:e.extraparam,aftersavefunc:e.afterSave,errorfunc:e.onError,afterrestorefunc:e.afterRestore});break}t.add&&$(i).jqGrid("navButtonAdd",n,{caption:t.addtext,title:t.addtitle,buttonicon:t.addicon,id:i.p.id+"_iladd",internal:!0,onClickButton:function(){$(i).jqGrid("addRow",t.addParams);t.addParams.useFormatter||($("#"+r+"_ilsave").removeClass(f),$("#"+r+"_ilcancel").removeClass(f),$("#"+r+"_iladd").addClass(f),$("#"+r+"_iledit").addClass(f))}});t.edit&&$(i).jqGrid("navButtonAdd",n,{caption:t.edittext,title:t.edittitle,buttonicon:t.editicon,id:i.p.id+"_iledit",internal:!0,onClickButton:function(){var n=$(i).jqGrid("getGridParam","selrow");n?($(i).jqGrid("editRow",n,t.editParams),$("#"+r+"_ilsave").removeClass(f),$("#"+r+"_ilcancel").removeClass(f),$("#"+r+"_iladd").addClass(f),$("#"+r+"_iledit").addClass(f)):($.jgrid.viewModal("#alertmod_"+r,{gbox:"#gbox_"+r,jqm:!0}),$("#jqg_alrt").focus())}});t.save&&($(i).jqGrid("navButtonAdd",n,{caption:t.savetext||"",title:t.savetitle||"Save row",buttonicon:t.saveicon,id:i.p.id+"_ilsave",internal:!0,onClickButton:function(){var n=i.p.savedRow[0].id;if(n){var u=i.p.prmNames,f=u.oper,e=t.editParams;$("#"+$.jgrid.jqID(n),"#"+r).hasClass("jqgrid-new-row")?(t.addParams.addRowParams.extraparam[f]=u.addoper,e=t.addParams.addRowParams):(t.editParams.extraparam||(t.editParams.extraparam={}),t.editParams.extraparam[f]=u.editoper);$(i).jqGrid("saveRow",n,e)&&$(i).jqGrid("showAddEditButtons")}else $.jgrid.viewModal("#alertmod_"+r,{gbox:"#gbox_"+r,jqm:!0}),$("#jqg_alrt").focus()}}),$("#"+r+"_ilsave").addClass(f));t.cancel&&($(i).jqGrid("navButtonAdd",n,{caption:t.canceltext||"",title:t.canceltitle||"Cancel row editing",buttonicon:t.cancelicon,id:i.p.id+"_ilcancel",internal:!0,onClickButton:function(){var n=i.p.savedRow[0].id,u=t.editParams;n?($("#"+$.jgrid.jqID(n),"#"+r).hasClass("jqgrid-new-row")&&(u=t.addParams.addRowParams),$(i).jqGrid("restoreRow",n,u),$(i).jqGrid("showAddEditButtons")):($.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+r,jqm:!0}),$("#jqg_alrt").focus())}}),$("#"+r+"_ilcancel").addClass(f));t.restoreAfterSelect===!0&&$(i).bind("jqGridBeforeSelectRow.inlineNav",function(n,r){i.p.savedRow.length>0&&i.p.inlineNav===!0&&r!==i.p.selrow&&i.p.selrow!==null&&(i.p.selrow===t.addParams.rowID?$(i).jqGrid("delRowData",i.p.selrow):$(i).jqGrid("restoreRow",i.p.selrow,t.editParams),$(i).jqGrid("showAddEditButtons"))})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var n=$.jgrid.jqID(this.p.id),t=$.trim($(this).jqGrid("getStyleUI",this.p.styleUI+".common","disabled",!0));$("#"+n+"_ilsave").addClass(t);$("#"+n+"_ilcancel").addClass(t);$("#"+n+"_iladd").removeClass(t);$("#"+n+"_iledit").removeClass(t)}})}});$.jgrid.msie&&$.jgrid.msiever()===8&&($.expr[":"].hidden=function(n){return n.offsetWidth===0||n.offsetHeight===0||n.style.display==="none"});$.jgrid._multiselect=!1;$.ui&&$.ui.multiselect&&($.ui.multiselect.prototype._setSelected&&(v=$.ui.multiselect.prototype._setSelected,$.ui.multiselect.prototype._setSelected=function(n,t){var r=v.call(this,n,t),i;return t&&this.selectedList&&(i=this.element,this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(i)})),r}),$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();$.Widget===undefined?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0);$.jgrid.extend({sortableColumns:function(n){return this.each(function(){function e(){t.p.disableClick=!0}var t=this,r=$.jgrid.jqID(t.p.id),i={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function(n){return $(document.createElement(n[0].nodeName)).addClass(n[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(n,t){t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10));t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}},update:function(n,i){var f=$(i.item).parent(),e=$(">th",f),o=t.p.colModel,u={},s=t.p.id+"_",r;$.each(o,function(n){u[this.name]=n});r=[];e.each(function(){var n=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,"");u.hasOwnProperty(n)&&r.push(u[n])});$(t).jqGrid("remapColumns",r,!0,!0);$.isFunction(t.p.sortable.update)&&t.p.sortable.update(r);setTimeout(function(){t.p.disableClick=!1},50)}},o,u,f;t.p.sortable.options?$.extend(i,t.p.sortable.options):$.isFunction(t.p.sortable)&&(t.p.sortable={update:t.p.sortable});i.start?(o=i.start,i.start=function(n,t){e();o.call(this,n,t)}):i.start=e;t.p.sortable.exclude&&(i.items+=":not("+t.p.sortable.exclude+")");u=n.sortable(i);f=u.data("sortable")||u.data("uiSortable");f!=null&&(f.data("sortable").floating=!0)})},columnChooser:function(n){function w(n,t,i){var r,u;return t>=0?(r=n.slice(),u=r.splice(t,Math.max(n.length-t,t)),t>n.length&&(t=n.length),r[t]=i,r.concat(u)):n}function o(n,t){n&&(typeof n=="string"?$.fn[n]&&$.fn[n].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(n)&&n.apply(t,$.makeArray(arguments).slice(2)))}var t=this,u,i,s={},v=[],c,l,h,r,f,e=t.jqGrid("getGridParam","colModel"),y=t.jqGrid("getGridParam","colNames"),a=function(n){return $.ui.multiselect.prototype&&n.data($.ui.multiselect.prototype.widgetFullName||$.ui.multiselect.prototype.widgetName)||n.data("ui-multiselect")||n.data("multiselect")},p=$.jgrid.getRegional(this[0],"col");if(!$("#colchooser_"+$.jgrid.jqID(t[0].p.id)).length){if(u=$('<div id="colchooser_'+t[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"><\/select><\/div><\/div>'),i=$("select",u),n=$.extend({width:400,height:240,classname:null,done:function(n){n&&t.jqGrid("remapColumns",n,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470,dialogClass:"ui-jqdialog"},dlog_opts:function(n){var t={};return t[n.bSubmit]=function(){n.apply_perm();n.cleanup(!1)},t[n.bCancel]=function(){n.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){n.cleanup(!0)},modal:n.modal||!1,resizable:n.resizable||!0,width:n.width+70,resize:function(){var n=a(i),t=n.container.closest(".ui-dialog-content");t.length>0&&typeof t[0].style=="object"?t[0].style.width="":t.css("width","");n.selectedList.height(Math.max(n.selectedContainer.height()-n.selectedActions.outerHeight()-1,1));n.availableList.height(Math.max(n.availableContainer.height()-n.availableActions.outerHeight()-1,1))}},n.dialog_opts||{})},apply_perm:function(){var r=[];$("option",i).each(function(){$(this).is(":selected")?t.jqGrid("showCol",e[this.value].name):t.jqGrid("hideCol",e[this.value].name)});$("option[selected]",i).each(function(){r.push(parseInt(this.value,10))});$.each(r,function(){delete s[e[parseInt(this,10)].name]});$.each(s,function(){var n=parseInt(this,10);r=w(r,n,n)});n.done&&n.done.call(t,r);t.jqGrid("setGridWidth",t[0].p.width,t[0].p.shrinkToFit)},cleanup:function(r){o(n.dlog,u,"destroy");o(n.msel,i,"destroy");u.remove();r&&n.done&&n.done.call(t)},msel_opts:{}},p,n||{}),$.ui&&$.ui.multiselect&&$.ui.multiselect.defaults){if(!$.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return}n.msel_opts=$.extend($.ui.multiselect.defaults,n.msel_opts)}n.caption&&u.attr("title",n.caption);n.classname&&(u.addClass(n.classname),i.addClass(n.classname));n.width&&($(">div",u).css({width:n.width,margin:"0 auto"}),i.css("width",n.width));n.height&&($(">div",u).css("height",n.height),i.css("height",n.height-10));i.empty();$.each(e,function(n){if(s[this.name]=n,this.hidedlg){this.hidden||v.push(n);return}i.append("<option value='"+n+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(y[n])+"<\/option>")});c=$.isFunction(n.dlog_opts)?n.dlog_opts.call(t,n):n.dlog_opts;o(n.dlog,u,c);l=$.isFunction(n.msel_opts)?n.msel_opts.call(t,n):n.msel_opts;o(n.msel,i,l);h=$("#colchooser_"+$.jgrid.jqID(t[0].p.id));h.css({margin:"auto"});h.find(">div").css({width:"100%",height:"100%",margin:"auto"});r=a(i);r.container.css({width:"100%",height:"100%",margin:"auto"});r.selectedContainer.css({width:r.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});r.availableContainer.css({width:100-r.options.dividerLocation*100+"%",height:"100%",margin:"auto",boxSizing:"border-box"});r.selectedList.css("height","auto");r.availableList.css("height","auto");f=Math.max(r.selectedList.height(),r.availableList.height());f=Math.min(f,$(window).height());r.selectedList.css("height",f);r.availableList.css("height",f)}},sortableRows:function(n){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(n=$.extend({cursor:"move",axis:"y",items:" > .jqgrow"},n||{}),n.start&&$.isFunction(n.start)?(n._start_=n.start,delete n.start):n._start_=!1,n.update&&$.isFunction(n.update)?(n._update_=n.update,delete n.update):n._update_=!1,n.start=function(i,r){if($(r.item).css("border-width","0"),$("td",r.item).each(function(n){this.style.width=t.grid.cols[n].style.width}),t.p.subGrid){var u=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",u)}catch(f){}}n._start_&&n._start_.apply(this,[i,r])},n.update=function(i,r){$(r.item).css("border-width","");t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(n){$(this).html(n+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))});n._update_&&n._update_.apply(this,[i,r])},$("tbody:first",t).sortable(n),$("tbody:first > .jqgrow",t).disableSelection()))})},gridDnD:function(n){return this.each(function(){function u(){var n=$.data(t,"dnd");$("tr.jqgrow:not(.ui-draggable)",t).draggable($.isFunction(n.drag)?n.drag.call($(t),n):n.drag)}var t=this,i,r,f;if(t.grid&&!t.p.treeGrid&&$.fn.draggable&&$.fn.droppable){if(f="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'><\/table>",$("#jqgrid_dnd")[0]===undefined&&$("body").append(f),typeof n=="string"&&n==="updateDnD"&&t.p.jqgdnd===!0){u();return}if(n=$.extend({drag:function(n){return $.extend({start:function(i,r){var u,f;if(t.p.subGrid){f=$(r.helper).attr("id");try{$(t).jqGrid("collapseSubGridRow",f)}catch(e){}}for(u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("getGridParam","reccount")===0&&$($.data(t,"dnd").connectWith[u]).jqGrid("addRowData","jqg_empty_row",{});r.helper.addClass("ui-state-highlight");$("td",r.helper).each(function(n){this.style.width=t.grid.headers[n].width+"px"});n.onstart&&$.isFunction(n.onstart)&&n.onstart.call($(t),i,r)},stop:function(i,r){var u,f;for(r.helper.dropped&&!n.dragcopy&&(f=$(r.helper).attr("id"),f===undefined&&(f=$(this).attr("id")),$(t).jqGrid("delRowData",f)),u=0;u<$.data(t,"dnd").connectWith.length;u++)$($.data(t,"dnd").connectWith[u]).jqGrid("delRowData","jqg_empty_row");n.onstop&&$.isFunction(n.onstop)&&n.onstop.call($(t),i,r)}},n.drag_opts||{})},drop:function(n){return $.extend({accept:function(n){var t,i;return $(n).hasClass("jqgrow")?(t=$(n).closest("table.ui-jqgrid-btable"),t.length>0&&$.data(t[0],"dnd")!==undefined)?(i=$.data(t[0],"dnd").connectWith,$.inArray("#"+$.jgrid.jqID(this.id),i)!==-1?!0:!1):!1:n},drop:function(i,r){var c,u,e,o;if($(r.draggable).hasClass("jqgrow")){if(c=$(r.draggable).attr("id"),u=r.draggable.parent().parent().jqGrid("getRowData",c),!n.dropbyname){var h=0,l={},f,s,a=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(s in u)u.hasOwnProperty(s)&&(f=a[h].name,f==="cb"||f==="rn"||f==="subgrid"||u.hasOwnProperty(s)&&a[h]&&(l[f]=u[s]),h++);u=l}catch(v){}}r.helper.dropped=!0;n.beforedrop&&$.isFunction(n.beforedrop)&&(e=n.beforedrop.call(this,i,r,u,$("#"+$.jgrid.jqID(t.p.id)),$(this)),e!==undefined&&e!==null&&typeof e=="object"&&(u=e));r.helper.dropped&&(n.autoid&&($.isFunction(n.autoid)?o=n.autoid.call(this,u):(o=Math.ceil(Math.random()*1e3),o=n.autoidprefix+o)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",o,u,n.droppos));n.ondrop&&$.isFunction(n.ondrop)&&n.ondrop.call(this,i,r,u)}}},n.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},n||{}),n.connectWith)for(n.connectWith=n.connectWith.split(","),n.connectWith=$.map(n.connectWith,function(n){return $.trim(n)}),$.data(t,"dnd",n),t.p.reccount===0||t.p.jqgdnd||u(),t.p.jqgdnd=!0,i=0;i<n.connectWith.length;i++)r=n.connectWith[i],$(r).droppable($.isFunction(n.drop)?n.drop.call($(t),n):n.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id),req,optstest;$t.grid&&$.fn.resizable&&(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(n,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()});$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit);opts._stop_&&opts._stop_.call($t,n,t);$t.p.caption&&$("#gbox_"+gID).css({height:"auto"});$t.p.frozenColumns&&(req&&clearTimeout(req),req=setTimeout(function(){req&&clearTimeout(req);$("#"+gID).jqGrid("destroyFrozenColumns");$("#"+gID).jqGrid("setFrozenColumns")}))},opts._alsoResize_?(optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}",opts.alsoResize=eval("("+optstest+")")):opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID),delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts))})}});$.assocArraySize=function(n){var t=0;for(var i in n)n.hasOwnProperty(i)&&t++;return t};$.jgrid.extend({pivotSetup:function(n,t){var r=[],f=[],s=[],o=[],h=[],e={grouping:!0,groupingView:{groupField:[],groupSummary:[],groupSummaryPos:[]}},u=[],i=$.extend({rowTotals:!1,rowTotalsText:"Total",colTotals:!1,groupSummary:!0,groupSummaryPos:"header",frozenStaticCols:!1},t||{});return this.each(function(){function wt(n,t,i){var r;return r=k.call(n,t,i),r.length>0?r[0]:null}function bt(n,t){var i=0,r=!0;for(var u in n)if(n.hasOwnProperty(u)){if(n[u]!=this[i]){r=!1;break}if(i++,i>=this.length)break}return r&&(ut=t),r}function kt(n,t,i,r,u){var f;switch(n){case"sum":f=parseFloat(t||0)+parseFloat(r[i]||0);break;case"count":(t===""||t==null)&&(t=0);f=r.hasOwnProperty(i)?t+1:0;break;case"min":f=t===""||t==null?parseFloat(r[i]||0):Math.min(parseFloat(t),parseFloat(r[i]||0));break;case"max":f=t===""||t==null?parseFloat(r[i]||0):Math.max(parseFloat(t),parseFloat(r[i]||0));break;case"avg":f=(parseFloat(t||0)*(u-1)+parseFloat(r[i]||0))/u}return f}function ft(n,t,i,r){var y=t.length,u,f,e,a,l="",c=[],v,s;for($.isArray(i)?(a=i.length,c=i):(a=1,c[0]=i),o=[],h=[],o.root=0,!r._count?r._count=1:r._count++,e=0;e<a;e++){for(v=[],u=0;u<y;u++){if(i==null)f=$.trim(t[u].member)+"_"+t[u].aggregator,s=f,c[0]=t[u].label||t[u].aggregator+" "+$.trim(t[u].member);else{s=i[e].replace(/\s+/g,"");try{f=y===1?l+s:l+s+"_"+t[u].aggregator+"_"+String(u)}catch(p){}c[e]=i[e]}f=isNaN(parseInt(f,10))?f:f+" ";r[f]=v[f]=kt(t[u].aggregator,r[f],t[u].member,n,r._count);e<=1&&s!=="_r_Totals"&&l===""&&(l=s)}o[f]=v;h[f]=c[e]}return r}function yt(n){var e,o,t,h,f,s,c,a,v,y;for(t in n)if(n.hasOwnProperty(t)){if(typeof n[t]!="object"){if(t==="level"){if(rt[n.level]===undefined&&(rt[n.level]="",n.level>0&&n.text.indexOf("_r_Totals")===-1&&(u[n.level-1]={useColSpanStyle:!1,groupHeaders:[]})),rt[n.level]!==n.text&&n.children.length&&n.text.indexOf("_r_Totals")===-1&&n.level>0){if(u[n.level-1].groupHeaders.push({titleText:n.label,numberOfColumns:0}),s=u[n.level-1].groupHeaders.length-1,c=s===0?dt:at+it,n.level-1==(i.rowTotals?1:0)&&s>0){for(a=0,v=0;v<s;v++)a+=u[n.level-1].groupHeaders[v].numberOfColumns;a&&(c=a+p)}r[c]&&(u[n.level-1].groupHeaders[s].startColumnName=r[c].name,u[n.level-1].groupHeaders[s].numberOfColumns=r.length-c);at=r.length}rt[n.level]=n.text}if(n.level===l&&t==="level"&&l>0)if(it>1){y=1;for(e in n.fields)n.fields.hasOwnProperty(e)&&(y===1&&u[l-1].groupHeaders.push({startColumnName:e,numberOfColumns:1,titleText:n.label||n.text}),y++);u[l-1].groupHeaders[u[l-1].groupHeaders.length-1].numberOfColumns=y-1}else u.splice(l-1,1)}if(n[t]!=null&&typeof n[t]=="object"&&yt(n[t]),t==="level"&&n.level>0&&(n.level===(l===0?n.level:l)||rt[n.level].indexOf("_r_Totals")!==-1)){o=0;for(e in n.fields)if(n.fields.hasOwnProperty(e)){f={};for(h in i.aggregates[o])if(i.aggregates[o].hasOwnProperty(h))switch(h){case"member":case"label":case"aggregator":break;default:f[h]=i.aggregates[o][h]}it>1?(f.name=e,f.label=i.aggregates[o].label||n.label):(f.name=n.text,f.label=n.text==="_r_Totals"?i.rowTotalsText:n.label);r.push(f);o++}}}}var y,ut,t,pt=n.length,p,l,it,w,b,ct=0,vt,et,ot,g,nt,a,c,tt,ht;if(i.rowTotals&&i.yDimension.length>0&&(vt=i.yDimension[0].dataName,i.yDimension.splice(0,0,{dataName:vt}),i.yDimension[0].converter=function(){return"_r_Totals"}),p=$.isArray(i.xDimension)?i.xDimension.length:0,l=i.yDimension.length,it=$.isArray(i.aggregates)?i.aggregates.length:0,p===0||it===0)throw"xDimension or aggregates optiona are not set!";for(t=0;t<p;t++)et={name:i.xDimension[t].dataName,frozen:i.frozenStaticCols},i.xDimension[t].isGroupField==null&&(i.xDimension[t].isGroupField=!0),et=$.extend(!0,et,i.xDimension[t]),r.push(et);for(ot=p-1,g={};ct<pt;){y=n[ct];nt=[];a=[];w={};t=0;do nt[t]=$.trim(y[i.xDimension[t].dataName]),w[i.xDimension[t].dataName]=nt[t],t++;while(t<p);if(c=0,ut=-1,b=wt(f,bt,nt),b){if(ut>=0){if(c=0,l>=1){for(c=0;c<l;c++)a[c]=$.trim(y[i.yDimension[c].dataName]),i.yDimension[c].converter&&$.isFunction(i.yDimension[c].converter)&&(a[c]=i.yDimension[c].converter.call(this,a[c],nt,a));b=ft(y,i.aggregates,a,b)}else l===0&&(b=ft(y,i.aggregates,null,b));f[ut]=b}}else{if(c=0,l>=1){for(c=0;c<l;c++)a[c]=$.trim(y[i.yDimension[c].dataName]),i.yDimension[c].converter&&$.isFunction(i.yDimension[c].converter)&&(a[c]=i.yDimension[c].converter.call(this,a[c],nt,a));w=ft(y,i.aggregates,a,w)}else l===0&&(w=ft(y,i.aggregates,null,w));f.push(w)}var lt=0,v=null,st=null;for(var d in o)if(o.hasOwnProperty(d)){if(lt===0)g.children&&g.children!==undefined||(g={text:d,level:0,children:[],label:d}),v=g.children;else{for(st=null,t=0;t<v.length;t++)if(v[t].text===d){st=v[t];break}st?v=st.children:(v.push({children:[],text:d,level:lt,fields:o[d],label:h[d]}),v=v[v.length-1].children)}lt++}ct++}var rt=[],at=r.length,dt=at;if(l>0&&(u[l-1]={useColSpanStyle:!1,groupHeaders:[]}),yt(g),i.colTotals)for(ht=f.length;ht--;)for(t=p;t<r.length;t++)tt=r[t].name,s[tt]?s[tt]+=parseFloat(f[ht][tt]||0):s[tt]=parseFloat(f[ht][tt]||0);if(ot>0)for(t=0;t<ot;t++)r[t].isGroupField&&(e.groupingView.groupField.push(r[t].name),e.groupingView.groupSummary.push(i.groupSummary),e.groupingView.groupSummaryPos.push(i.groupSummaryPos));else e.grouping=!1;e.sortname=r[ot].name;e.groupingView.hideFirstGroupCol=!0}),{colModel:r,rows:f,groupOptions:e,groupHeaders:u,summary:s}},jqPivot:function(n,t,i,r){return this.each(function(){function f(n){var f=jQuery(u).jqGrid("pivotSetup",n,t),l=$.assocArraySize(f.summary)>0?!0:!1,h=$.jgrid.from.call(u,f.rows),r,c,e,o,s;for(t.ignoreCase&&(h=h.ignoreCase()),r=0;r<f.groupOptions.groupingView.groupField.length;r++)c=t.xDimension[r].sortorder?t.xDimension[r].sortorder:"asc",e=t.xDimension[r].sorttype?t.xDimension[r].sorttype:"text",h.orderBy(f.groupOptions.groupingView.groupField[r],c,e,"",e);if(o=t.xDimension.length,f.groupOptions.sortname&&o&&(c=t.xDimension[o-1].sortorder?t.xDimension[o-1].sortorder:"asc",e=t.xDimension[o-1].sorttype?t.xDimension[o-1].sorttype:"text",h.orderBy(f.groupOptions.sortname,c,e,"",e)),jQuery(u).jqGrid($.extend(!0,{datastr:$.extend(h.select(),l?{userdata:f.summary}:{}),datatype:"jsonstring",footerrow:l,userDataOnFooter:l,colModel:f.colModel,viewrecords:!0,sortname:t.xDimension[0].dataName},f.groupOptions,i||{})),s=f.groupHeaders,s.length)for(r=0;r<s.length;r++)s[r]&&s[r].groupHeaders.length&&jQuery(u).jqGrid("setGroupHeaders",s[r]);t.frozenStaticCols&&jQuery(u).jqGrid("setFrozenColumns")}var u=this;typeof n=="string"?$.ajax($.extend({url:n,dataType:"json",success:function(n){f($.jgrid.getAccessor(n,r&&r.reader?r.reader:"rows"))}},r||{})):f(n)})}});$.jgrid.extend({setSubGrid:function(){return this.each(function(){var n=this,t,i,r=$.jgrid.styleUI[n.p.styleUI||"jQueryUI"].subgrid,u={plusicon:r.icon_plus,minusicon:r.icon_minus,openicon:r.icon_open,expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,selectOnCollapse:!1,reloadOnExpand:!0};if(n.p.subGridOptions=$.extend(u,n.p.subGridOptions||{}),n.p.colNames.unshift(""),n.p.colModel.unshift({name:"subgrid",width:$.jgrid.cell_width?n.p.subGridWidth+n.p.cellLayout:n.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),t=n.p.subGridModel,t[0])for(t[0].align=$.extend([],t[0].align||[]),i=0;i<t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"})},addSubGridCell:function(n,t){var i="",r,u,f;return this.each(function(){i=this.formatCol(n,t);u=this.p.id;r=this.p.subGridOptions.plusicon;f=$.jgrid.styleUI[this.p.styleUI||"jQueryUI"].common}),'<td role="gridcell" aria-describedby="'+u+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+i+"><a style='cursor:pointer;' class='ui-sghref'><span class='"+f.icon_base+" "+r+"'><\/span><\/a><\/td>"},addSubGrid:function(n,t){return this.each(function(){var i=this,l,o;if(i.grid){var h=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].base,e=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common,c=function(n,t,r){var u=$("<td align='"+i.p.subGridModel[0].align[r]+"'><\/td>").html(t);$(n).append(u)},a=function(n,t){for(var o,f,s=$("<table class='"+h.rowTable+" ui-common-table'><tbody><\/tbody><\/table>"),u=$("<tr><\/tr>"),l,r=0;r<i.p.subGridModel[0].name.length;r++)o=$("<th class='"+h.headerBox+" ui-th-subgrid ui-th-column ui-th-"+i.p.direction+"'><\/th>"),$(o).html(i.p.subGridModel[0].name[r]),$(o).width(i.p.subGridModel[0].width[r]),$(u).append(o);return $(s).append(u),n&&(f=i.p.xmlReader.subgrid,$(f.root+" "+f.row,n).each(function(){if(u=$("<tr class='"+e.content+" ui-subtblcell'><\/tr>"),f.repeatitems===!0)$(f.cell,this).each(function(n){c(u,$(this).text()||"&#160;",n)});else{var n=i.p.subGridModel[0].mapping||i.p.subGridModel[0].name;if(n)for(r=0;r<n.length;r++)c(u,$(n[r],this).text()||"&#160;",r)}$(s).append(u)})),l=$("table:first",i.grid.bDiv).attr("id")+"_",$("#"+$.jgrid.jqID(l+t)).append(s),i.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(i.p.id)).hide(),!1},v=function(n,t){for(var l,a,f,s,r,y=$("<table class='"+h.rowTable+" ui-common-table'><tbody><\/tbody><\/table>"),o=$("<tr><\/tr>"),v,p,u=0;u<i.p.subGridModel[0].name.length;u++)l=$("<th class='"+h.headerBox+" ui-th-subgrid ui-th-column ui-th-"+i.p.direction+"'><\/th>"),$(l).html(i.p.subGridModel[0].name[u]),$(l).width(i.p.subGridModel[0].width[u]),$(o).append(l);if($(y).append(o),n&&(s=i.p.jsonReader.subgrid,a=$.jgrid.getAccessor(n,s.root),a!==undefined))for(u=0;u<a.length;u++){if(f=a[u],o=$("<tr class='"+e.content+" ui-subtblcell'><\/tr>"),s.repeatitems===!0)for(s.cell&&(f=f[s.cell]),r=0;r<f.length;r++)c(o,f[r]||"&#160;",r);else if(v=i.p.subGridModel[0].mapping||i.p.subGridModel[0].name,v.length)for(r=0;r<v.length;r++)c(o,f[v[r]]||"&#160;",r);$(y).append(o)}return p=$("table:first",i.grid.bDiv).attr("id")+"_",$("#"+$.jgrid.jqID(p+t)).append(y),i.grid.hDiv.loading=!1,$("#load_"+$.jgrid.jqID(i.p.id)).hide(),!1},w=function(n){var u,t,r,f;if(u=$(n).attr("id"),t={nd_:(new Date).getTime()},t[i.p.prmNames.subgridid]=u,!i.p.subGridModel[0])return!1;if(i.p.subGridModel[0].params)for(f=0;f<i.p.subGridModel[0].params.length;f++)for(r=0;r<i.p.colModel.length;r++)i.p.colModel[r].name===i.p.subGridModel[0].params[f]&&(t[i.p.colModel[r].name]=$("td:eq("+r+")",n).text().replace(/\&#160\;/ig,""));if(!i.grid.hDiv.loading){i.grid.hDiv.loading=!0;$("#load_"+$.jgrid.jqID(i.p.id)).show();i.p.subgridtype||(i.p.subgridtype=i.p.datatype);$.isFunction(i.p.subgridtype)?i.p.subgridtype.call(i,t):i.p.subgridtype=i.p.subgridtype.toLowerCase();switch(i.p.subgridtype){case"xml":case"json":$.ajax($.extend({type:i.p.mtype,url:$.isFunction(i.p.subGridUrl)?i.p.subGridUrl.call(i,t):i.p.subGridUrl,dataType:i.p.subgridtype,data:$.isFunction(i.p.serializeSubGridData)?i.p.serializeSubGridData.call(i,t):t,complete:function(n){i.p.subgridtype==="xml"?a(n.responseXML,u):v($.jgrid.parse(n.responseText),u);n=null}},$.jgrid.ajaxOptions,i.p.ajaxSubgridOptions||{}))}}return!1},r,f,y,p=0,u,s;for($.each(i.p.colModel,function(){(this.hidden===!0||this.name==="rn"||this.name==="cb")&&p++}),l=i.rows.length,o=1,t!==undefined&&t>0&&(o=t,l=t+1);o<l;)$(i.rows[o]).hasClass("jqgrow")&&(i.p.scroll&&$(i.rows[o].cells[n]).unbind("click"),$(i.rows[o].cells[n]).bind("click",function(){var t=$(this).parent("tr")[0];if(f=i.p.id,r=t.id,s=$("#"+f+"_"+r+"_expandedContent"),$(this).hasClass("sgcollapsed")){if(u=$(i).triggerHandler("jqGridSubGridBeforeExpand",[f+"_"+r,r]),u=u===!1||u==="stop"?!1:!0,u&&$.isFunction(i.p.subGridBeforeExpand)&&(u=i.p.subGridBeforeExpand.call(i,f+"_"+r,r)),u===!1)return!1;i.p.subGridOptions.reloadOnExpand!==!0&&(i.p.subGridOptions.reloadOnExpand!==!1||s.hasClass("ui-subgrid"))?s.show().removeClass("ui-sg-collapsed").addClass("ui-sg-expanded"):(y=n>=1?"<td colspan='"+n+"'>&#160;<\/td>":"",$(t).after("<tr role='row' id='"+f+"_"+r+"_expandedContent' class='ui-subgrid ui-sg-expanded'>"+y+"<td class='"+e.content+" subgrid-cell'><span class='"+e.icon_base+" "+i.p.subGridOptions.openicon+"'><\/span><\/td><td colspan='"+parseInt(i.p.colNames.length-1-p,10)+"' class='"+e.content+" subgrid-data'><div id="+f+"_"+r+" class='tablediv'><\/div><\/td><\/tr>"),$(i).triggerHandler("jqGridSubGridRowExpanded",[f+"_"+r,r]),$.isFunction(i.p.subGridRowExpanded)?i.p.subGridRowExpanded.call(i,f+"_"+r,r):w(t));$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+e.icon_base+" "+i.p.subGridOptions.minusicon+"'><\/span><\/a>").removeClass("sgcollapsed").addClass("sgexpanded");i.p.subGridOptions.selectOnExpand&&$(i).jqGrid("setSelection",r)}else if($(this).hasClass("sgexpanded")){if(u=$(i).triggerHandler("jqGridSubGridRowColapsed",[f+"_"+r,r]),u=u===!1||u==="stop"?!1:!0,u&&$.isFunction(i.p.subGridRowColapsed)&&(u=i.p.subGridRowColapsed.call(i,f+"_"+r,r)),u===!1)return!1;i.p.subGridOptions.reloadOnExpand===!0?s.remove(".ui-subgrid"):s.hasClass("ui-subgrid")&&s.hide().addClass("ui-sg-collapsed").removeClass("ui-sg-expanded");$(this).html("<a style='cursor:pointer;' class='ui-sghref'><span class='"+e.icon_base+" "+i.p.subGridOptions.plusicon+"'><\/span><\/a>").removeClass("sgexpanded").addClass("sgcollapsed");i.p.subGridOptions.selectOnCollapse&&$(i).jqGrid("setSelection",r)}return!1})),o++;i.p.subGridOptions.expandOnLoad===!0&&$(i.rows).filter(".jqgrow").each(function(n,t){$(t.cells[0]).click()});i.subGridXml=function(n,t){a(n,t)};i.subGridJson=function(n,t){v(n,t)}}})},expandSubGridRow:function(n){return this.each(function(){var r=this,t,i;(r.grid||n)&&r.p.subGrid===!0&&(t=$(this).jqGrid("getInd",n,!0),t&&(i=$("td.sgcollapsed",t)[0],i&&$(i).trigger("click")))})},collapseSubGridRow:function(n){return this.each(function(){var r=this,t,i;(r.grid||n)&&r.p.subGrid===!0&&(t=$(this).jqGrid("getInd",n,!0),t&&(i=$("td.sgexpanded",t)[0],i&&$(i).trigger("click")))})},toggleSubGridRow:function(n){return this.each(function(){var r=this,i,t;(r.grid||n)&&r.p.subGrid===!0&&(i=$(this).jqGrid("getInd",n,!0),i&&(t=$("td.sgcollapsed",i)[0],t?$(t).trigger("click"):(t=$("td.sgexpanded",i)[0],t&&$(t).trigger("click"))))})}});$.jgrid.extend({setTreeNode:function(n,t){return this.each(function(){var i=this,w,b,k;if(i.grid&&i.p.treeGrid)for(var h=i.p.expColInd,f=i.p.treeReader.expanded_field,u=i.p.treeReader.leaf_field,d=i.p.treeReader.level_field,c=i.p.treeReader.icon_field,e=i.p.treeReader.loaded,y,p,o,l,a,s,r,v,g=$.jgrid.styleUI[i.p.styleUI||"jQueryUI"].common;n<t;)w=$.jgrid.stripPref(i.p.idPrefix,i.rows[n].id),b=i.p._index[w],r=i.p.data[b],i.p.treeGridModel==="nested"&&(r[u]||(y=parseInt(r[i.p.treeReader.left_field],10),p=parseInt(r[i.p.treeReader.right_field],10),r[u]=p===y+1?"true":"false",i.rows[n].cells[i.p._treeleafpos].innerHTML=r[u])),o=parseInt(r[d],10),i.p.tree_root_level===0?(l=o+1,a=o):(l=o,a=o-1),s="<div class='tree-wrap tree-wrap-"+i.p.direction+"' style='width:"+l*18+"px;'>",s+="<div style='"+(i.p.direction==="rtl"?"right:":"left:")+a*18+"px;' class='"+g.icon_base+" ",r[e]!==undefined&&(r[e]=r[e]==="true"||r[e]===!0?!0:!1),r[u]==="true"||r[u]===!0?(s+=(r[c]!==undefined&&r[c]!==""?r[c]:i.p.treeIcons.leaf)+" tree-leaf treeclick",r[u]=!0,v="leaf"):(r[u]=!1,v=""),r[f]=(r[f]==="true"||r[f]===!0?!0:!1)&&(r[e]||r[e]===undefined),s+=r[f]===!1?r[u]===!0?"'":i.p.treeIcons.plus+" tree-plus treeclick'":r[u]===!0?"'":i.p.treeIcons.minus+" tree-minus treeclick'",s+="><\/div><\/div>",$(i.rows[n].cells[h]).wrapInner("<span class='cell-wrapper"+v+"'><\/span>").prepend(s),o!==parseInt(i.p.tree_root_level,10)&&(k=$(i).jqGrid("isVisibleNode",r),k||$(i.rows[n]).css("display","none")),$(i.rows[n].cells[h]).find("div.treeclick").bind("click",function(n){var r=n.target||n.srcElement,e=$.jgrid.stripPref(i.p.idPrefix,$(r,i.rows).closest("tr.jqgrow")[0].id),t=i.p._index[e];return i.p.data[t][u]||(i.p.data[t][f]?($(i).jqGrid("collapseRow",i.p.data[t]),$(i).jqGrid("collapseNode",i.p.data[t])):($(i).jqGrid("expandRow",i.p.data[t]),$(i).jqGrid("expandNode",i.p.data[t]))),!1}),i.p.ExpandColClick===!0&&$(i.rows[n].cells[h]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(n){var e=n.target||n.srcElement,r=$.jgrid.stripPref(i.p.idPrefix,$(e,i.rows).closest("tr.jqgrow")[0].id),t=i.p._index[r];return i.p.data[t][u]||(i.p.data[t][f]?($(i).jqGrid("collapseRow",i.p.data[t]),$(i).jqGrid("collapseNode",i.p.data[t])):($(i).jqGrid("expandRow",i.p.data[t]),$(i).jqGrid("expandNode",i.p.data[t]))),$(i).jqGrid("setSelection",r),!1}),n++})},setTreeGrid:function(){return this.each(function(){var n=this,t=0,r,o=!1,i,u,f,s=[],e=$.jgrid.styleUI[n.p.styleUI||"jQueryUI"].treegrid;if(n.p.treeGrid){n.p.treedatatype||$.extend(n.p,{treedatatype:n.p.datatype});n.p.loadonce&&(n.p.treedatatype="local");n.p.subGrid=!1;n.p.altRows=!1;n.p.pgbuttons=!1;n.p.pginput=!1;n.p.gridview=!0;n.p.rowTotal===null&&(n.p.rowNum=1e4);n.p.multiselect=!1;n.p.rowList=[];n.p.expColInd=0;r=e.icon_plus;n.p.styleUI==="jQueryUI"&&(r+=n.p.direction==="rtl"?"w":"e");n.p.treeIcons=$.extend({plus:r,minus:e.icon_minus,leaf:e.icon_leaf},n.p.treeIcons||{});n.p.treeGridModel==="nested"?n.p.treeReader=$.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.p.treeReader):n.p.treeGridModel==="adjacency"&&(n.p.treeReader=$.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.p.treeReader));for(u in n.p.colModel)if(n.p.colModel.hasOwnProperty(u)){i=n.p.colModel[u].name;i!==n.p.ExpandColumn||o||(o=!0,n.p.expColInd=t);t++;for(f in n.p.treeReader)n.p.treeReader.hasOwnProperty(f)&&n.p.treeReader[f]===i&&s.push(i)}$.each(n.p.treeReader,function(i,r){r&&$.inArray(r,s)===-1&&(i==="leaf_field"&&(n.p._treeleafpos=t),t++,n.p.colNames.push(r),n.p.colModel.push({name:r,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(n){this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){var i=$(t).jqGrid("getNodeChildren",n),u=t.p.treeReader.expanded_field,r=n[t.p.localReader.id],f=$.isFunction(t.p.beforeExpandTreeGridRow)?t.p.beforeExpandTreeGridRow.call(t,r,n,i):!0;f!==!1&&($(i).each(function(){var n=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",n)).css("display","");this[u]&&$(t).jqGrid("expandRow",this)}),$.isFunction(t.p.afterExpandTreeGridRow)&&t.p.afterExpandTreeGridRow.call(t,r,n,i))}})},collapseRow:function(n){this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){var i=$(t).jqGrid("getNodeChildren",n),u=t.p.treeReader.expanded_field,r=n[t.p.localReader.id],f=$.isFunction(t.p.beforeCollapseTreeGridRow)?t.p.beforeCollapseTreeGridRow.call(t,r,n,i):!0;f!==!1&&($(i).each(function(){var n=t.p.idPrefix+$.jgrid.getAccessor(this,t.p.localReader.id);$($(t).jqGrid("getGridRowById",n)).css("display","none");this[u]&&$(t).jqGrid("collapseRow",this)}),$.isFunction(t.p.afterCollapseTreeGridRow)&&t.p.afterCollapseTreeGridRow.call(t,r,n,i))}})},getRootNodes:function(n){var t=[];return this.each(function(){var i=this,f,r,u;if(i.grid&&i.p.treeGrid){typeof n!="boolean"&&(n=!1);u=n?$(i).jqGrid("getRowData",null,!0):i.p.data;switch(i.p.treeGridModel){case"nested":f=i.p.treeReader.level_field;$(u).each(function(){parseInt(this[f],10)===parseInt(i.p.tree_root_level,10)&&(n?t.push(i.p.data[i.p._index[this[i.p.keyName]]]):t.push(this))});break;case"adjacency":r=i.p.treeReader.parent_id_field;$(u).each(function(){(this[r]===null||String(this[r]).toLowerCase()==="null")&&(n?t.push(i.p.data[i.p._index[this[i.p.keyName]]]):t.push(this))})}}}),t},getNodeDepth:function(n){var t=null;return this.each(function(){var i,r;if(this.grid&&this.p.treeGrid){i=this;switch(i.p.treeGridModel){case"nested":r=i.p.treeReader.level_field;t=parseInt(n[r],10)-parseInt(i.p.tree_root_level,10);break;case"adjacency":t=$(i).jqGrid("getNodeAncestors",n).length}}}),t},getNodeParent:function(n){var t=null;return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var u=i.p.treeReader.left_field,f=i.p.treeReader.right_field,e=i.p.treeReader.level_field,s=parseInt(n[u],10),h=parseInt(n[f],10),c=parseInt(n[e],10);$(this.p.data).each(function(){if(parseInt(this[e],10)===c-1&&parseInt(this[u],10)<s&&parseInt(this[f],10)>h)return t=this,!1});break;case"adjacency":for(var l=i.p.treeReader.parent_id_field,o=i.p.localReader.id,a=n[o],r=i.p._index[a];r--;)if(i.p.data[r][o]===$.jgrid.stripPref(i.p.idPrefix,n[l])){t=i.p.data[r];break}}}),t},getNodeChildren:function(n){var t=[];return this.each(function(){var i=this,e,o;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var r=i.p.treeReader.left_field,u=i.p.treeReader.right_field,f=i.p.treeReader.level_field,s=parseInt(n[r],10),h=parseInt(n[u],10),c=parseInt(n[f],10);$(this.p.data).each(function(){parseInt(this[f],10)===c+1&&parseInt(this[r],10)>s&&parseInt(this[u],10)<h&&t.push(this)});break;case"adjacency":e=i.p.treeReader.parent_id_field;o=i.p.localReader.id;$(this.p.data).each(function(){this[e]==$.jgrid.stripPref(i.p.idPrefix,n[o])&&t.push(this)})}}),t},getFullTreeNode:function(n,t){var i=[];return this.each(function(){var r=this,f,e=r.p.treeReader.expanded_field,s,h;if(r.grid&&r.p.treeGrid){(t==null||typeof t!="boolean")&&(t=!1);switch(r.p.treeGridModel){case"nested":var u=r.p.treeReader.left_field,c=r.p.treeReader.right_field,o=r.p.treeReader.level_field,l=parseInt(n[u],10),a=parseInt(n[c],10),v=parseInt(n[o],10);$(this.p.data).each(function(){parseInt(this[o],10)>=v&&parseInt(this[u],10)>=l&&parseInt(this[u],10)<=a&&(t&&(this[e]=!0),i.push(this))});break;case"adjacency":n&&(i.push(n),s=r.p.treeReader.parent_id_field,h=r.p.localReader.id,$(this.p.data).each(function(n){for(f=i.length,n=0;n<f;n++)if($.jgrid.stripPref(r.p.idPrefix,i[n][h])===this[s]){t&&(this[e]=!0);i.push(this);break}}))}}}),i},getNodeAncestors:function(n){var t=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var i=$(this).jqGrid("getNodeParent",n);i;)t.push(i),i=$(this).jqGrid("getNodeParent",i)}),t},isVisibleNode:function(n){var t=!0;return this.each(function(){var i=this,r,u;i.grid&&i.p.treeGrid&&(r=$(i).jqGrid("getNodeAncestors",n),u=i.p.treeReader.expanded_field,$(r).each(function(){return t=t&&this[u],t?void 0:!1}))}),t},isNodeLoaded:function(n){var t;return this.each(function(){var i=this,u,r;i.grid&&i.p.treeGrid&&(u=i.p.treeReader.leaf_field,r=i.p.treeReader.loaded,t=n!==undefined?n[r]!==undefined?n[r]:n[u]||$(i).jqGrid("getNodeChildren",n).length>0?!0:!1:!1)}),t},reloadNode:function(n){return this.each(function(){var r,t;if(this.grid&&this.p.treeGrid){r=this.p.localReader.id;t=this.p.selrow;$(this).jqGrid("delChildren",n[r]);var e=this.p.treeReader.expanded_field,o=this.p.treeReader.parent_id_field,s=this.p.treeReader.loaded,u=this.p.treeReader.level_field,h=this.p.treeReader.left_field,c=this.p.treeReader.right_field,i=$.jgrid.getAccessor(n,this.p.localReader.id),f=$("#"+i,this.grid.bDiv)[0];n[e]=!0;$("div.treeclick",f).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=f.rowIndex;this.p.datatype=this.p.treedatatype;this.p.treeGridModel==="nested"?$(this).jqGrid("setGridParam",{postData:{nodeid:i,n_left:n[h],n_right:n[c],n_level:n[u]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:i,parentid:n[o],n_level:n[u]}});$(this).trigger("reloadGrid");n[s]=!0;this.p.treeGridModel==="nested"?$(this).jqGrid("setGridParam",{selrow:t,postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{selrow:t,postData:{nodeid:"",parentid:"",n_level:""}})}})},expandNode:function(n){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field,f=this.p.treeReader.parent_id_field,e=this.p.treeReader.loaded,u=this.p.treeReader.level_field,o=this.p.treeReader.left_field,s=this.p.treeReader.right_field;if(!n[i]){var t=$.jgrid.getAccessor(n,this.p.localReader.id),r=$("#"+this.p.idPrefix+$.jgrid.jqID(t),this.grid.bDiv)[0],h=this.p._index[t],c=$.isFunction(this.p.beforeExpandTreeGridNode)?this.p.beforeExpandTreeGridNode.call(this,t,n):!0;if(c===!1)return;$(this).jqGrid("isNodeLoaded",this.p.data[h])?(n[i]=!0,$("div.treeclick",r).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(n[i]=!0,$("div.treeclick",r).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=r.rowIndex,this.p.datatype=this.p.treedatatype,this.p.treeGridModel==="nested"?$(this).jqGrid("setGridParam",{postData:{nodeid:t,n_left:n[o],n_right:n[s],n_level:n[u]}}):$(this).jqGrid("setGridParam",{postData:{nodeid:t,parentid:n[f],n_level:n[u]}}),$(this).trigger("reloadGrid"),n[e]=!0,this.p.treeGridModel==="nested"?$(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):$(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}));$.isFunction(this.p.afterExpandTreeGridNode)&&this.p.afterExpandTreeGridNode.call(this,t,n)}}})},collapseNode:function(n){return this.each(function(){var t;if(this.grid&&this.p.treeGrid&&(t=this.p.treeReader.expanded_field,n[t])){var i=$.jgrid.getAccessor(n,this.p.localReader.id),r=$.isFunction(this.p.beforeCollapseTreeGridNode)?this.p.beforeCollapseTreeGridNode.call(this,i,n):!0,u=$("#"+this.p.idPrefix+$.jgrid.jqID(i),this.grid.bDiv)[0];if(n[t]=!1,r===!1)return;$("div.treeclick",u).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");$.isFunction(this.p.afterCollapseTreeGridNode)&&this.p.afterCollapseTreeGridNode.call(this,i,n)}})},SortTree:function(n,t,i,r){return this.each(function(){if(this.grid&&this.p.treeGrid){var u,c,h,f=[],e=this,o,s,l=$(this).jqGrid("getRootNodes",e.p.search);for(o=$.jgrid.from.call(this,l),o.orderBy(n,t,i,r),s=o.select(),u=0,c=s.length;u<c;u++)h=s[u],f.push(h),$(this).jqGrid("collectChildrenSortTree",f,h,n,t,i,r);$.each(f,function(n){var t=$.jgrid.getAccessor(this,e.p.localReader.id);$("#"+$.jgrid.jqID(e.p.id)+" tbody tr:eq("+n+")").after($("tr#"+$.jgrid.jqID(t),e.grid.bDiv))});o=null;s=null;f=null}})},searchTree:function(n){var i,f=n.length||0,t=[],e,o=[],r=[],u;return this.each(function(){if(this.grid&&this.p.treeGrid&&f)for(e=this.p.localReader.id,i=0;i<f;i++){if(t=$(this).jqGrid("getNodeAncestors",n[i]),t.length||t.push(n[i]),u=t[t.length-1][e],$.inArray(u,o)!==-1)continue;else o.push(u);t=$(this).jqGrid("getFullTreeNode",t[t.length-1],!0);r=r.concat(t)}}),r},collectChildrenSortTree:function(n,t,i,r,u,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var e,c,o,l,s,h;for(l=$(this).jqGrid("getNodeChildren",t),s=$.jgrid.from.call(this,l),s.orderBy(i,r,u,f),h=s.select(),e=0,c=h.length;e<c;e++)o=h[e],n.push(o),$(this).jqGrid("collectChildrenSortTree",n,o,i,r,u,f)}})},setTreeRow:function(n,t){var i=!1;return this.each(function(){var r=this;r.grid&&r.p.treeGrid&&(i=$(r).jqGrid("setRowData",n,t))}),i},delTreeNode:function(n){return this.each(function(){var t=this,l=t.p.localReader.id,f,e=t.p.treeReader.left_field,o=t.p.treeReader.right_field,s,c,i,r,u,h;if(t.grid&&t.p.treeGrid&&(u=t.p._index[n],u!==undefined)){if(s=parseInt(t.p.data[u][o],10),c=s-parseInt(t.p.data[u][e],10)+1,h=$(t).jqGrid("getFullTreeNode",t.p.data[u]),h.length>0)for(f=0;f<h.length;f++)$(t).jqGrid("delRowData",h[f][l]);if(t.p.treeGridModel==="nested"){if(i=$.jgrid.from.call(t,t.p.data).greater(e,s,{stype:"integer"}).select(),i.length)for(r in i)i.hasOwnProperty(r)&&(i[r][e]=parseInt(i[r][e],10)-c);if(i=$.jgrid.from.call(t,t.p.data).greater(o,s,{stype:"integer"}).select(),i.length)for(r in i)i.hasOwnProperty(r)&&(i[r][o]=parseInt(i[r][o],10)-c)}}})},delChildren:function(n){return this.each(function(){var t=this,l=t.p.localReader.id,o=t.p.treeReader.left_field,s=t.p.treeReader.right_field,h,c,i,r,u,f,e;if(t.grid&&t.p.treeGrid&&(u=t.p._index[n],u!==undefined)){if(h=parseInt(t.p.data[u][s],10),c=h-parseInt(t.p.data[u][o],10)+1,f=$(t).jqGrid("getFullTreeNode",t.p.data[u]),f.length>0)for(e=0;e<f.length;e++)f[e][l]!==n&&$(t).jqGrid("delRowData",f[e][l]);if(t.p.treeGridModel==="nested"){if(i=$.jgrid.from(t.p.data).greater(o,h,{stype:"integer"}).select(),i.length)for(r in i)i.hasOwnProperty(r)&&(i[r][o]=parseInt(i[r][o],10)-c);if(i=$.jgrid.from(t.p.data).greater(s,h,{stype:"integer"}).select(),i.length)for(r in i)i.hasOwnProperty(r)&&(i[r][s]=parseInt(i[r][s],10)-c)}}})},addChildNode:function(n,t,i,r){var u=this[0],it,p,w,f,e;if(i){var a=u.p.treeReader.expanded_field,v=u.p.treeReader.leaf_field,rt=u.p.treeReader.level_field,ft=u.p.treeReader.parent_id_field,l=u.p.treeReader.left_field,o=u.p.treeReader.right_field,b=u.p.treeReader.loaded,k,d,h,g,s,ut,nt=0,y=t,tt,c;if(r===undefined&&(r=!1),n==null){if(s=u.p.data.length-1,s>=0)while(s>=0)nt=Math.max(nt,parseInt(u.p.data[s][u.p.localReader.id],10)),s--;n=nt+1}if(it=$(u).jqGrid("getInd",t),tt=!1,t===undefined||t===null||t===""?(t=null,y=null,k="last",g=u.p.tree_root_level,s=u.p.data.length+1):(k="after",d=u.p._index[t],h=u.p.data[d],t=h[u.p.localReader.id],g=parseInt(h[rt],10)+1,p=$(u).jqGrid("getFullTreeNode",h),p.length?(s=p[p.length-1][u.p.localReader.id],y=s,s=$(u).jqGrid("getInd",y)+1):s=$(u).jqGrid("getInd",t)+1,h[v]&&(tt=!0,h[a]=!0,$(u.rows[it]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(u.p.treeIcons.leaf+" tree-leaf").addClass(u.p.treeIcons.minus+" tree-minus"),u.p.data[d][v]=!1,h[b]=!0)),ut=s+1,i[a]===undefined&&(i[a]=!1),i[b]===undefined&&(i[b]=!1),i[rt]=g,i[v]===undefined&&(i[v]=!0),u.p.treeGridModel==="adjacency"&&(i[ft]=t),u.p.treeGridModel==="nested")if(t!==null){if(c=parseInt(h[o],10),w=$.jgrid.from.call(u,u.p.data),w=w.greaterOrEquals(o,c,{stype:"integer"}),f=w.select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][l]=f[e][l]>c?parseInt(f[e][l],10)+2:f[e][l],f[e][o]=f[e][o]>=c?parseInt(f[e][o],10)+2:f[e][o]);i[l]=c;i[o]=c+1}else{if(c=parseInt($(u).jqGrid("getCol",o,!1,"max"),10),f=$.jgrid.from.call(u,u.p.data).greater(l,c,{stype:"integer"}).select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][l]=parseInt(f[e][l],10)+2);if(f=$.jgrid.from.call(u,u.p.data).greater(o,c,{stype:"integer"}).select(),f.length)for(e in f)f.hasOwnProperty(e)&&(f[e][o]=parseInt(f[e][o],10)+2);i[l]=c+1;i[o]=c+2}(t===null||$(u).jqGrid("isNodeLoaded",h)||tt)&&($(u).jqGrid("addRowData",n,i,k,y),$(u).jqGrid("setTreeNode",s,ut));h&&!h[a]&&r&&$(u.rows[it]).find("div.treeclick").click()}}});$.fn.jqDrag=function(n){return y(this,n,"d")};$.fn.jqResize=function(n,t){return y(this,n,"r",t)};$.jqDnR={dnr:{},e:0,drag:function(n){return i.k=="d"?r.css({left:i.X+n.pageX-i.pX,top:i.Y+n.pageY-i.pY}):(r.css({width:Math.max(n.pageX-i.pX+i.W,0),height:Math.max(n.pageY-i.pY+i.H,0)}),f&&o.css({width:Math.max(n.pageX-f.pX+f.W,0),height:Math.max(n.pageY-f.pY+f.H,0)})),!1},stop:function(){$(document).unbind("mousemove",c.drag).unbind("mouseup",c.stop)}};var c=$.jqDnR,i=c.dnr,r=c.e,o,f,y=function(n,t,u,e){return n.each(function(){t=t?$(t,n):n;t.bind("mousedown",{e:n,k:u},function(n){var u=n.data,t={};if(r=u.e,o=e?$(e):!1,r.css("position")!="relative")try{r.position(t)}catch(h){}if(i={X:t.left||s("left")||0,Y:t.top||s("top")||0,W:s("width")||r[0].scrollWidth||0,H:s("height")||r[0].scrollHeight||0,pX:n.pageX,pY:n.pageY,k:u.k},f=o&&u.k!="d"?{X:t.left||l("left")||0,Y:t.top||l("top")||0,W:o[0].offsetWidth||l("width")||0,H:o[0].offsetHeight||l("height")||0,pX:n.pageX,pY:n.pageY,k:u.k}:!1,$("input.hasDatepicker",r[0])[0])try{$("input.hasDatepicker",r[0]).datepicker("hide")}catch(c){}return $(document).mousemove($.jqDnR.drag).mouseup($.jqDnR.stop),!1})})},s=function(n){return parseInt(r.css(n),10)||!1},l=function(n){return parseInt(o.css(n),10)||!1};$.fn.tinyDraggable=function(n){var t=$.extend({handle:0,exclude:0},n);return this.each(function(){var i,r,n=$(this),u=t.handle?$(t.handle,n):n;u.on({mousedown:function(u){if(!t.exclude||!~$.inArray(u.target,$(t.exclude,n))){u.preventDefault();var f=n.offset();i=u.pageX-f.left;r=u.pageY-f.top;$(document).on("mousemove.drag",function(t){n.offset({top:t.pageY-r,left:t.pageX-i})})}},mouseup:function(){$(document).off("mousemove.drag")}})})};$.fn.jqm=function(n){var i={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:t,ajaxText:"",target:t,modal:t,toTop:t,onShow:t,onHide:t,onLoad:t};return this.each(function(){if(this._jqm)return u[this._jqm].c=$.extend({},u[this._jqm].c,n);h++;this._jqm=h;u[h]={c:$.extend(i,$.jqm.params,n),a:t,w:$(this).addClass("jqmID"+h),s:h};i.trigger&&$(this).jqmAddTrigger(i.trigger)})};$.fn.jqmAddClose=function(n){return b(this,n,"jqmHide")};$.fn.jqmAddTrigger=function(n){return b(this,n,"jqmShow")};$.fn.jqmShow=function(n){return this.each(function(){$.jqm.open(this._jqm,n)})};$.fn.jqmHide=function(n){return this.each(function(){$.jqm.close(this._jqm,n)})};$.jqm={hash:{},open:function(n,i){var r=u[n],f=r.c,l="."+f.closeClass,h=parseInt(r.w.css("z-index")),c,o,s;return(h=h>0?h:3e3,c=$("<div><\/div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":h-1,opacity:f.overlay/100}),r.a)?t:(r.t=i,r.a=!0,r.w.css("z-index",h),f.modal?(e[0]||setTimeout(function(){new w("bind")},1),e.push(n)):f.overlay>0?f.closeoverlay&&r.w.jqmAddClose(c):c=t,r.o=c?c.addClass(f.overlayClass).prependTo("body"):t,f.ajax?(o=f.target||r.w,s=f.ajax,o=typeof o=="string"?$(o,r.w):$(o),s=s.substr(0,1)==="@"?$(i).attr(s.substring(1)):s,o.html(f.ajaxText).load(s,function(){f.onLoad&&f.onLoad.call(this,r);l&&r.w.jqmAddClose($(l,r.w));p(r)})):l&&r.w.jqmAddClose($(l,r.w)),f.toTop&&r.o&&r.w.before('<span id="jqmP'+r.w[0]._jqm+'"><\/span>').insertAfter(r.o),f.onShow?f.onShow(r):r.w.show(),p(r),t)},close:function(n){var i=u[n];if(!i.a)return t;if(i.a=t,e[0]&&(e.pop(),e[0]||new w("unbind")),i.c.toTop&&i.o&&$("#jqmP"+i.w[0]._jqm).after(i.w).remove(),i.c.onHide)i.c.onHide(i);else i.w.hide(),i.o&&i.o.remove();return t},params:{}};var h=0,u=$.jqm.hash,e=[],t=!1,p=function(n){n.c.focusField===undefined&&(n.c.focusField=0);n.c.focusField>=0&&s(n)},s=function(n){try{$(":input:visible",n.w)[parseInt(n.c.focusField,10)].focus()}catch(t){}},w=function(n){$(document)[n]("keypress",a)[n]("keydown",a)[n]("mousedown",a)},a=function(n){var t=u[e[e.length-1]],i=!$(n.target).parents(".jqmID"+t.s)[0];return i&&($(".jqmID"+t.s).each(function(){var r=$(this),t=r.offset();if(t.top<=n.pageY&&n.pageY<=t.top+r.height()&&t.left<=n.pageX&&n.pageX<=t.left+r.width())return i=!1,!1}),s(t)),!i},b=function(n,i,r){return n.each(function(){var n=this._jqm;$(i).each(function(){this[r]||(this[r]=[],$(this).click(function(){var n,i;for(n in{jqmShow:1,jqmHide:1})for(i in this[n])u[this[n][i]]&&u[this[n][i]].w[n](this);return t}));this[r].push(n)})})};$.fmatter={};$.extend($.fmatter,{isBoolean:function(n){return typeof n=="boolean"},isObject:function(n){return n&&(typeof n=="object"||$.isFunction(n))||!1},isString:function(n){return typeof n=="string"},isNumber:function(n){return typeof n=="number"&&isFinite(n)},isValue:function(n){return this.isObject(n)||this.isString(n)||this.isNumber(n)||this.isBoolean(n)},isEmpty:function(n){return!this.isString(n)&&this.isValue(n)?!1:this.isValue(n)?(n=$.trim(n).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,""),n===""):!0}});$.fn.fmatter=function(n,t,i,r,u){var f=t;i=$.extend({},$.jgrid.getRegional(this,"formatter"),i);try{f=$.fn.fmatter[n].call(this,t,i,r,u)}catch(e){}return f};$.fmatter.util={NumberFormat:function(n,t){var o,s,c,u,h,f;if($.fmatter.isNumber(n)||(n*=1),$.fmatter.isNumber(n)){var l=n<0,i=String(n),e=t.decimalSeparator||".",r;if($.fmatter.isNumber(t.decimalPlaces)&&(o=t.decimalPlaces,s=Math.pow(10,o),i=String(Math.round(n*s)/s),r=i.lastIndexOf("."),o>0))for(r<0?(i+=e,r=i.length-1):e!=="."&&(i=i.replace(".",e));i.length-1-r<o;)i+="0";if(t.thousandsSeparator){for(c=t.thousandsSeparator,r=i.lastIndexOf(e),r=r>-1?r:i.length,u=i.substring(r),h=-1,f=r;f>0;f--)h++,h%3==0&&f!==r&&(!l||f>1)&&(u=c+u),u=i.charAt(f-1)+u;i=u}return i=t.prefix?t.prefix+i:i,t.suffix?i+t.suffix:i}return n}};$.fn.fmatter.defaultFormat=function(n,t){return $.fmatter.isValue(n)&&n!==""?n:t.defaultValue||"&#160;"};$.fn.fmatter.email=function(n,t){return $.fmatter.isEmpty(n)?$.fn.fmatter.defaultFormat(n,t):'<a href="mailto:'+n+'">'+n+"<\/a>"};$.fn.fmatter.checkbox=function(n,t){var i=$.extend({},t.checkbox),r,u;return t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),r=i.disabled===!0?'disabled="disabled"':"",($.fmatter.isEmpty(n)||n===undefined)&&(n=$.fn.fmatter.defaultFormat(n,i)),n=String(n),n=(n+"").toLowerCase(),u=n.search(/(false|f|0|no|n|off|undefined)/i)<0?" checked='checked' ":"",'<input type="checkbox" '+u+' value="'+n+'" offval="no" '+r+"/>"};$.fn.fmatter.link=function(n,t){var i={target:t.target},r="";return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(r="target="+i.target),!$.fmatter.isEmpty(n))?"<a "+r+' href="'+n+'">'+n+"<\/a>":$.fn.fmatter.defaultFormat(n,t)};$.fn.fmatter.showlink=function(n,t){var i={baseLinkUrl:t.baseLinkUrl,showAction:t.showAction,addParam:t.addParam||"",target:t.target,idName:t.idName},r="",u;return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),i.target&&(r="target="+i.target),u=i.baseLinkUrl+i.showAction+"?"+i.idName+"="+t.rowId+i.addParam,$.fmatter.isString(n)||$.fmatter.isNumber(n))?"<a "+r+' href="'+u+'">'+n+"<\/a>":$.fn.fmatter.defaultFormat(n,t)};$.fn.fmatter.integer=function(n,t){var i=$.extend({},t.integer);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(n))?i.defaultValue:$.fmatter.util.NumberFormat(n,i)};$.fn.fmatter.number=function(n,t){var i=$.extend({},t.number);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(n))?i.defaultValue:$.fmatter.util.NumberFormat(n,i)};$.fn.fmatter.currency=function(n,t){var i=$.extend({},t.currency);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(i=$.extend({},i,t.colModel.formatoptions)),$.fmatter.isEmpty(n))?i.defaultValue:$.fmatter.util.NumberFormat(n,i)};$.fn.fmatter.date=function(n,t,i,r){var u=$.extend({},t.date);return(t.colModel!==undefined&&t.colModel.formatoptions!==undefined&&(u=$.extend({},u,t.colModel.formatoptions)),!u.reformatAfterEdit&&r==="edit")?$.fn.fmatter.defaultFormat(n,t):$.fmatter.isEmpty(n)?$.fn.fmatter.defaultFormat(n,t):$.jgrid.parseDate.call(this,u.srcformat,n,u.newformat,u)};$.fn.fmatter.select=function(n,t){var i,u,e,h,o,f,r,c,l,s;if(n=String(n),i=!1,u=[],t.colModel.formatoptions!==undefined?(i=t.colModel.formatoptions.value,e=t.colModel.formatoptions.separator===undefined?":":t.colModel.formatoptions.separator,h=t.colModel.formatoptions.delimiter===undefined?";":t.colModel.formatoptions.delimiter):t.colModel.editoptions!==undefined&&(i=t.colModel.editoptions.value,e=t.colModel.editoptions.separator===undefined?":":t.colModel.editoptions.separator,h=t.colModel.editoptions.delimiter===undefined?";":t.colModel.editoptions.delimiter),i)if(o=(t.colModel.editoptions!=null&&t.colModel.editoptions.multiple===!0)==!0?!0:!1,f=[],o&&(f=n.split(","),f=$.map(f,function(n){return $.trim(n)})),$.fmatter.isString(i)){for(c=i.split(h),l=0,s=0;s<c.length;s++)if(r=c[s].split(e),r.length>2&&(r[1]=$.map(r,function(n,t){if(t>0)return n}).join(e)),o)$.inArray(r[0],f)>-1&&(u[l]=r[1],l++);else if($.trim(r[0])===$.trim(n)){u[0]=r[1];break}}else $.fmatter.isObject(i)&&(o?u=$.map(f,function(n){return i[n]}):u[0]=i[n]||"");return n=u.join(", "),n===""?$.fn.fmatter.defaultFormat(n,t):n};$.fn.fmatter.rowactions=function(n){var h=$(this).closest("tr.jqgrow"),u=h.attr("id"),l=$(this).closest("table.ui-jqgrid-btable").attr("id").replace(/_frozen([^_]*)$/,"$1"),i=$("#"+l),e=i[0],f=e.p,o=f.colModel[$.jgrid.getCellIndex(this)],r=o.frozen?$("tr#"+u+" td:eq("+$.jgrid.getCellIndex(this)+") > div",i):$(this).parent(),t={extraparam:{}},a=function(n,i){$.isFunction(t.afterSave)&&t.afterSave.call(e,n,i);r.find("div.ui-inline-edit,div.ui-inline-del").show();r.find("div.ui-inline-save,div.ui-inline-cancel").hide()},c=function(n){$.isFunction(t.afterRestore)&&t.afterRestore.call(e,n);r.find("div.ui-inline-edit,div.ui-inline-del").show();r.find("div.ui-inline-save,div.ui-inline-cancel").hide()},s;o.formatoptions!==undefined&&(t=$.extend(t,o.formatoptions));f.editOptions!==undefined&&(t.editOptions=f.editOptions);f.delOptions!==undefined&&(t.delOptions=f.delOptions);h.hasClass("jqgrid-new-row")&&(t.extraparam[f.prmNames.oper]=f.prmNames.addoper);s={keys:t.keys,oneditfunc:t.onEdit,successfunc:t.onSuccess,url:t.url,extraparam:t.extraparam,aftersavefunc:a,errorfunc:t.onError,afterrestorefunc:c,restoreAfterError:t.restoreAfterError,mtype:t.mtype};switch(n){case"edit":i.jqGrid("editRow",u,s);r.find("div.ui-inline-edit,div.ui-inline-del").hide();r.find("div.ui-inline-save,div.ui-inline-cancel").show();i.triggerHandler("jqGridAfterGridComplete");break;case"save":i.jqGrid("saveRow",u,s)&&(r.find("div.ui-inline-edit,div.ui-inline-del").show(),r.find("div.ui-inline-save,div.ui-inline-cancel").hide(),i.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":i.jqGrid("restoreRow",u,c);r.find("div.ui-inline-edit,div.ui-inline-del").show();r.find("div.ui-inline-save,div.ui-inline-cancel").hide();i.triggerHandler("jqGridAfterGridComplete");break;case"del":i.jqGrid("delGridRow",u,t.delOptions);break;case"formedit":i.jqGrid("setSelection",u);i.jqGrid("editGridRow",u,t.editOptions)}};$.fn.fmatter.actions=function(n,t){var o={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},r=t.rowId,f="",i,s=$.jgrid.getRegional(this,"nav"),h=$.jgrid.styleUI[t.styleUI||"jQueryUI"].fmatter,u=$.jgrid.styleUI[t.styleUI||"jQueryUI"].common,e;return(t.colModel.formatoptions!==undefined&&(o=$.extend(o,t.colModel.formatoptions)),r===undefined||$.fmatter.isEmpty(r))?"":(e="onmouseover=jQuery(this).addClass('"+u.hover+"'); onmouseout=jQuery(this).removeClass('"+u.hover+"');  ",o.editformbutton?(i="id='jEditButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); "+e,f+="<div title='"+s.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='"+u.icon_base+" "+h.icon_edit+"'><\/span><\/div>"):o.editbutton&&(i="id='jEditButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); "+e,f+="<div title='"+s.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+i+"><span class='"+u.icon_base+" "+h.icon_edit+"'><\/span><\/div>"),o.delbutton&&(i="id='jDeleteButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); "+e,f+="<div title='"+s.deltitle+"' style='float:left;' class='ui-pg-div ui-inline-del' "+i+"><span class='"+u.icon_base+" "+h.icon_del+"'><\/span><\/div>"),i="id='jSaveButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); "+e,f+="<div title='"+s.savetitle+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+i+"><span class='"+u.icon_base+" "+h.icon_save+"'><\/span><\/div>",i="id='jCancelButton_"+r+"' onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); "+e,f+="<div title='"+s.canceltitle+"' style='float:left;display:none;' class='ui-pg-div ui-inline-cancel' "+i+"><span class='"+u.icon_base+" "+h.icon_cancel+"'><\/span><\/div>","<div style='margin-left:8px;'>"+f+"<\/div>")};$.unformat=function(n,t,i,r){var f,s=t.colModel.formatter,u=t.colModel.formatoptions||{},e,c=/([\.\*\_\'\(\)\{\}\+\?\\])/g,l=t.colModel.unformat||$.fn.fmatter[s]&&$.fn.fmatter[s].unformat,h,o,a;if(l!==undefined&&$.isFunction(l))f=l.call(this,$(n).text(),t,n);else if(s!==undefined&&$.fmatter.isString(s)){h=$.jgrid.getRegional(this,"formatter")||{};switch(s){case"integer":u=$.extend({},h.integer,u);e=u.thousandsSeparator.replace(c,"\\$1");o=new RegExp(e,"g");f=$(n).text().replace(o,"");break;case"number":u=$.extend({},h.number,u);e=u.thousandsSeparator.replace(c,"\\$1");o=new RegExp(e,"g");f=$(n).text().replace(o,"").replace(u.decimalSeparator,".");break;case"currency":u=$.extend({},h.currency,u);e=u.thousandsSeparator.replace(c,"\\$1");o=new RegExp(e,"g");f=$(n).text();u.prefix&&u.prefix.length&&(f=f.substr(u.prefix.length));u.suffix&&u.suffix.length&&(f=f.substr(0,f.length-u.suffix.length));f=f.replace(o,"").replace(u.decimalSeparator,".");break;case"checkbox":a=t.colModel.editoptions?t.colModel.editoptions.value.split(":"):["Yes","No"];f=$("input",n).is(":checked")?a[0]:a[1];break;case"select":f=$.unformat.select(n,t,i,r);break;case"actions":return"";default:f=$(n).text()}}return f!==undefined?f:r===!0?$(n).text():$.jgrid.htmlDecode($(n).html())};$.unformat.select=function(n,t,i,r){var h=[],o=$(n).text(),a,v,c;if(r===!0)return o;var f=$.extend({},t.colModel.formatoptions!==undefined?t.colModel.formatoptions:t.colModel.editoptions),y=f.separator===undefined?":":f.separator,p=f.delimiter===undefined?";":f.delimiter;if(f.value){var s=f.value,l=f.multiple===!0?!0:!1,e=[],u;if(l&&(e=o.split(","),e=$.map(e,function(n){return $.trim(n)})),$.fmatter.isString(s)){for(a=s.split(p),v=0,c=0;c<a.length;c++)if(u=a[c].split(y),u.length>2&&(u[1]=$.map(u,function(n,t){if(t>0)return n}).join(y)),l)$.inArray($.trim(u[1]),e)>-1&&(h[v]=u[0],v++);else if($.trim(u[1])===$.trim(o)){h[0]=u[0];break}}else($.fmatter.isObject(s)||$.isArray(s))&&(l||(e[0]=o),h=$.map(e,function(n){var t;return $.each(s,function(i,r){if(r===n)return t=i,!1}),t!==undefined?t:void 0}));return h.join(", ")}return o||""};$.unformat.date=function(n,t){var i=$.jgrid.getRegional(this,"formatter.date")||{};return(t.formatoptions!==undefined&&(i=$.extend({},i,t.formatoptions)),!$.fmatter.isEmpty(n))?$.jgrid.parseDate.call(this,i.newformat,n,i.srcformat,i):$.fn.fmatter.defaultFormat(n,t)};window.jqGridUtils={stringify:function(n){return JSON.stringify(n,function(n,t){return typeof t=="function"?t.toString():t})},parse:function(n){return JSON.parse(n,function(key,value){return typeof value=="string"&&value.indexOf("function")!==-1?eval("("+value+")"):value})},encode:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(n,t){var i=$.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},t||{}),r=this,f=function(n,t){return n==="#text"?i.encode?r.encode(t):t:typeof t=="function"?"<"+n+"><![CDATA["+t+"]\]><\/"+n+">\n":t===""?"<"+n+">__EMPTY_STRING_<\/"+n+">\n":"<"+n+">"+(i.encode?r.encode(t):t)+"<\/"+n+">\n"},e=function(n,t){for(var i,r=[],o=0;o<t.length;o++)i=t[o],r[r.length]=typeof i=="undefined"||i==null?"<"+n+" />":typeof i=="object"&&i.constructor==Array?e(n,i):typeof i=="object"?u(n,i):f(n,i);return r.length||(r[0]="<"+n+">__EMPTY_ARRAY_<\/"+n+">\n"),r.join("")},u=function(n,t){var c=[],a=[],s,o,l,h;for(s in t)t.hasOwnProperty(s)&&(o=t[s],s.charAt(0)!==i.attr_prefix?c[c.length]=o==null?"<"+s+" />":typeof o=="object"&&o.constructor===Array?e(s,o):typeof o=="object"?u(s,o):f(s,o):a[a.length]=" "+s.substring(1)+'="'+(i.encode?r.encode(o):o)+'"');return l=a.join(""),h=c.join(""),n==null||(h=c.length>0?h.match(/\n/)?"<"+n+l+">\n"+h+"<\/"+n+">\n":"<"+n+l+">"+h+"<\/"+n+">\n":"<"+n+l+" />\n"),h},o=u(null,n);return i.xmlDecl+o},xmlToJSON:function(n,t){var r=$.extend({force_array:[],attr_prefix:"-"},t||{}),__force_array,u,f;if(n){if(__force_array={},r.force_array)for(u=0;u<r.force_array.length;u++)__force_array[r.force_array[u]]=1;typeof n=="string"&&(n=$.parseXML(n));n.documentElement&&(n=n.documentElement);var e=function(hash,key,cnts,val){if(typeof val=="string")if(val.indexOf("function")!==-1)val=eval("("+val+")");else switch(val){case"__EMPTY_ARRAY_":val=[];break;case"__EMPTY_STRING_":val="";break;case"false":val=!1;break;case"true":val=!0}__force_array[key]?(cnts===1&&(hash[key]=[]),hash[key][hash[key].length]=val):cnts===1?hash[key]=val:cnts===2?hash[key]=[hash[key],val]:hash[key][hash[key].length]=val},o=function(n){var l,u,f,t,i,s,h,c;if(n.nodeType!==7){if(n.nodeType===3||n.nodeType===4)return(l=n.nodeValue.match(/[^\x00-\x20]/),l==null)?void 0:n.nodeValue;if(f={},n.attributes&&n.attributes.length)for(u={},t=0;t<n.attributes.length;t++)(i=n.attributes[t].nodeName,typeof i=="string")&&(s=n.attributes[t].nodeValue,s)&&(i=r.attr_prefix+i,typeof f[i]=="undefined"&&(f[i]=0),f[i]++,e(u,i,f[i],s));if(n.childNodes&&n.childNodes.length){for(h=!0,u&&(h=!1),t=0;t<n.childNodes.length&&h;t++)(c=n.childNodes[t].nodeType,c!==3&&c!==4)&&(h=!1);if(h)for(u||(u=""),t=0;t<n.childNodes.length;t++)u+=n.childNodes[t].nodeValue;else for(u||(u={}),t=0;t<n.childNodes.length;t++)(i=n.childNodes[t].nodeName,typeof i=="string")&&(s=o(n.childNodes[t]),s)&&(typeof f[i]=="undefined"&&(f[i]=0),f[i]++,e(u,i,f[i],s))}return u}},i=o(n);return __force_array[n.nodeName]&&(i=[i]),n.nodeType!==11&&(f={},f[n.nodeName]=i,i=f),i}}}});
//# sourceMappingURL=jquery.jqGrid.min.js.map
