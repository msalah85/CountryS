(function(n){typeof define=="function"&&define.amd?define(["jquery"],n):typeof exports=="object"?module.exports=n(require("jquery")):n(jQuery)})(function(n){var r=n.fn.spinbox,t=function(t,r){this.$element=n(t);this.$element.find(".btn").on("click",function(n){n.preventDefault()});this.options=n.extend({},n.fn.spinbox.defaults,r);this.options.step=this.$element.data("step")||this.options.step;this.options.value<this.options.min?this.options.value=this.options.min:this.options.max<this.options.value&&(this.options.value=this.options.max);this.$input=this.$element.find(".spinbox-input");this.$input.on("focusout.fu.spinbox",this.$input,n.proxy(this.change,this));this.$element.on("keydown.fu.spinbox",this.$input,n.proxy(this.keydown,this));this.$element.on("keyup.fu.spinbox",this.$input,n.proxy(this.keyup,this));if(this.bindMousewheelListeners(),this.mousewheelTimeout={},this.options.hold){this.$element.on("mousedown.fu.spinbox",".spinbox-up",n.proxy(function(){this.startSpin(!0)},this));this.$element.on("mouseup.fu.spinbox",".spinbox-up, .spinbox-down",n.proxy(this.stopSpin,this));this.$element.on("mouseout.fu.spinbox",".spinbox-up, .spinbox-down",n.proxy(this.stopSpin,this));this.$element.on("mousedown.fu.spinbox",".spinbox-down",n.proxy(function(){this.startSpin(!1)},this))}else{this.$element.on("click.fu.spinbox",".spinbox-up",n.proxy(function(){this.step(!0)},this));this.$element.on("click.fu.spinbox",".spinbox-down",n.proxy(function(){this.step(!1)},this))}this.switches={count:1,enabled:!0};this.switches.speed=this.options.speed==="medium"?300:this.options.speed==="fast"?100:500;this.options.defaultUnit=i(this.options.defaultUnit,this.options.units)?this.options.defaultUnit:"";this.unit=this.options.defaultUnit;this.lastValue=this.options.value;this.render();this.options.disabled&&this.disable()},u=function(n,t){return Math.round(n/t)*t},i=function(t,i){var r=!1,u=t.toLowerCase();return n.each(i,function(n,t){return t=t.toLowerCase(),u===t?(r=!0,!1):void 0}),r},f=function(n){return isNaN(parseFloat(n))?n:(n>this.options.max?n=this.options.cycle?this.options.min:this.options.max:n<this.options.min&&(n=this.options.cycle?this.options.max:this.options.min),this.options.limitToStep&&this.options.step&&(n=u(n,this.options.step),n>this.options.max?n=n-this.options.step:n<this.options.min&&(n=n+this.options.step)),n)};t.prototype={constructor:t,destroy:function(){return this.$element.remove(),this.$element.find("input").each(function(){n(this).attr("value",n(this).val())}),this.$element[0].outerHTML},render:function(){this.setValue(this.getDisplayValue())},change:function(){this.setValue(this.getDisplayValue());this.triggerChangedEvent()},stopSpin:function(){this.switches.timeout!==undefined&&(clearTimeout(this.switches.timeout),this.switches.count=1,this.triggerChangedEvent())},triggerChangedEvent:function(){var n=this.getValue();n!==this.lastValue&&(this.lastValue=n,this.$element.trigger("changed.fu.spinbox",n))},startSpin:function(t){if(!this.options.disabled){var i=this.switches.count;i===1?(this.step(t),i=1):i=i<3?1.5:i<8?2.5:4;this.switches.timeout=setTimeout(n.proxy(function(){this.iterate(t)},this),this.switches.speed/i);this.switches.count++}},iterate:function(n){this.step(n);this.startSpin(n)},step:function(n){this.setValue(this.getDisplayValue());var t;t=n?this.options.value+this.options.step:this.options.value-this.options.step;t=t.toFixed(5);this.setValue(t+this.unit)},getDisplayValue:function(){var n=this.parseInput(this.$input.val());return!n?this.options.value:n},setDisplayValue:function(n){this.$input.val(n)},getValue:function(){var n=this.options.value;return this.options.decimalMark!=="."&&(n=(n+"").split(".").join(this.options.decimalMark)),n+this.unit},setValue:function(n){var r,t;return(this.options.decimalMark!=="."&&(n=this.parseInput(n)),typeof n!="number"&&(r=n.replace(/[0-9.-]/g,""),this.unit=i(r,this.options.units)?r:this.options.defaultUnit),t=this.getIntValue(n),isNaN(t)&&!isFinite(t))?this.setValue(this.options.value):(t=f.call(this,t),this.options.value=t,n=t+this.unit,this.options.decimalMark!=="."&&(n=(n+"").split(".").join(this.options.decimalMark)),this.setDisplayValue(n),this)},value:function(n){return n||n===0?this.setValue(n):this.getValue()},parseInput:function(n){return(n+"").split(this.options.decimalMark).join(".")},getIntValue:function(n){if(n=typeof n=="undefined"?this.getValue():n,typeof n!="undefined")return typeof n=="string"&&(n=this.parseInput(n)),parseFloat(n,10)},disable:function(){this.options.disabled=!0;this.$element.addClass("disabled");this.$input.attr("disabled","");this.$element.find("button").addClass("disabled")},enable:function(){this.options.disabled=!1;this.$element.removeClass("disabled");this.$input.removeAttr("disabled");this.$element.find("button").removeClass("disabled")},keydown:function(n){var t=n.keyCode;t===38?this.step(!0):t===40?this.step(!1):t===13&&this.change()},keyup:function(n){var t=n.keyCode;(t===38||t===40)&&this.triggerChangedEvent()},bindMousewheelListeners:function(){var t=this.$input.get(0);t.addEventListener?(t.addEventListener("mousewheel",n.proxy(this.mousewheelHandler,this),!1),t.addEventListener("DOMMouseScroll",n.proxy(this.mousewheelHandler,this),!1)):t.attachEvent("onmousewheel",n.proxy(this.mousewheelHandler,this))},mousewheelHandler:function(n){if(!this.options.disabled){var t=window.event||n,i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)),r=this;return clearTimeout(this.mousewheelTimeout),this.mousewheelTimeout=setTimeout(function(){r.triggerChangedEvent()},300),i>0?this.step(!0):this.step(!1),t.preventDefault?t.preventDefault():t.returnValue=!1,!1}}};n.fn.spinbox=function(i){var u=Array.prototype.slice.call(arguments,1),r,f=this.each(function(){var e=n(this),f=e.data("fu.spinbox"),o=typeof i=="object"&&i;f||e.data("fu.spinbox",f=new t(this,o));typeof i=="string"&&(r=f[i].apply(f,u))});return r===undefined?f:r};n.fn.spinbox.defaults={value:0,min:0,max:999,step:1,hold:!0,speed:"medium",disabled:!1,cycle:!1,units:[],decimalMark:".",defaultUnit:"",limitToStep:!1};n.fn.spinbox.Constructor=t;n.fn.spinbox.noConflict=function(){return n.fn.spinbox=r,this};n(document).on("mousedown.fu.spinbox.data-api","[data-initialize=spinbox]",function(t){var i=n(t.target).closest(".spinbox");i.data("fu.spinbox")||i.spinbox(i.data())});n(function(){n("[data-initialize=spinbox]").each(function(){var t=n(this);t.data("fu.spinbox")||t.spinbox(t.data())})})});
//# sourceMappingURL=fuelux.spinner.min.js.map
