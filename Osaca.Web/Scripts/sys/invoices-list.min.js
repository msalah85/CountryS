var targetdata,pageManager;formName="aspnetForm";deleteModalDialog="deleteModal";tableName="Invoices";pKey="InvoiceID";gridId="listItems";gridColumns=[];$clientID=$(".txtSearch");filterNames="";filterValues="";pageManager=function(){var n=function(){t();r()},t=function(){$(".btnSearch").click(function(n){n.preventDefault();var t={client:$clientID.val()*1>0?$clientID.val():"",from:commonManger.dateFormat($("#DateFrom").val()),to:commonManger.dateFormat($("#DateTo").val())};filterNames="ID~From~To";filterValues=$.map(t,function(n){return n||""}).join("~");DefaultGridManager.updateGrid()});$("#aspnetForm").validate({errorElement:"div",errorClass:"help-block",focusInvalid:!1,ignore:"",highlight:function(n){$(n).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(n){$(n).closest(".form-group").removeClass("has-error");$(n).remove()},errorPlacement:function(n,t){if(t.is("input[type=checkbox]")||t.is("input[type=radio]")){var i=t.closest('div[class*="col-"]');i.find(":checkbox,:radio").length>1?i.append(n):n.insertAfter(t.nextAll(".lbl:eq(0)").eq(0))}else t.is(".select2")?n.insertAfter(t.siblings('[class*="select2-container"]:eq(0)')):t.is(".chosen-select")?n.insertAfter(t.siblings('[class*="chosen-container"]:eq(0)')):n.insertAfter(t.parent())},submitHandler:function(){},invalidHandler:function(){}});$("#btnSave").click(function(n){n.preventDefault();$("#aspnetForm").submit()})},i=function(n){var t=$.parseXML(n.d),i=$.xml2json(t).list,u=$.xml2json(t).list1,r;i&&(r=$(i).map(function(n,t){return $("<option />").val(t.ClientID).text(t.ClientName)}).get(),$("#ClientID").append(r).trigger("chosen:updated").trigger("liszt:updated"))},u=function(){dataService.callAjax("Post",JSON.stringify({actionName:"ClientPayments_Properties"}),sUrl+"GetDataDirect",i,commonManger.errorException)},r=function(){var n=commonManger.getQueryStrs(),t;n.id&&(filterNames="ID",filterValues=n.id,$clientID.select2("trigger","select",{data:{id:n.id,text:n.name.split("+").join(" ")}}));gridColumns.push({mDataProp:"InvoiceID",bSortable:!0},{mDataProp:"AddDate",bSortable:!1,mData:function(n){return commonManger.formatJSONDateCal(n.AddDate)}},{mDataProp:"ClientName",bSortable:!0},{mData:function(n){return n.ContainerNo?n.ContainerNo:""},bSortable:!1},{mData:function(n){return n.DeclarationNo?n.DeclarationNo:""},bSortable:!1},{mData:function(n){return numeral(n.TotalAmount).format("0,0.00")},bSortable:!1},{mData:function(n){return numeral(n.ServiceChargeAmount).format("0,0.00")},bSortable:!1},{mData:function(n){return numeral(n.VATAmount).format("0,0.00")},bSortable:!1},{mDataProp:null,bSortable:!1,mData:function(n){var t=' <a class="btn btn-info btn-mini" title="Edit" href="InvoiceAdd.aspx?id='+n.InvoiceID+'"><i class="fa fa-pencil"><\/i><\/a> <button class="btn btn-danger btn-mini remove" title="Delete"><i class="fa fa-trash"><\/i><\/button>';return'<a class="btn btn-grey btn-mini" title="Print" href="InvoicePrint.aspx?id='+n.InvoiceID+'"><i class="fa fa-print"><\/i><\/a>'+t}});t=function(n){var u=commonManger.comp2json(n.d),t=u.list1,i,r;t&&(i={invoices:t.TotalInvoices?t.TotalInvoices*1:0,payments:t.TotalPayments?t.TotalPayments*1:0},$(".TotalInvoices").text(numeral(i.invoices).format("0,0.00")),$(".TotalPayments").text(numeral(i.payments).format("0,0.00")),r=i.invoices-i.payments,$(".clientBalance").text(numeral(r).format("0,0.00")))};DefaultGridManager.Init(t)};return{Init:n}}();pageManager.Init();