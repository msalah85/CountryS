tableName="Outgoings";formName="masterForm";var pageManager=function(){"use strict";var n=commonManger.getUrlVars().id,t=function(){n&&o();i()},i=function(){var n={amount:$("#Amount"),vat:$("#VAT"),save:$("#SaveAll")};$("#"+formName).validate({errorElement:"div",errorClass:"help-block",focusInvalid:!1,ignore:"",highlight:function(n){$(n).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(n){$(n).closest(".form-group").removeClass("has-error");$(n).remove()},errorPlacement:function(n,t){if(t.is("input[type=checkbox]")||t.is("input[type=radio]")){var i=t.closest('div[class*="col-"]');i.find(":checkbox,:radio").length>1?i.append(n):n.insertAfter(t.nextAll(".lbl:eq(0)").eq(0))}else t.is(".select2")?n.insertAfter(t.siblings('[class*="select2-container"]:eq(0)')):t.is(".chosen-select")?n.insertAfter(t.siblings('[class*="chosen-container"]:eq(0)')):n.insertAfter(t.parent())},submitHandler:function(){},invalidHandler:function(){}});n.save.click(function(n){n.preventDefault();r()});n.amount.on("keyup",function(){var t=$(this);n.vat.val(0);$.isNumeric(t.val())&&n.vat.val(t.val()*.05)})},r=function(){if(u()){var t=tableName+"_Save",n=commonManger.Returncontrolsval(formName),i=n[0],r=n[1];commonManger.saveDefaultData(formName,formName,f,null)}else commonManger.showMessage("Data required","Please enter all mandatory fields.")},u=function(){return $("#masterForm").valid()},f=function(n){n=n.d;n.Status?window.location.href="Outgoing/Outgoings.aspx?id="+n.ID:commonManger.showMessage("Error!","Error occured!:"+n.message)},e=function(n){var r=$.parseXML(n.d),t=$.xml2json(r).list,i;t&&($.each(t,function(n,t){$("#masterForm #"+n).val(t)}),$(".date-picker").val(moment(t.AddDate).format("DD-MM-YYYY")),$(".money").val(function(){return numeral($(this).val()).format("0.00")}),i=new Option(t.ExpenseTypeName,t.ExpenseTypeID,!0,!0),$("select.select2").append(i).trigger("change"))},o=function(){var t=tableName+"_One",i=n?{actionName:t,value:n}:{actionName:t};dataService.callAjax("Post",JSON.stringify(i),sUrl+"GetData"+(n?"":"Direct"),e,commonManger.errorException)};return{Init:t}}();