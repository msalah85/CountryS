var targetdata,deleteModalDialog="deleteModal",modalDialog="addModal",formName="aspnetForm",tableName="TransporterPayments",pKey="PaymentID",TransporterID="",gridId="listItems",filterNames="",filterValues="",$TransporterID=$(".txtSearch"),pageManager=function(){var n=commonManger.getQueryStrs(),t=function(){i();e();u()},i=function(){$(".btnSearch").click(function(t){t.preventDefault();var i={Transporter:$TransporterID.val()*1>0?$TransporterID.val():"",from:commonManger.dateFormat($("#DateFrom").val()),to:commonManger.dateFormat($("#DateTo").val())};filterNames="ID~From~To";filterValues=$.map(i,function(n){return n||""}).join("~");n.type&&(filterNames+="~TypeID",filterValues+="~"+n.type);DefaultGridManager.updateGrid()});$("#aspnetForm").validate({errorElement:"div",errorClass:"help-block",focusInvalid:!1,ignore:"",highlight:function(n){$(n).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(n){$(n).closest(".form-group").removeClass("has-error");$(n).remove()},errorPlacement:function(n,t){if(t.is("input[type=checkbox]")||t.is("input[type=radio]")){var i=t.closest('div[class*="col-"]');i.find(":checkbox,:radio").length>1?i.append(n):n.insertAfter(t.nextAll(".lbl:eq(0)").eq(0))}else t.is(".select2")?n.insertAfter(t.siblings('[class*="select2-container"]:eq(0)')):t.is(".chosen-select")?n.insertAfter(t.siblings('[class*="chosen-container"]:eq(0)')):n.insertAfter(t.parent())},submitHandler:function(){},invalidHandler:function(){}});$("#btnSave").click(function(n){n.preventDefault();$("#aspnetForm").submit()})},r=function(n){var i=$.parseXML(n.d),r=$.xml2json(i).list,u=$.xml2json(i).list1,t;r&&(t=$(r).map(function(n,t){return $("<option />").val(t.TransporterID).text(t.TransporterName)}).get(),$("#TransporterID").append(t).trigger("chosen:updated").trigger("liszt:updated"));u&&(t=$(u).map(function(n,t){return $("<option />").val(t.BankID).text(t.BankName)}).get(),$("#BankID").append(t).trigger("chosen:updated").trigger("liszt:updated"))},u=function(){dataService.callAjax("Post",JSON.stringify({actionName:"TransporterPayments_Properties"}),sUrl+"GetDataDirect",r,commonManger.errorException)},f=function(n){var t="Transportation Payments",i="Transporter";switch(n){case"3":t="Crane/Driver Payments";i="Crane/Driver"}document.title=t;$(".head-title").text(t);$(".el-title").text(i)},e=function(){n.id&&(filterNames="ID",filterValues=n.id,$TransporterID.select2("trigger","select",{data:{id:n.id,text:n.name.split("+").join(" ")}}));n.type&&($("#TypeID").val(n.type),filterNames="TypeID",filterValues=n.type,f(n.type));gridColumns.push({mDataProp:"Serial",bSortable:!0},{mDataProp:"TransporterName",bSortable:!0},{mDataProp:"AddDate",bSortable:!1,mData:function(n){return commonManger.formatJSONDateCal(n.AddDate)}},{mDataProp:"PaymentAmount",bSortable:!1,sClass:"hidden-480",mData:function(n){return numeral(n.PaymentAmount).format("0,0.0")}},{mDataProp:"CheckNo",bSortable:!1,sClass:"hidden-480",mData:function(n){return n.CheckNo?n.CheckNo:""}},{mDataProp:"BankName",bSortable:!1,sClass:"hidden-480",mData:function(n){return n.BankName?n.BankName:""}},{mDataProp:null,bSortable:!1,mData:function(){return'<button class="btn btn-primary btn-mini edit" title="Edit"><i class="fa fa-pencil"><\/i><\/button>                             <button class="btn btn-danger btn-mini remove" title="Delete"><i class="fa fa-trash"><\/i><\/button>'}});var t=function(n){var u=commonManger.comp2json(n.d),t=u.list1,i,r;t&&(i={fees:t.TotalFees?t.TotalFees*1:0,payments:t.TotalPayments?t.TotalPayments*1:0},$(".TotalFees").text(numeral(i.fees).format("0,0.00")),$(".TotalPayments").text(numeral(i.payments).format("0,0.00")),r=i.fees-i.payments,$(".DueAmount").text(numeral(r).format("0,0.00")))};DefaultGridManager.Init(t)};return{Init:t}}();pageManager.Init();