var filterNames="",filterValues="",qs=commonManger.getQueryStrs(),initMe=function(){qs.type&&($("#TypeID").val(qs.type),filterNames="TypeID",filterValues=qs.type,UpdatePageTypeTitle(qs.type));setDataToSearch()},UpdatePageTypeTitle=function(n){var t="Transportation Fees",i="Transporter";switch(n){case"3":t="Crane/Driver Fees";i="Crane/Driver"}document.title=t;$(".head-title").text(t);$(".el-title").text(i)},BindListSearch=function(n){var i=$.parseXML(n.d),r=$.xml2json(i).list,u=$.xml2json(i).list1,t;r&&(t=$(r).map(function(n,t){return $("<option />").val(t.ClientID).text(t.ClientName)}).get(),$("#ConsigneeID, #Client").append(t));u&&(t=$(u).map(function(n,t){return $("<option />").val(t.UserID).text(t.UserFullName)}).get(),$("#TransporterID, #User").append(t));$("select").trigger("chosen:updated").trigger("liszt:updated");$(".select2-filter").select2({allowClear:!0})},setDataToSearch=function(){var n={actionName:"Transportation_Properties",names:["ID"],values:[qs.type?qs.type:"2"]};dataService.callAjax("Post",JSON.stringify(n),sUrl+"GetDataList",BindListSearch,commonManger.errorException)},footerCallBack;initMe();deleteModalDialog="deleteModal";modalDialog="addModal";formName="aspnetForm";tableName="Transportation";pKey="TransportID";gridId="listItems";gridColumns=[];gridColumns.push({mDataProp:"Serial",bSortable:!0},{mDataProp:"ClientName",bSortable:!0},{mDataProp:"UserFullName",bSortable:!0},{mDataProp:"TransportDate",bSortable:!0,mData:function(n){return commonManger.formatJSONDateCal(n.TransportDate)}},{mDataProp:"ContainerNo",bSortable:!1,sClass:"hidden-480"},{mDataProp:"TransportCharge",bSortable:!1,sClass:"hidden-480",mData:function(n){return numeral(n.TransportCharge).format("0,0.00")}},{mDataProp:null,bSortable:!1,sClass:"hidden-print",mData:function(){return'<button class="btn btn-primary btn-mini edit" title="Edit"><i class="fa fa-pencil"><\/i><\/button> <button class="btn btn-danger btn-mini remove" title="Delete"><i class="fa fa-trash"><\/i><\/button>'}});$.extend(!0,$.fn.dataTable.defaults,{footerCallback:function(){var n=this.api();$(".tranCharge").html(numeral(n.column(5).data().reduce(function(n,t){return n*1+t*1},0)).format("0,0.00"))}});footerCallBack=function(n){var u=commonManger.comp2json(n.d),t=u.list1,i,r;t&&(i={fees:t.TotalFees?t.TotalFees*1:0,payments:t.TotalPayments?t.TotalPayments*1:0},$(".TotalFees").text(numeral(i.fees).format("0,0.00")),$(".TotalPayments").text(numeral(i.payments).format("0,0.00")),r=i.fees-i.payments,$(".DueAmount").text(numeral(r).format("0,0.00")))};DefaultGridManager.Init(footerCallBack);$("#aspnetForm").validate({errorElement:"div",errorClass:"help-block",focusInvalid:!1,ignore:"",highlight:function(n){$(n).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(n){$(n).closest(".form-group").removeClass("has-error");$(n).remove()},errorPlacement:function(n,t){if(t.is("input[type=checkbox]")||t.is("input[type=radio]")){var i=t.closest('div[class*="col-"]');i.find(":checkbox,:radio").length>1?i.append(n):n.insertAfter(t.nextAll(".lbl:eq(0)").eq(0))}else t.is(".select2")?n.insertAfter(t.siblings('[class*="select2-container"]:eq(0)')):t.is(".chosen-select")?n.insertAfter(t.siblings('[class*="chosen-container"]:eq(0)')):n.insertAfter(t.parent())},submitHandler:function(){},invalidHandler:function(){}});$("#btnSave").click(function(n){n.preventDefault();$("#aspnetForm").submit()});$("#btnSearch").click(function(n){n.preventDefault();var t={client:$("#Client").val(),user:$("#User").val(),from:commonManger.dateFormat($("#DateFrom").val()),to:commonManger.dateFormat($("#DateTo").val())};filterNames="Client~User~From~To";filterValues=$.map(t,function(n){return n}).join("~");qs.type&&(filterNames+="~TypeID",filterValues+="~"+qs.type);DefaultGridManager.updateGrid()});