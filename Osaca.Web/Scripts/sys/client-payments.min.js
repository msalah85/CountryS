var targetdata,deleteModalDialog="deleteModal",modalDialog="addModal",formName="aspnetForm",tableName="ClientPayments",pKey="PaymentID",clientID="",gridId="listItems",filterNames="",filterValues="",$clientID=$(".txtSearch"),pageManager=function(){var n=function(){t();u();r()},t=function(){$(".btnSearch").click(function(n){n.preventDefault();var t={client:$clientID.val()*1>0?$clientID.val():"",from:commonManger.dateFormat($("#DateFrom").val()),to:commonManger.dateFormat($("#DateTo").val())};filterNames="ID~From~To";filterValues=$.map(t,function(n){return n||""}).join("~");DefaultGridManager.updateGrid()});$("#aspnetForm").validate({errorElement:"div",errorClass:"help-block",focusInvalid:!1,ignore:"",highlight:function(n){$(n).closest(".form-group").removeClass("has-info").addClass("has-error")},success:function(n){$(n).closest(".form-group").removeClass("has-error");$(n).remove()},errorPlacement:function(n,t){if(t.is("input[type=checkbox]")||t.is("input[type=radio]")){var i=t.closest('div[class*="col-"]');i.find(":checkbox,:radio").length>1?i.append(n):n.insertAfter(t.nextAll(".lbl:eq(0)").eq(0))}else t.is(".select2")?n.insertAfter(t.siblings('[class*="select2-container"]:eq(0)')):t.is(".chosen-select")?n.insertAfter(t.siblings('[class*="chosen-container"]:eq(0)')):n.insertAfter(t.parent())},submitHandler:function(){},invalidHandler:function(){}});$("#btnSave").click(function(n){n.preventDefault();$("#aspnetForm").submit()})},i=function(n){var i=$.parseXML(n.d),r=$.xml2json(i).list,u=$.xml2json(i).list1,t;r&&(t=$(r).map(function(n,t){return $("<option />").val(t.ClientID).text(t.ClientName)}).get(),$("#ClientID").append(t).trigger("chosen:updated").trigger("liszt:updated"));u&&(t=$(u).map(function(n,t){return $("<option />").val(t.BankID).text(t.BankName)}).get(),$("#BankID").append(t).trigger("chosen:updated").trigger("liszt:updated"))},r=function(){dataService.callAjax("Post",JSON.stringify({actionName:"ClientPayments_Properties"}),sUrl+"GetDataDirect",i,commonManger.errorException)},u=function(){var n=commonManger.getQueryStrs(),t;n.id&&(filterNames="ID",filterValues=n.id,$clientID.select2("trigger","select",{data:{id:n.id,text:n.name.split("+").join(" ")}}));gridColumns.push({mDataProp:"PaymentID",bSortable:!0},{mDataProp:"ClientName",bSortable:!0},{mDataProp:"AddDate",bSortable:!1,mData:function(n){return commonManger.formatJSONDateCal(n.AddDate)}},{mDataProp:"PaymentAmount",bSortable:!1,sClass:"hidden-480",mData:function(n){return numeral(n.PaymentAmount).format("0,0.0")}},{mDataProp:"CheckNo",bSortable:!1,sClass:"hidden-480",mData:function(n){return n.CheckNo?n.CheckNo:""}},{mDataProp:"BankName",bSortable:!1,sClass:"hidden-480",mData:function(n){return n.BankName?n.BankName:""}},{mDataProp:null,bSortable:!1,mData:function(){return'<button class="btn btn-primary btn-mini edit" title="Edit"><i class="fa fa-pencil"><\/i><\/button>                             <button class="btn btn-danger btn-mini remove" title="Delete"><i class="fa fa-trash"><\/i><\/button>'}});t=function(n){var r=commonManger.comp2json(n.d),t=r.list1,i;t&&(i=t.TotalPayments?t.TotalPayments*1:0,$(".totalPayments").text(numeral(i).format("0,0.00")))};DefaultGridManager.Init(t)};return{Init:n}}();pageManager.Init();