/**
* Smoke form validation and components for Bootstrap
* @package Smoke
* @version 3.0
* @link https://github.com/alfredobarron/smoke The Smoke GitHub project
* @author Alfredo Barron <alfredobarronc@gmail.com>
* @copyright 2015 Alfredo Barron
* @license https://www.gnu.org/licenses/lgpl.html GNU Lesser General Public License
* @note This program is free software: you can redistribute it and/or modify
* it under the terms of the GNU Lesser General Public License as published by
* the Free Software Foundation, either version 3 of the License, or
* (at your option) any later version.
* This program is distributed in the hope that it will be useful,
* but WITHOUT ANY WARRANTY; without even the implied warranty of
* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
* GNU Lesser General Public License for more details.
*/
(function(n){n.fn.smkValidate=function(){var u=n.extend({},n.fn.smkValidate.Languaje),t=n.fn.smkValidate.Languaje,i,r;return t===undefined&&(t={textEmpty:"Required field",textEmail:"Enter a valid email",textAlphanumeric:"Only numbers and/or letters allowed",textNumber:"Only numbers are allowed",textNumberRange:"The numerical range must be greater than <b> {@} <\/b> and less than <b> {@} <\/b>",textDecimal:"Only decimal numbers are allowed",textCurrency:"Please enter a valid monetary amount",textSelect:"It is necessary that you select an option",textCheckbox:"It is necessary that you select an option",textLength:"The number of characters is equal to <b> {@} <\/b>",textRange:"The number of characters must be greater than <b> {@} <\/b> and less than <b> {@} <\/b>",textSPassDefault:"Minimum 4 characters",textSPassWeak:"Minimum 6 characters",textSPassMedium:"Minimum 6 characters and a number",textSPassStrong:"Minimum 6 characters a number and a capital",textUrl:"Please enter a valid url",textTel:"Please enter a valid phone number",textColor:"Please enter a valid hex color",textDate:"Please enter a valid date",textDatetime:"Please enter a valid date and time",textMonth:"Please enter a valid month",textWeek:"Please enter a valid week",textTime:"Please enter a valid time",textPattern:"Enter a valid string"}),this.is("form")&&this.attr("novalidate","novalidate"),i=!0,r=this.is(":input")?n(this):n(":input:not(:button):not(:disabled):not(.novalidate)",this),r.each(function(r,u){var e=n(u),o=n(u).attr("type"),a=n(u).attr("data-smk-type"),dt=u.tagName.toLowerCase(),f=n(u).val(),wt=n(u).attr("name"),bt=n(u).attr("required"),h=n(u).attr("minlength"),s=n(u).attr("maxlength"),w=n(u).attr("data-smk-min"),b=n(u).attr("data-smk-max"),kt=n(u).attr("data-smk-strongPass"),k=n(u).attr("data-smk-pattern"),v=n(u).attr("data-smk-decimal-separator"),d=n(u).attr("data-smk-thousand-separator"),g,nt,tt,y,it,rt,ut,ft,p,et,c,l,ot,st,ht,ct,lt,at,vt,yt,pt;if(typeof v=="undefined"&&(v="."),typeof d=="undefined"&&(d=","),n.smkRemoveError(e),(o==="radio"||o==="checkbox")&&(f=n("input[name='"+wt+"']:checked").val()),bt==="required"&&(f===""||f===undefined)&&(i=n.smkAddError(e,t.textEmpty)),f!==""){if(o==="email"&&(g=/^[a-zA-Z0-9_\.\-]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$/,g.test(f)||(i=n.smkAddError(e,t.textEmail))),a==="alphanumeric"&&(nt=/^[a-z0-9]+$/i,nt.test(f)||(i=n.smkAddError(e,t.textAlphanumeric))),(o==="number"||a==="number")&&(tt=/^\d+$/,tt.test(f)?(typeof w!="undefined"||typeof b!="undefined")&&(f<w||f>b)&&(y=[],y[0]=parseInt(w-1),y[1]=parseInt(b)+1,it=n.smokeCustomizeMsg(t.textNumberRange,y),i=n.smkAddError(e,it)):i=n.smkAddError(e,t.textNumber)),a==="decimal"&&(rt=v===","?/^\d+(?:\,\d{1,4})?$/:/^\d+(?:\.\d{1,4})?$/,rt.test(f)||(i=n.smkAddError(e,t.textDecimal))),a==="currency"&&(ut=v===","&&d==="."?/^(?:\d+|\d{1,3}(?:.\d{3})*)(?:\,\d{1,4}){0,1}$/:/^(?:\d+|\d{1,3}(?:,\d{3})*)(?:\.\d{1,4}){0,1}$/,ut.test(f)||(i=n.smkAddError(e,t.textCurrency))),(typeof h!="undefined"||typeof s!="undefined")&&(h===s?f.length!=h&&f.length!=s&&(ft=n.smokeCustomizeMsg(t.textLength,s),i=n.smkAddError(e,ft)):h!==s&&(f.length<h||f.length>s)&&(p=[],p[0]=parseInt(h-1),p[1]=parseInt(s)+1,et=n.smokeCustomizeMsg(t.textRange,p),i=n.smkAddError(e,et))),o==="password"){c="";l="";switch(kt){case"weak":c=/^(?=.*[a-z0-9])\w{6,}$/;l=t.textSPassWeak;break;case"medium":c=/^(?=.*\d)(?=.*[a-z])\w{6,}$/;l=t.textSPassMedium;break;case"strong":c=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}$/;l=t.textSPassStrong;break;default:c=/^(?=.*[a-z0-9])\w{4,}$/;l=t.textSPassDefault}c.test(f)||(i=n.smkAddError(e,l))}o==="url"&&(ot=/^(http|ftp|https):\/\/[\w-]+(\.[\w-]+)*([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?$/,ot.test(f)||(i=n.smkAddError(e,t.textUrl)));o==="tel"&&(st=/^(\+?)\d{10,15}$/,st.test(f)||(i=n.smkAddError(e,t.textTel)));o==="color"&&(ht=/^#([0-9a-f]{3}){1,2}$/i,ht.test(f)||(i=n.smkAddError(e,t.textColor)));o==="date"&&(ct=/^([0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|0[1-9]|[1-2][0-9])$/,ct.test(f)||(i=n.smkAddError(e,t.textDate)));o==="datetime"&&(lt=/^([0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|0[1-9]|[1-2][0-9])T(2[0-3]|[0-1][0-9]):([0-5][0-9]):([0-5][0-9])(Z|[+-](?:2[0-3]|[0-1][0-9]):[0-5][0-9])?$/,lt.test(f)||(i=n.smkAddError(e,t.textDatetime)));o==="month"&&(at=/^([0-9]{4})-(1[0-2]|0[1-9])$/,at.test(f)||(i=n.smkAddError(e,t.textMonth)));o==="week"&&(vt=/^([0-9]{4})-?W(5[0-3]|[1-4][0-9]|0[1-9])$/,vt.test(f)||(i=n.smkAddError(e,t.textWeek)));o==="time"&&(yt=/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9])(:([0-5]?[0-9]))?$/,yt.test(f)||(i=n.smkAddError(e,t.textTime)));k!==""&&k!==undefined&&(pt=new RegExp("^("+k+")$"),pt.test(f)||(i=n.smkAddError(e,t.textPattern)))}e.off(".validation").on("keyup.validation change.validation click.validation",function(){n(this).smkValidate()})}),this.find(".form-group.has-feedback.has-error").first().find(":input:not(:button):not(:disabled):not(.novalidate)").first().focus(),i};n.smkEqualPass=function(t,i){var r=n.smkEqualPass.Languaje;return r===undefined&&(r={textEqualPass:"Passwords do not match"}),t=n(t).val()!==undefined?n(t).val():t,t!==n(i).val()?n.smkAddError(n(i),r.textEqualPass):!0};n.fn.smkClear=function(){var t=this.is(":input")?n(this):n(":input:not(:button)",this);t.each(function(t,i){if(n.smkRemoveError(i),n(i).attr("data-smk-noclear")===undefined){var u=this.type,r=this.tagName.toLowerCase();r=="input"&&(r=u);switch(u){case"text":case"password":case"email":case"number":case"hidden":case"date":case"datetime":case"datetime-local":case"month":case"week":case"time":case"tel":case"url":case"search":case"range":case"color":this.value="";break;case"checkbox":case"radio":this.checked=!1}switch(r){case"textarea":this.value="";break;case"select":this.selectedIndex=0;n(this).hasClass("select2")&&n(this).val("").trigger("change.select2")}}})};n.smkAddError=function(t,i){var s=n(t).parents("form").attr("data-smk-icon"),r=n(t).parents(".form-group"),h=n(t).parent(),u=n(t).attr("type"),e=n(t).attr("data-smk-msg"),o='<span class="glyphicon '+s+' form-control-feedback smk-error-icon"><\/span>',f;return u===undefined&&(u=n(t).prop("tagName").toLowerCase()),(s===""||s===undefined)&&(o=""),(e===""||e===undefined)&&(e=i),f='<span class="help-block smk-error-msg">'+e+"<\/span>",u=="select"?(r.addClass("has-feedback has-error smk-"+u),r.append(o+f)):u=="checkbox"||u=="radio"?(r.addClass("has-feedback has-error smk-"+u),r.append(f)):(r.addClass("has-feedback has-error"),r.parent().hasClass("form-horizontal")?h.append(o+f):r.append(o+f)),!1};n.smkRemoveError=function(t){var i=n(t).parents(".form-group");return i.find(".smk-error-msg, .smk-error-icon").remove(),i.removeClass("has-error has-feedback"),!1};n.smokeCustomizeMsg=function(t,i){var r="",u;return typeof i=="string"?r=t.replace("{@}",i):(u=t.split("{@}"),n.each(i,function(n,t){r+=u[n]+t}),r+=u[u.length-1]),r};n.smkAlert=function(t){function e(){f=setTimeout(function(){r.animate({opacity:"0"},300,function(){r.remove()})},i.time*1e3)}var i=n.extend({text:"مرحباً بك فى تاسكتي",type:"warning",icon:"",position:"top-left",time:5,permanent:!1},t),u="smk-alert-content",r,f;n.inArray(i.position,["top-left","top-center","top-right","bottom-left","bottom-center","bottom-right"])>=0&&(u+="-"+i.position);switch(i.type){case"warning":i.type="alert-warning";i.icon===""&&(i.icon="glyphicon-exclamation-sign");break;case"success":i.type="alert-success";i.icon===""&&(i.icon="glyphicon-ok-sign");break;case"danger":i.type="alert-danger";i.icon===""&&(i.icon="glyphicon-remove-sign");break;case"info":i.type="alert-info";i.icon===""&&(i.icon="glyphicon-info-sign")}n("body > ."+u).length||n("body").append('<div class="smk-alert-content '+u+'"><\/div>');r=n('<div class="alert alert-dismissable '+i.type+' smk-alert"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;<\/button><span class="glyphicon '+i.icon+'"><\/span><p>'+i.text+"<\/p><\/div>");n("."+u).prepend(r);r.animate({opacity:"1"},300);i.permanent===!1&&(f=0,n(r).mouseenter(function(){clearTimeout(f)}).mouseleave(function(){e()}),e())};n.smkConfirm=function(t,i){function u(){n(".smk-confirm-back").fadeOut(200,function(){n(".smk-confirm-back").remove()});n(".smk-confirm").animate({top:"-500px",opacity:"0"},400,function(){n(".smk-confirm").remove()})}var r=n.extend({text:"are you sure?",accept:"Accept",cancel:"Cancel"},t);n("body").append('<div class="smk-confirm-back"><div class="panel panel-default smk-confirm" tabindex="1"><div class="panel-body">'+r.text+'<\/div><div class="panel-footer text-right"><a class="btn btn-default btn-sm smk-cancel" href="#" >'+r.cancel+'<\/a> <a class="btn btn-primary btn-sm smk-accept" href="#">'+r.accept+"<\/a><\/div><\/div><\/div>");n(".smk-confirm").animate({top:"-5px",opacity:"1"},400,function(){n(".smk-confirm").focus()}).on("keydown",function(t){t.which===27?n(".smk-cancel").click():t.which===13&&(n(".smk-accept").is(":focus")||n(".smk-accept").click())});n(".smk-cancel").click(function(n){n.preventDefault();u();i(!1)});n(".smk-accept").click(function(n){n.preventDefault();u();i(!0)})};n.smkPrompt=function(t,i){function u(){n(".smk-confirm-back").fadeOut(200,function(){n(".smk-confirm-back").remove()});n(".smk-prompt").animate({top:"-500px",opacity:"0"},400,function(){n(".smk-prompt").remove()})}var r=n.extend({text:"Enter value",defaultValue:"",accept:"Accept",cancel:"Cancel"},t);n("body").append('<div class="smk-confirm-back"><div class="panel panel-default smk-prompt" tabindex="1"><div class="panel-body"><div class="form-group"><label for="smkPromptInput">'+r.text+'<\/label><input class="form-control" id="smkPromptInput" autocomplete="off" type="text" value="'+r.defaultValue+'"><\/div><\/div><div class="panel-footer text-right"><a class="btn btn-default btn-sm smk-cancel" href="#" >'+r.cancel+'<\/a> <a class="btn btn-primary btn-sm smk-accept" href="#">'+r.accept+"<\/a><\/div><\/div><\/div>");n(".smk-prompt").animate({top:"-5px",opacity:"1"},400,function(){n('.smk-prompt input[type="text"]').focus().select()}).on("keydown",function(t){t.which===27?n(".smk-cancel").click():t.which===13&&(n(".smk-accept").is(":focus")||n(".smk-accept").click())});n(".smk-cancel").click(function(n){n.preventDefault();u();i(!1)});n(".smk-accept").click(function(t){t.preventDefault();u();var r=n(".smk-prompt input").val()!==""?n(".smk-prompt input").val():!1;i(r)})};n.smkFloat=function(n){return typeof n=="string"&&(n=n.replace(",","")),parseFloat(n)};n.smkCurrency=function(n,t){var i,e;if(typeof n!="string"&&(n=n.toString()),i=n.replace(",",""),i===""||isNaN(i))return 0;i=Math.round(parseFloat(i)*Math.pow(10,2))/Math.pow(10,2);t=t||"";i+="";var f=i.split("."),u=f[0],r=f.length>1?"."+f[1]:".00";for(r=r+"00",r=r.substr(0,3),e=/(\d+)(\d{3})/;e.test(u);)u=u.replace(e,"$1,$2");return t+u+r};n.smkGetURL=function(t){var u=n(location).attr("protocol"),f=n(location).attr("hostname"),i=n(location).attr("pathname"),r;return i=i.split("/"),r=i.pop(),r!==""&&(file=r.split("."),file.length<2&&i.push(r)),i=i.slice(0,t+1),i=i.join("/"),u+"//"+f+i};n.fn.smkShowPass=function(){var t=n(this),i=t.parent(".form-group");i.addClass("smk-show-pass");i.append('<span class="glyphicon glyphicon-eye-open smk-btn-show-pass" aria-hidden="true"><\/span>');i.find(".smk-btn-show-pass").click(function(i){i.preventDefault();t.prop("type")=="password"?(t.prop("type","text"),n(this).addClass("glyphicon-eye-close"),n(this).removeClass("glyphicon-eye-open")):(t.prop("type","password"),n(this).removeClass("glyphicon-eye-close"),n(this).addClass("glyphicon-eye-open"))})};n.smkHideEmail=function(n){for(var t=n.split("@"),u=t[0].charAt(0),f=t[0].slice(-1),i="",r=0;r<t[0].length-2;r++)i=i+"*";return u+i+f+"@"+t[1]};n.smkDatePicker=function(n){if(n!==""){var t=(n.getDate()<10?"0":"")+n.getDate(),i=(n.getMonth()+1<10?"0":"")+(n.getMonth()+1),r=n.getFullYear();result=r+"-"+i+"-"+t}else result="";return result};n.smkDate=function(t){var s=n.smkDatePicker(new Date),i=n.extend({date:s,format:"yyyy-mm-dd"},n.smkDate.Languaje,t),u=n.smkDate.Languaje,f;u===undefined&&(u={shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]});var e=/\d+|[a-zA-z]/g,a=i.date.replace(e,'\0').split('\0'),r=i.date.match(e);if(i.date=i.lang=="es"?r[0].length==4?new Date(r[0],r[1]-1,r[2]):new Date(r[2],r[1]-1,r[0]):r[0].length==4?new Date(r[0],r[2]-1,r[1]):new Date(r[2],r[0]-1,r[1]),f="",i.date!="Invalid Date"){var h={d:i.date.getDate(),dd:(i.date.getDate()<10?"0":"")+i.date.getDate(),m:i.date.getMonth()+1,mm:(i.date.getMonth()+1<10?"0":"")+(i.date.getMonth()+1),M:u.shortMonthNames[i.date.getMonth()],MM:u.monthNames[i.date.getMonth()],yyyy:i.date.getFullYear(),yy:i.date.getFullYear().toString().substring(2),hh:i.date.getHours(),mi:i.date.getMinutes(),ss:i.date.getSeconds()},o=/dd?|DD?|mm?|MM?|yy(?:yy)?/g,c=i.format.replace(o,'\0').split('\0'),l=i.format.match(o);n.each(l,function(n,t){f+=c[n]+h[t]})}else f="",console.log("Invalid Date");return f};n.smkDateDiff=function(t){var f=n.extend({fromDate:new Date,toDate:new Date,interval:"days"},t),e=1e3,o=e*60,s=o*60,h=s*24,c=h*7,r=new Date(f.fromDate),u=new Date(f.toDate),i=u-r;if(isNaN(i))return NaN;switch(f.interval){case"years":return u.getFullYear()-r.getFullYear();case"months":return u.getFullYear()*12+u.getMonth()-(r.getFullYear()*12+r.getMonth());case"weeks":return Math.floor(i/c);case"days":return Math.floor(i/h);case"hours":return Math.floor(i/s);case"minutes":return Math.floor(i/o);case"seconds":return Math.floor(i/e);default:return undefined}};n.smkScrolling=function(t){var i=n.extend({speed:1e3},t);n("a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=n(this.hash);if(t=t.length?t:n("[name="+this.hash.slice(1)+"]"),t.length)return n("html,body").animate({scrollTop:t.offset().top},i.speed),!1}})};n.smkProgressBar=function(t){var i=n.extend({element:"body",status:"start",bgColor:"#fff",barColor:"#e10000",content:""},t),r;i.status=="start"?(r='<div class="smk-progressbar">',r+='<div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"><span class="sr-only">0% Complete<\/span><\/div><\/div>',r+='<div class="smk-progressbar-content">'+i.content+"<\/div>",r+="<\/div>",n(i.element).prepend(n(r)),n(".smk-progressbar").css("background-color",i.bgColor),n(".smk-progressbar .progress-bar").css("background-color",i.barColor),i.element=="body"?n(".smk-progressbar").css("position","fixed"):(n(i.element).css("position","relative"),n(".smk-progressbar").css("position","absolute")),n(i.element+" .smk-progressbar .progress .progress-bar").width(50+Math.random()*30+"%")):i.status=="end"&&n(i.element+" .smk-progressbar .progress .progress-bar").width("110%").delay(200,function(){n(i.element+" .smk-progressbar").fadeOut("slow",function(){n(this).remove()})})};n.fn.smkFullscreen=function(){function i(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}var t;n(this).append('<a class="btn smk-fullscreen" href="#"><span class="glyphicon glyphicon-fullscreen" aria-hidden="true"><\/span><\/a>');n(".smk-fullscreen").click(function(n){n.preventDefault();i()});t=function(){n(".smk-fullscreen").children(".glyphicon").toggleClass("glyphicon-fullscreen").toggleClass("glyphicon-resize-small")};document.addEventListener("fullscreenchange",t,!1);document.addEventListener("msfullscreenchange",t,!1);document.addEventListener("mozfullscreenchange",t,!1);document.addEventListener("webkitfullscreenchange",t,!1)};n.fn.smkPanel=function(t){var o=n.extend({hide:""},t),u=n(this),s=o.hide.replace(/\s/g,""),f=s.split(","),r=n(this).children(".panel-heading"),e,i;r.length||(r=n("<div>",{"class":"panel-heading"}),n(this).prepend(r));e=r.children(".panel-title");r.addClass("clearfix");e.length&&e.addClass("pull-left");i='<div class="btn-group btn-group-xs pull-right" role="group">';n.inArray("min",f)==-1&&(i+='<a class="btn smk-min" href="#"><span class="glyphicon glyphicon-minus" aria-hidden="true"><\/span><\/a>');n.inArray("remove",f)==-1&&(i+='<a class="btn smk-remove" href="#"><span class="glyphicon glyphicon-remove" aria-hidden="true"><\/span><\/a>');n.inArray("full",f)==-1&&(i+='<a class="btn smk-full" href="#"><span class="glyphicon glyphicon-resize-full" aria-hidden="true"><\/span><\/a>');i+="<\/div>";n(this).children(".panel-heading").append(i);u.find(".smk-min").click(function(t){t.preventDefault();var i=n(this).parents(".panel-heading").siblings(".panel-body"),r=n(this).parents(".panel-heading").siblings(".panel-footer"),u=n(this).children(".glyphicon");n(r).slideToggle("fast");n(i).slideToggle("fast",function(){u.toggleClass("glyphicon-minus").toggleClass("glyphicon-plus")})});u.find(".smk-remove").click(function(t){t.preventDefault();var i=n(this).parents(".panel");i.fadeOut(400,function(){})});u.find(".smk-full").click(function(t){t.preventDefault();var i=n(this).parents(".panel"),r=n(this).parents(".panel-heading").siblings(".panel-body"),f=n(this).children(".glyphicon"),u=n(this).siblings(".btn").children(".glyphicon-plus");i.hasClass("panel-full")?(i.removeClass("panel-full"),n(this).siblings(".btn").show(),u.length==1&&r.hide(),n("body").css({overflow:"auto"})):(i.addClass("panel-full"),n(this).siblings(".btn").hide(),u.length==1&&r.show(),n("body").css({overflow:"hidden"}));f.toggleClass("glyphicon-resize-full").toggleClass("glyphicon-resize-small")})}})(jQuery);